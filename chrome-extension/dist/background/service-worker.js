var gp=Object.create;var za=Object.defineProperty;var bp=Object.getOwnPropertyDescriptor;var yp=Object.getOwnPropertyNames;var wp=Object.getPrototypeOf,Ap=Object.prototype.hasOwnProperty;var fe=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Au=(n,e)=>{for(var t in e)za(n,t,{get:e[t],enumerable:!0})},Ep=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of yp(e))!Ap.call(n,s)&&s!==t&&za(n,s,{get:()=>e[s],enumerable:!(r=bp(e,s))||r.enumerable});return n};var kp=(n,e,t)=>(t=n!=null?gp(wp(n)):{},Ep(e||!n||!n.__esModule?za(t,"default",{value:n,enumerable:!0}):t,n));var sh=fe((Fk,nh)=>{nh.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var sn=fe(rs=>{var zl,h1=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];rs.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};rs.getSymbolTotalCodewords=function(e){return h1[e]};rs.getBCHDigit=function(n){let e=0;for(;n!==0;)e++,n>>>=1;return e};rs.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');zl=e};rs.isKanjiModeEnabled=function(){return typeof zl<"u"};rs.toSJIS=function(e){return zl(e)}});var Ba=fe(It=>{It.L={bit:1};It.M={bit:0};It.Q={bit:3};It.H={bit:2};function p1(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return It.L;case"m":case"medium":return It.M;case"q":case"quartile":return It.Q;case"h":case"high":return It.H;default:throw new Error("Unknown EC Level: "+n)}}It.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4};It.from=function(e,t){if(It.isValid(e))return e;try{return p1(e)}catch{return t}}});var ah=fe((Gk,ih)=>{function oh(){this.buffer=[],this.length=0}oh.prototype={get:function(n){let e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};ih.exports=oh});var lh=fe((Kk,ch)=>{function jo(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}jo.prototype.set=function(n,e,t,r){let s=n*this.size+e;this.data[s]=t,r&&(this.reservedBit[s]=!0)};jo.prototype.get=function(n,e){return this.data[n*this.size+e]};jo.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t};jo.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};ch.exports=jo});var uh=fe(Ra=>{var x1=sn().getSymbolSize;Ra.getRowColCoords=function(e){if(e===1)return[];let t=Math.floor(e/7)+2,r=x1(e),s=r===145?26:Math.ceil((r-13)/(2*t-2))*2,o=[r-7];for(let i=1;i<t-1;i++)o[i]=o[i-1]-s;return o.push(6),o.reverse()};Ra.getPositions=function(e){let t=[],r=Ra.getRowColCoords(e),s=r.length;for(let o=0;o<s;o++)for(let i=0;i<s;i++)o===0&&i===0||o===0&&i===s-1||o===s-1&&i===0||t.push([r[o],r[i]]);return t}});var hh=fe(dh=>{var m1=sn().getSymbolSize,fh=7;dh.getPositions=function(e){let t=m1(e);return[[0,0],[t-fh,0],[0,t-fh]]}});var ph=fe(ye=>{ye.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var ns={N1:3,N2:3,N3:40,N4:10};ye.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7};ye.from=function(e){return ye.isValid(e)?parseInt(e,10):void 0};ye.getPenaltyN1=function(e){let t=e.size,r=0,s=0,o=0,i=null,a=null;for(let c=0;c<t;c++){s=o=0,i=a=null;for(let l=0;l<t;l++){let u=e.get(c,l);u===i?s++:(s>=5&&(r+=ns.N1+(s-5)),i=u,s=1),u=e.get(l,c),u===a?o++:(o>=5&&(r+=ns.N1+(o-5)),a=u,o=1)}s>=5&&(r+=ns.N1+(s-5)),o>=5&&(r+=ns.N1+(o-5))}return r};ye.getPenaltyN2=function(e){let t=e.size,r=0;for(let s=0;s<t-1;s++)for(let o=0;o<t-1;o++){let i=e.get(s,o)+e.get(s,o+1)+e.get(s+1,o)+e.get(s+1,o+1);(i===4||i===0)&&r++}return r*ns.N2};ye.getPenaltyN3=function(e){let t=e.size,r=0,s=0,o=0;for(let i=0;i<t;i++){s=o=0;for(let a=0;a<t;a++)s=s<<1&2047|e.get(i,a),a>=10&&(s===1488||s===93)&&r++,o=o<<1&2047|e.get(a,i),a>=10&&(o===1488||o===93)&&r++}return r*ns.N3};ye.getPenaltyN4=function(e){let t=0,r=e.data.length;for(let o=0;o<r;o++)t+=e.data[o];return Math.abs(Math.ceil(t*100/r/5)-10)*ns.N4};function g1(n,e,t){switch(n){case ye.Patterns.PATTERN000:return(e+t)%2===0;case ye.Patterns.PATTERN001:return e%2===0;case ye.Patterns.PATTERN010:return t%3===0;case ye.Patterns.PATTERN011:return(e+t)%3===0;case ye.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(t/3))%2===0;case ye.Patterns.PATTERN101:return e*t%2+e*t%3===0;case ye.Patterns.PATTERN110:return(e*t%2+e*t%3)%2===0;case ye.Patterns.PATTERN111:return(e*t%3+(e+t)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}ye.applyMask=function(e,t){let r=t.size;for(let s=0;s<r;s++)for(let o=0;o<r;o++)t.isReserved(o,s)||t.xor(o,s,g1(e,o,s))};ye.getBestMask=function(e,t){let r=Object.keys(ye.Patterns).length,s=0,o=1/0;for(let i=0;i<r;i++){t(i),ye.applyMask(i,e);let a=ye.getPenaltyN1(e)+ye.getPenaltyN2(e)+ye.getPenaltyN3(e)+ye.getPenaltyN4(e);ye.applyMask(i,e),a<o&&(o=a,s=i)}return s}});var Jl=fe(Ql=>{var on=Ba(),Sa=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ua=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Ql.getBlocksCount=function(e,t){switch(t){case on.L:return Sa[(e-1)*4+0];case on.M:return Sa[(e-1)*4+1];case on.Q:return Sa[(e-1)*4+2];case on.H:return Sa[(e-1)*4+3];default:return}};Ql.getTotalCodewordsCount=function(e,t){switch(t){case on.L:return Ua[(e-1)*4+0];case on.M:return Ua[(e-1)*4+1];case on.Q:return Ua[(e-1)*4+2];case on.H:return Ua[(e-1)*4+3];default:return}}});var xh=fe(Da=>{var qo=new Uint8Array(512),Oa=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)qo[t]=e,Oa[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)qo[t]=qo[t-255]})();Da.log=function(e){if(e<1)throw new Error("log("+e+")");return Oa[e]};Da.exp=function(e){return qo[e]};Da.mul=function(e,t){return e===0||t===0?0:qo[Oa[e]+Oa[t]]}});var mh=fe($o=>{var jl=xh();$o.mul=function(e,t){let r=new Uint8Array(e.length+t.length-1);for(let s=0;s<e.length;s++)for(let o=0;o<t.length;o++)r[s+o]^=jl.mul(e[s],t[o]);return r};$o.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){let s=r[0];for(let i=0;i<t.length;i++)r[i]^=jl.mul(t[i],s);let o=0;for(;o<r.length&&r[o]===0;)o++;r=r.slice(o)}return r};$o.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let r=0;r<e;r++)t=$o.mul(t,new Uint8Array([1,jl.exp(r)]));return t}});var yh=fe((qk,bh)=>{var gh=mh();function ql(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}ql.prototype.initialize=function(e){this.degree=e,this.genPoly=gh.generateECPolynomial(this.degree)};ql.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let r=gh.mod(t,this.genPoly),s=this.degree-r.length;if(s>0){let o=new Uint8Array(this.degree);return o.set(r,s),o}return r};bh.exports=ql});var $l=fe(wh=>{wh.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}});var Yl=fe(Tr=>{var Ah="[0-9]+",b1="[A-Z $%*+\\-./:]+",Yo="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Yo=Yo.replace(/u/g,"\\u");var y1="(?:(?![A-Z0-9 $%*+\\-./:]|"+Yo+`)(?:.|[\r
]))+`;Tr.KANJI=new RegExp(Yo,"g");Tr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Tr.BYTE=new RegExp(y1,"g");Tr.NUMERIC=new RegExp(Ah,"g");Tr.ALPHANUMERIC=new RegExp(b1,"g");var w1=new RegExp("^"+Yo+"$"),A1=new RegExp("^"+Ah+"$"),E1=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Tr.testKanji=function(e){return w1.test(e)};Tr.testNumeric=function(e){return A1.test(e)};Tr.testAlphanumeric=function(e){return E1.test(e)}});var an=fe(Se=>{var k1=$l(),Zl=Yl();Se.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};Se.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};Se.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};Se.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};Se.MIXED={bit:-1};Se.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!k1.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]};Se.getBestModeForData=function(e){return Zl.testNumeric(e)?Se.NUMERIC:Zl.testAlphanumeric(e)?Se.ALPHANUMERIC:Zl.testKanji(e)?Se.KANJI:Se.BYTE};Se.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")};Se.isValid=function(e){return e&&e.bit&&e.ccBits};function N1(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return Se.NUMERIC;case"alphanumeric":return Se.ALPHANUMERIC;case"kanji":return Se.KANJI;case"byte":return Se.BYTE;default:throw new Error("Unknown mode: "+n)}}Se.from=function(e,t){if(Se.isValid(e))return e;try{return N1(e)}catch{return t}}});var Ph=fe(ss=>{var La=sn(),I1=Jl(),Eh=Ba(),cn=an(),Xl=$l(),Nh=7973,kh=La.getBCHDigit(Nh);function P1(n,e,t){for(let r=1;r<=40;r++)if(e<=ss.getCapacity(r,t,n))return r}function Ih(n,e){return cn.getCharCountIndicator(n,e)+4}function T1(n,e){let t=0;return n.forEach(function(r){let s=Ih(r.mode,e);t+=s+r.getBitsLength()}),t}function v1(n,e){for(let t=1;t<=40;t++)if(T1(n,t)<=ss.getCapacity(t,e,cn.MIXED))return t}ss.from=function(e,t){return Xl.isValid(e)?parseInt(e,10):t};ss.getCapacity=function(e,t,r){if(!Xl.isValid(e))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=cn.BYTE);let s=La.getSymbolTotalCodewords(e),o=I1.getTotalCodewordsCount(e,t),i=(s-o)*8;if(r===cn.MIXED)return i;let a=i-Ih(r,e);switch(r){case cn.NUMERIC:return Math.floor(a/10*3);case cn.ALPHANUMERIC:return Math.floor(a/11*2);case cn.KANJI:return Math.floor(a/13);case cn.BYTE:default:return Math.floor(a/8)}};ss.getBestVersionForData=function(e,t){let r,s=Eh.from(t,Eh.M);if(Array.isArray(e)){if(e.length>1)return v1(e,s);if(e.length===0)return 1;r=e[0]}else r=e;return P1(r.mode,r.getLength(),s)};ss.getEncodedBits=function(e){if(!Xl.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;La.getBCHDigit(t)-kh>=0;)t^=Nh<<La.getBCHDigit(t)-kh;return e<<12|t}});var Bh=fe(Ch=>{var eu=sn(),vh=1335,C1=21522,Th=eu.getBCHDigit(vh);Ch.getEncodedBits=function(e,t){let r=e.bit<<3|t,s=r<<10;for(;eu.getBCHDigit(s)-Th>=0;)s^=vh<<eu.getBCHDigit(s)-Th;return(r<<10|s)^C1}});var Sh=fe((tN,Rh)=>{var B1=an();function $s(n){this.mode=B1.NUMERIC,this.data=n.toString()}$s.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};$s.prototype.getLength=function(){return this.data.length};$s.prototype.getBitsLength=function(){return $s.getBitsLength(this.data.length)};$s.prototype.write=function(e){let t,r,s;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),s=parseInt(r,10),e.put(s,10);let o=this.data.length-t;o>0&&(r=this.data.substr(t),s=parseInt(r,10),e.put(s,o*3+1))};Rh.exports=$s});var Oh=fe((rN,Uh)=>{var R1=an(),tu=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ys(n){this.mode=R1.ALPHANUMERIC,this.data=n}Ys.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Ys.prototype.getLength=function(){return this.data.length};Ys.prototype.getBitsLength=function(){return Ys.getBitsLength(this.data.length)};Ys.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=tu.indexOf(this.data[t])*45;r+=tu.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(tu.indexOf(this.data[t]),6)};Uh.exports=Ys});var Lh=fe((nN,Dh)=>{var S1=an();function Zs(n){this.mode=S1.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}Zs.getBitsLength=function(e){return e*8};Zs.prototype.getLength=function(){return this.data.length};Zs.prototype.getBitsLength=function(){return Zs.getBitsLength(this.data.length)};Zs.prototype.write=function(n){for(let e=0,t=this.data.length;e<t;e++)n.put(this.data[e],8)};Dh.exports=Zs});var Fh=fe((sN,Mh)=>{var U1=an(),O1=sn();function Xs(n){this.mode=U1.KANJI,this.data=n}Xs.getBitsLength=function(e){return e*13};Xs.prototype.getLength=function(){return this.data.length};Xs.prototype.getBitsLength=function(){return Xs.getBitsLength(this.data.length)};Xs.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=O1.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}};Mh.exports=Xs});var _h=fe((oN,ru)=>{"use strict";var Zo={single_source_shortest_paths:function(n,e,t){var r={},s={};s[e]=0;var o=Zo.PriorityQueue.make();o.push(e,0);for(var i,a,c,l,u,f,h,p,b;!o.empty();){i=o.pop(),a=i.value,l=i.cost,u=n[a]||{};for(c in u)u.hasOwnProperty(c)&&(f=u[c],h=l+f,p=s[c],b=typeof s[c]>"u",(b||p>h)&&(s[c]=h,o.push(c,h),r[c]=a))}if(typeof t<"u"&&typeof s[t]>"u"){var m=["Could not find a path from ",e," to ",t,"."].join("");throw new Error(m)}return r},extract_shortest_path_from_predecessor_list:function(n,e){for(var t=[],r=e,s;r;)t.push(r),s=n[r],r=n[r];return t.reverse(),t},find_path:function(n,e,t){var r=Zo.single_source_shortest_paths(n,e,t);return Zo.extract_shortest_path_from_predecessor_list(r,t)},PriorityQueue:{make:function(n){var e=Zo.PriorityQueue,t={},r;n=n||{};for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.queue=[],t.sorter=n.sorter||e.default_sorter,t},default_sorter:function(n,e){return n.cost-e.cost},push:function(n,e){var t={value:n,cost:e};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof ru<"u"&&(ru.exports=Zo)});var Jh=fe(eo=>{var le=an(),Kh=Sh(),Wh=Oh(),Vh=Lh(),zh=Fh(),Xo=Yl(),Ma=sn(),D1=_h();function Hh(n){return unescape(encodeURIComponent(n)).length}function ei(n,e,t){let r=[],s;for(;(s=n.exec(t))!==null;)r.push({data:s[0],index:s.index,mode:e,length:s[0].length});return r}function Qh(n){let e=ei(Xo.NUMERIC,le.NUMERIC,n),t=ei(Xo.ALPHANUMERIC,le.ALPHANUMERIC,n),r,s;return Ma.isKanjiModeEnabled()?(r=ei(Xo.BYTE,le.BYTE,n),s=ei(Xo.KANJI,le.KANJI,n)):(r=ei(Xo.BYTE_KANJI,le.BYTE,n),s=[]),e.concat(t,r,s).sort(function(i,a){return i.index-a.index}).map(function(i){return{data:i.data,mode:i.mode,length:i.length}})}function nu(n,e){switch(e){case le.NUMERIC:return Kh.getBitsLength(n);case le.ALPHANUMERIC:return Wh.getBitsLength(n);case le.KANJI:return zh.getBitsLength(n);case le.BYTE:return Vh.getBitsLength(n)}}function L1(n){return n.reduce(function(e,t){let r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}function M1(n){let e=[];for(let t=0;t<n.length;t++){let r=n[t];switch(r.mode){case le.NUMERIC:e.push([r,{data:r.data,mode:le.ALPHANUMERIC,length:r.length},{data:r.data,mode:le.BYTE,length:r.length}]);break;case le.ALPHANUMERIC:e.push([r,{data:r.data,mode:le.BYTE,length:r.length}]);break;case le.KANJI:e.push([r,{data:r.data,mode:le.BYTE,length:Hh(r.data)}]);break;case le.BYTE:e.push([{data:r.data,mode:le.BYTE,length:Hh(r.data)}])}}return e}function F1(n,e){let t={},r={start:{}},s=["start"];for(let o=0;o<n.length;o++){let i=n[o],a=[];for(let c=0;c<i.length;c++){let l=i[c],u=""+o+c;a.push(u),t[u]={node:l,lastCount:0},r[u]={};for(let f=0;f<s.length;f++){let h=s[f];t[h]&&t[h].node.mode===l.mode?(r[h][u]=nu(t[h].lastCount+l.length,l.mode)-nu(t[h].lastCount,l.mode),t[h].lastCount+=l.length):(t[h]&&(t[h].lastCount=l.length),r[h][u]=nu(l.length,l.mode)+4+le.getCharCountIndicator(l.mode,e))}}s=a}for(let o=0;o<s.length;o++)r[s[o]].end=0;return{map:r,table:t}}function Gh(n,e){let t,r=le.getBestModeForData(n);if(t=le.from(e,r),t!==le.BYTE&&t.bit<r.bit)throw new Error('"'+n+'" cannot be encoded with mode '+le.toString(t)+`.
 Suggested mode is: `+le.toString(r));switch(t===le.KANJI&&!Ma.isKanjiModeEnabled()&&(t=le.BYTE),t){case le.NUMERIC:return new Kh(n);case le.ALPHANUMERIC:return new Wh(n);case le.KANJI:return new zh(n);case le.BYTE:return new Vh(n)}}eo.fromArray=function(e){return e.reduce(function(t,r){return typeof r=="string"?t.push(Gh(r,null)):r.data&&t.push(Gh(r.data,r.mode)),t},[])};eo.fromString=function(e,t){let r=Qh(e,Ma.isKanjiModeEnabled()),s=M1(r),o=F1(s,t),i=D1.find_path(o.map,"start","end"),a=[];for(let c=1;c<i.length-1;c++)a.push(o.table[i[c]].node);return eo.fromArray(L1(a))};eo.rawSplit=function(e){return eo.fromArray(Qh(e,Ma.isKanjiModeEnabled()))}});var qh=fe(jh=>{var _a=sn(),su=Ba(),_1=ah(),H1=lh(),G1=uh(),K1=hh(),au=ph(),cu=Jl(),W1=yh(),Fa=Ph(),V1=Bh(),z1=an(),ou=Jh();function Q1(n,e){let t=n.size,r=K1.getPositions(e);for(let s=0;s<r.length;s++){let o=r[s][0],i=r[s][1];for(let a=-1;a<=7;a++)if(!(o+a<=-1||t<=o+a))for(let c=-1;c<=7;c++)i+c<=-1||t<=i+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?n.set(o+a,i+c,!0,!0):n.set(o+a,i+c,!1,!0))}}function J1(n){let e=n.size;for(let t=8;t<e-8;t++){let r=t%2===0;n.set(t,6,r,!0),n.set(6,t,r,!0)}}function j1(n,e){let t=G1.getPositions(e);for(let r=0;r<t.length;r++){let s=t[r][0],o=t[r][1];for(let i=-2;i<=2;i++)for(let a=-2;a<=2;a++)i===-2||i===2||a===-2||a===2||i===0&&a===0?n.set(s+i,o+a,!0,!0):n.set(s+i,o+a,!1,!0)}}function q1(n,e){let t=n.size,r=Fa.getEncodedBits(e),s,o,i;for(let a=0;a<18;a++)s=Math.floor(a/3),o=a%3+t-8-3,i=(r>>a&1)===1,n.set(s,o,i,!0),n.set(o,s,i,!0)}function iu(n,e,t){let r=n.size,s=V1.getEncodedBits(e,t),o,i;for(o=0;o<15;o++)i=(s>>o&1)===1,o<6?n.set(o,8,i,!0):o<8?n.set(o+1,8,i,!0):n.set(r-15+o,8,i,!0),o<8?n.set(8,r-o-1,i,!0):o<9?n.set(8,15-o-1+1,i,!0):n.set(8,15-o-1,i,!0);n.set(r-8,8,1,!0)}function $1(n,e){let t=n.size,r=-1,s=t-1,o=7,i=0;for(let a=t-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!n.isReserved(s,a-c)){let l=!1;i<e.length&&(l=(e[i]>>>o&1)===1),n.set(s,a-c,l),o--,o===-1&&(i++,o=7)}if(s+=r,s<0||t<=s){s-=r,r=-r;break}}}function Y1(n,e,t){let r=new _1;t.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),z1.getCharCountIndicator(c.mode,n)),c.write(r)});let s=_a.getSymbolTotalCodewords(n),o=cu.getTotalCodewordsCount(n,e),i=(s-o)*8;for(r.getLengthInBits()+4<=i&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let a=(i-r.getLengthInBits())/8;for(let c=0;c<a;c++)r.put(c%2?17:236,8);return Z1(r,n,e)}function Z1(n,e,t){let r=_a.getSymbolTotalCodewords(e),s=cu.getTotalCodewordsCount(e,t),o=r-s,i=cu.getBlocksCount(e,t),a=r%i,c=i-a,l=Math.floor(r/i),u=Math.floor(o/i),f=u+1,h=l-u,p=new W1(h),b=0,m=new Array(i),y=new Array(i),w=0,P=new Uint8Array(n.buffer);for(let S=0;S<i;S++){let R=S<c?u:f;m[S]=P.slice(b,b+R),y[S]=p.encode(m[S]),b+=R,w=Math.max(w,R)}let N=new Uint8Array(r),L=0,T,C;for(T=0;T<w;T++)for(C=0;C<i;C++)T<m[C].length&&(N[L++]=m[C][T]);for(T=0;T<h;T++)for(C=0;C<i;C++)N[L++]=y[C][T];return N}function X1(n,e,t,r){let s;if(Array.isArray(n))s=ou.fromArray(n);else if(typeof n=="string"){let l=e;if(!l){let u=ou.rawSplit(n);l=Fa.getBestVersionForData(u,t)}s=ou.fromString(n,l||40)}else throw new Error("Invalid data");let o=Fa.getBestVersionForData(s,t);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=o;else if(e<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let i=Y1(e,t,s),a=_a.getSymbolSize(e),c=new H1(a);return Q1(c,e),J1(c),j1(c,e),iu(c,t,0),e>=7&&q1(c,e),$1(c,i),isNaN(r)&&(r=au.getBestMask(c,iu.bind(null,c,t))),au.applyMask(r,c),iu(c,t,r),{modules:c,version:e,errorCorrectionLevel:t,maskPattern:r,segments:s}}jh.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let r=su.M,s,o;return typeof t<"u"&&(r=su.from(t.errorCorrectionLevel,su.M),s=Fa.from(t.version),o=au.from(t.maskPattern),t.toSJISFunc&&_a.setToSJISFunction(t.toSJISFunc)),X1(e,s,r,o)}});var lu=fe(os=>{function $h(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let e=n.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+n);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(r){return[r,r]}))),e.length===6&&e.push("F","F");let t=parseInt(e.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+e.slice(0,6).join("")}}os.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,s=e.scale||4;return{width:r,scale:r?4:s,margin:t,color:{dark:$h(e.color.dark||"#000000ff"),light:$h(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}};os.getScale=function(e,t){return t.width&&t.width>=e+t.margin*2?t.width/(e+t.margin*2):t.scale};os.getImageWidth=function(e,t){let r=os.getScale(e,t);return Math.floor((e+t.margin*2)*r)};os.qrToImageData=function(e,t,r){let s=t.modules.size,o=t.modules.data,i=os.getScale(s,r),a=Math.floor((s+r.margin*2)*i),c=r.margin*i,l=[r.color.light,r.color.dark];for(let u=0;u<a;u++)for(let f=0;f<a;f++){let h=(u*a+f)*4,p=r.color.light;if(u>=c&&f>=c&&u<a-c&&f<a-c){let b=Math.floor((u-c)/i),m=Math.floor((f-c)/i);p=l[o[b*s+m]?1:0]}e[h++]=p.r,e[h++]=p.g,e[h++]=p.b,e[h]=p.a}}});var Yh=fe(Ha=>{var uu=lu();function ey(n,e,t){n.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=t,e.width=t,e.style.height=t+"px",e.style.width=t+"px"}function ty(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}Ha.render=function(e,t,r){let s=r,o=t;typeof s>"u"&&(!t||!t.getContext)&&(s=t,t=void 0),t||(o=ty()),s=uu.getOptions(s);let i=uu.getImageWidth(e.modules.size,s),a=o.getContext("2d"),c=a.createImageData(i,i);return uu.qrToImageData(c.data,e,s),ey(a,o,i),a.putImageData(c,0,0),o};Ha.renderToDataURL=function(e,t,r){let s=r;typeof s>"u"&&(!t||!t.getContext)&&(s=t,t=void 0),s||(s={});let o=Ha.render(e,t,s),i=s.type||"image/png",a=s.rendererOpts||{};return o.toDataURL(i,a.quality)}});var ep=fe(Xh=>{var ry=lu();function Zh(n,e){let t=n.a/255,r=e+'="'+n.hex+'"';return t<1?r+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':r}function fu(n,e,t){let r=n+e;return typeof t<"u"&&(r+=" "+t),r}function ny(n,e,t){let r="",s=0,o=!1,i=0;for(let a=0;a<n.length;a++){let c=Math.floor(a%e),l=Math.floor(a/e);!c&&!o&&(o=!0),n[a]?(i++,a>0&&c>0&&n[a-1]||(r+=o?fu("M",c+t,.5+l+t):fu("m",s,0),s=0,o=!1),c+1<e&&n[a+1]||(r+=fu("h",i),i=0)):s++}return r}Xh.render=function(e,t,r){let s=ry.getOptions(t),o=e.modules.size,i=e.modules.data,a=o+s.margin*2,c=s.color.light.a?"<path "+Zh(s.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+Zh(s.color.dark,"stroke")+' d="'+ny(i,o,s.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof r=="function"&&r(null,h),h}});var rp=fe(ti=>{var sy=sh(),du=qh(),tp=Yh(),oy=ep();function hu(n,e,t,r,s){let o=[].slice.call(arguments,1),i=o.length,a=typeof o[i-1]=="function";if(!a&&!sy())throw new Error("Callback required as last argument");if(a){if(i<2)throw new Error("Too few arguments provided");i===2?(s=t,t=e,e=r=void 0):i===3&&(e.getContext&&typeof s>"u"?(s=r,r=void 0):(s=r,r=t,t=e,e=void 0))}else{if(i<1)throw new Error("Too few arguments provided");return i===1?(t=e,e=r=void 0):i===2&&!e.getContext&&(r=t,t=e,e=void 0),new Promise(function(c,l){try{let u=du.create(t,r);c(n(u,e,r))}catch(u){l(u)}})}try{let c=du.create(t,r);s(null,n(c,e,r))}catch(c){s(c)}}ti.create=du.create;ti.toCanvas=hu.bind(null,tp.render);ti.toDataURL=hu.bind(null,tp.renderToDataURL);ti.toString=hu.bind(null,function(n,e,t){return oy.render(n,t)})});var ne={};Au(ne,{AbiCoder:()=>gt,AbstractProvider:()=>yt,AbstractSigner:()=>wt,AlchemyProvider:()=>Wn,AnkrProvider:()=>Kn,BaseContract:()=>Ar,BaseWallet:()=>kr,Block:()=>Dn,BlockscoutProvider:()=>Fo,BrowserProvider:()=>Mo,ChainstackProvider:()=>Vn,CloudflareProvider:()=>zn,ConstructorFragment:()=>Jt,Contract:()=>ot,ContractEventPayload:()=>Ln,ContractFactory:()=>vo,ContractTransactionReceipt:()=>Os,ContractTransactionResponse:()=>wr,ContractUnknownEventPayload:()=>jr,EnsPlugin:()=>Yr,EnsResolver:()=>qr,ErrorDescription:()=>Ss,ErrorFragment:()=>tt,EtherSymbol:()=>Bc,EtherscanPlugin:()=>Oo,EtherscanProvider:()=>Qn,EventFragment:()=>Qt,EventLog:()=>yr,EventPayload:()=>ar,FallbackFragment:()=>Un,FallbackProvider:()=>qn,FeeData:()=>Qr,FeeDataNetworkPlugin:()=>Ro,FetchCancelSignal:()=>hs,FetchRequest:()=>ce,FetchResponse:()=>vt,FetchUrlFeeDataNetworkPlugin:()=>_n,FixedNumber:()=>Sr,Fragment:()=>qt,FunctionFragment:()=>jt,GasCostPlugin:()=>$r,HDNodeVoidWallet:()=>ts,HDNodeWallet:()=>Pr,Indexed:()=>On,InfuraProvider:()=>rn,InfuraWebSocketProvider:()=>Gs,Interface:()=>gr,IpcSocketProvider:()=>Rl,JsonRpcApiProvider:()=>en,JsonRpcProvider:()=>Ae,JsonRpcSigner:()=>Xr,LangEn:()=>it,Log:()=>dt,LogDescription:()=>Bs,MaxInt256:()=>Cc,MaxUint256:()=>Tc,MessagePrefix:()=>mo,MinInt256:()=>vc,Mnemonic:()=>Yt,MulticoinProviderPlugin:()=>Ds,N:()=>Ic,NamedFragment:()=>mr,Network:()=>J,NetworkPlugin:()=>Wt,NonceManager:()=>Lo,ParamType:()=>Ie,PocketProvider:()=>_o,QuickNodeProvider:()=>jn,Result:()=>Bt,Signature:()=>Ce,SigningKey:()=>He,SocketBlockSubscriber:()=>Fs,SocketEventSubscriber:()=>Hs,SocketPendingSubscriber:()=>_s,SocketProvider:()=>Jn,SocketSubscriber:()=>tn,StructFragment:()=>Vr,Transaction:()=>ft,TransactionDescription:()=>Rs,TransactionReceipt:()=>br,TransactionResponse:()=>$t,Typed:()=>de,TypedDataEncoder:()=>mt,UndecodedEventLog:()=>Jr,UnmanagedSubscriber:()=>Vt,Utf8ErrorFuncs:()=>ai,VoidSigner:()=>Gn,Wallet:()=>Qo,WebSocketProvider:()=>Er,WeiPerEther:()=>Pc,Wordlist:()=>$n,WordlistOwl:()=>Nr,WordlistOwlA:()=>Jo,ZeroAddress:()=>Mt,ZeroHash:()=>As,accessListify:()=>Ge,assert:()=>g,assertArgument:()=>d,assertArgumentCount:()=>dn,assertNormalize:()=>hn,assertPrivate:()=>Fe,authorizationify:()=>vn,checkResultErrors:()=>xi,computeAddress:()=>_t,computeHmac:()=>Ut,concat:()=>M,copyRequest:()=>bt,dataLength:()=>nt,dataSlice:()=>re,decodeBase58:()=>oo,decodeBase64:()=>io,decodeBytes32String:()=>ll,decodeRlp:()=>cr,decryptCrowdsaleJson:()=>qs,decryptKeystoreJson:()=>zo,decryptKeystoreJsonSync:()=>Vo,defaultPath:()=>Js,defineProperties:()=>k,dnsEncode:()=>No,encodeBase58:()=>xn,encodeBase64:()=>ao,encodeBytes32String:()=>cl,encodeRlp:()=>je,encryptKeystoreJson:()=>es,encryptKeystoreJsonSync:()=>Xn,ensNormalize:()=>Xi,formatEther:()=>Ya,formatUnits:()=>fi,fromTwos:()=>or,getAccountPath:()=>Kl,getAddress:()=>D,getBigInt:()=>I,getBytes:()=>E,getBytesCopy:()=>ge,getCreate2Address:()=>Dc,getCreateAddress:()=>Pn,getDefaultProvider:()=>Bl,getIcapAddress:()=>Oc,getIndexedAccountPath:()=>Wl,getNumber:()=>U,getUint:()=>pn,hashAuthorization:()=>Ns,hashMessage:()=>Cs,hexlify:()=>A,id:()=>Ke,isAddress:()=>Mc,isAddressable:()=>Es,isBytesLike:()=>Pt,isCallException:()=>Rr,isCrowdsaleJson:()=>js,isError:()=>se,isHexString:()=>W,isKeystoreJson:()=>Qs,isValidName:()=>el,keccak256:()=>H,lock:()=>l0,makeError:()=>Q,mask:()=>ct,namehash:()=>Wr,parseEther:()=>Za,parseUnits:()=>di,pbkdf2:()=>Xe,randomBytes:()=>$e,recoverAddress:()=>Ht,resolveAddress:()=>be,resolveProperties:()=>pe,ripemd160:()=>Ot,scrypt:()=>Dt,scryptSync:()=>Lt,sha256:()=>ve,sha512:()=>wn,showThrottleMessage:()=>Ve,solidityPacked:()=>Io,solidityPackedKeccak256:()=>rl,solidityPackedSha256:()=>nl,stripZerosLeft:()=>Qa,toBeArray:()=>ee,toBeHex:()=>Le,toBigInt:()=>pt,toNumber:()=>so,toQuantity:()=>Ue,toTwos:()=>ir,toUtf8Bytes:()=>ae,toUtf8CodePoints:()=>ja,toUtf8String:()=>Ze,uuidV4:()=>lo,verifyAuthorization:()=>Kc,verifyMessage:()=>tl,verifyTypedData:()=>il,version:()=>us,wordlists:()=>Vl,zeroPadBytes:()=>sr,zeroPadValue:()=>Te});var us="6.16.0";function Np(n,e,t){let r=e.split("|").map(o=>o.trim());for(let o=0;o<r.length;o++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===e)return}let s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${t}`,s.value=n,s}async function pe(n){let e=Object.keys(n);return(await Promise.all(e.map(r=>Promise.resolve(n[r])))).reduce((r,s,o)=>(r[e[o]]=s,r),{})}function k(n,e,t){for(let r in e){let s=e[r],o=t?t[r]:null;o&&Np(s,o,r),Object.defineProperty(n,r,{enumerable:!0,value:s,writable:!1})}}function fs(n,e){if(n==null)return"null";if(e==null&&(e=new Set),typeof n=="object"){if(e.has(n))return"[Circular]";e.add(n)}if(Array.isArray(n))return"[ "+n.map(t=>fs(t,e)).join(", ")+" ]";if(n instanceof Uint8Array){let t="0123456789abcdef",r="0x";for(let s=0;s<n.length;s++)r+=t[n[s]>>4],r+=t[n[s]&15];return r}if(typeof n=="object"&&typeof n.toJSON=="function")return fs(n.toJSON(),e);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{let t=Object.keys(n);return t.sort(),"{ "+t.map(r=>`${fs(r,e)}: ${fs(n[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function se(n,e){return n&&n.code===e}function Rr(n){return se(n,"CALL_EXCEPTION")}function Q(n,e,t){let r=n;{let o=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${fs(t)}`);for(let i in t){if(i==="shortMessage")continue;let a=t[i];o.push(i+"="+fs(a))}}o.push(`code=${e}`),o.push(`version=${us}`),o.length&&(n+=" ("+o.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(n);break;default:s=new Error(n)}return k(s,{code:e}),t&&Object.assign(s,t),s.shortMessage==null&&k(s,{shortMessage:r}),s}function g(n,e,t,r){if(!n)throw Q(e,t,r)}function d(n,e,t,r){g(n,e,"INVALID_ARGUMENT",{argument:t,value:r})}function dn(n,e,t){t==null&&(t=""),t&&(t=": "+t),g(n>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:n,expectedCount:e}),g(n<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:e})}var Ip=["NFD","NFC","NFKD","NFKC"].reduce((n,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"\xE9".normalize("NFD")!=="e\u0301")throw new Error("broken");n.push(e)}catch{}return n},[]);function hn(n){g(Ip.indexOf(n)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:n}})}function Fe(n,e,t){if(t==null&&(t=""),n!==e){let r=t,s="new";t&&(r+=".",s+=" "+t),g(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function ku(n,e,t){if(n instanceof Uint8Array)return t?new Uint8Array(n):n;if(typeof n=="string"&&n.length%2===0&&n.match(/^0x[0-9a-f]*$/i)){let r=new Uint8Array((n.length-2)/2),s=2;for(let o=0;o<r.length;o++)r[o]=parseInt(n.substring(s,s+2),16),s+=2;return r}d(!1,"invalid BytesLike value",e||"value",n)}function E(n,e){return ku(n,e,!1)}function ge(n,e){return ku(n,e,!0)}function W(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&n.length!==2+2*e||e===!0&&n.length%2!==0)}function Pt(n){return W(n,!0)||n instanceof Uint8Array}var Eu="0123456789abcdef";function A(n){let e=E(n),t="0x";for(let r=0;r<e.length;r++){let s=e[r];t+=Eu[(s&240)>>4]+Eu[s&15]}return t}function M(n){return"0x"+n.map(e=>A(e).substring(2)).join("")}function nt(n){return W(n,!0)?(n.length-2)/2:E(n).length}function re(n,e,t){let r=E(n);return t!=null&&t>r.length&&g(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:t}),A(r.slice(e??0,t??r.length))}function Qa(n){let e=A(n).substring(2);for(;e.startsWith("00");)e=e.substring(2);return"0x"+e}function Nu(n,e,t){let r=E(n);g(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});let s=new Uint8Array(e);return s.fill(0),t?s.set(r,e-r.length):s.set(r,0),A(s)}function Te(n,e){return Nu(n,e,!0)}function sr(n,e){return Nu(n,e,!1)}var no=BigInt(0),Tt=BigInt(1),ds=9007199254740991;function or(n,e){let t=pn(n,"value"),r=BigInt(U(e,"width"));if(g(t>>r===no,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n}),t>>r-Tt){let s=(Tt<<r)-Tt;return-((~t&s)+Tt)}return t}function ir(n,e){let t=I(n,"value"),r=BigInt(U(e,"width")),s=Tt<<r-Tt;if(t<no){t=-t,g(t<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});let o=(Tt<<r)-Tt;return(~t&o)+Tt}else g(t<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return t}function ct(n,e){let t=pn(n,"value"),r=BigInt(U(e,"bits"));return t&(Tt<<r)-Tt}function I(n,e){switch(typeof n){case"bigint":return n;case"number":return d(Number.isInteger(n),"underflow",e||"value",n),d(n>=-ds&&n<=ds,"overflow",e||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(t){d(!1,`invalid BigNumberish string: ${t.message}`,e||"value",n)}}d(!1,"invalid BigNumberish value",e||"value",n)}function pn(n,e){let t=I(n,e);return g(t>=no,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),t}var Iu="0123456789abcdef";function pt(n){if(n instanceof Uint8Array){let e="0x0";for(let t of n)e+=Iu[t>>4],e+=Iu[t&15];return BigInt(e)}return I(n)}function U(n,e){switch(typeof n){case"bigint":return d(n>=-ds&&n<=ds,"overflow",e||"value",n),Number(n);case"number":return d(Number.isInteger(n),"underflow",e||"value",n),d(n>=-ds&&n<=ds,"overflow",e||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return U(BigInt(n),e)}catch(t){d(!1,`invalid numeric string: ${t.message}`,e||"value",n)}}d(!1,"invalid numeric value",e||"value",n)}function so(n){return U(pt(n))}function Le(n,e){let t=pn(n,"value"),r=t.toString(16);if(e==null)r.length%2&&(r="0"+r);else{let s=U(e,"width");if(s===0&&t===no)return"0x";for(g(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});r.length<s*2;)r="0"+r}return"0x"+r}function ee(n,e){let t=pn(n,"value");if(t===no){let o=e!=null?U(e,"width"):0;return new Uint8Array(o)}let r=t.toString(16);if(r.length%2&&(r="0"+r),e!=null){let o=U(e,"width");for(;r.length<o*2;)r="00"+r;g(o*2===r.length,`value exceeds width (${o} bytes)`,"NUMERIC_FAULT",{operation:"toBeArray",fault:"overflow",value:n})}let s=new Uint8Array(r.length/2);for(let o=0;o<s.length;o++){let i=o*2;s[o]=parseInt(r.substring(i,i+2),16)}return s}function Ue(n){let e=A(Pt(n)?n:ee(n)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}var ii="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",oi=null;function Pp(n){if(oi==null){oi={};for(let t=0;t<ii.length;t++)oi[ii[t]]=BigInt(t)}let e=oi[n];return d(e!=null,"invalid base58 value","letter",n),e}var Tp=BigInt(0),Ja=BigInt(58);function xn(n){let e=E(n),t=pt(e),r="";for(;t;)r=ii[Number(t%Ja)]+r,t/=Ja;for(let s=0;s<e.length&&!e[s];s++)r=ii[0]+r;return r}function oo(n){let e=Tp;for(let t=0;t<n.length;t++)e*=Ja,e+=Pp(n[t]);return e}function io(n){n=atob(n);let e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return E(e)}function ao(n){let e=E(n),t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}var ar=class{filter;emitter;#e;constructor(e,t,r){this.#e=t,k(this,{emitter:e,filter:r})}async removeListener(){this.#e!=null&&await this.emitter.off(this.filter,this.#e)}};function vp(n,e,t,r,s){d(!1,`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function Pu(n,e,t,r,s){if(n==="BAD_PREFIX"||n==="UNEXPECTED_CONTINUE"){let o=0;for(let i=e+1;i<t.length&&t[i]>>6===2;i++)o++;return o}return n==="OVERRUN"?t.length-e-1:0}function Cp(n,e,t,r,s){return n==="OVERLONG"?(d(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),Pu(n,e,t,r,s))}var ai=Object.freeze({error:vp,ignore:Pu,replace:Cp});function Tu(n,e){e==null&&(e=ai.error);let t=E(n,"bytes"),r=[],s=0;for(;s<t.length;){let o=t[s++];if(!(o>>7)){r.push(o);continue}let i=null,a=null;if((o&224)===192)i=1,a=127;else if((o&240)===224)i=2,a=2047;else if((o&248)===240)i=3,a=65535;else{(o&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,t,r):s+=e("BAD_PREFIX",s-1,t,r);continue}if(s-1+i>=t.length){s+=e("OVERRUN",s-1,t,r);continue}let c=o&(1<<8-i-1)-1;for(let l=0;l<i;l++){let u=t[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,t,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-i,t,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-i,t,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-i,t,r,c);continue}r.push(c)}}return r}function ae(n,e){d(typeof n=="string","invalid string value","str",n),e!=null&&(hn(e),n=n.normalize(e));let t=[];for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);if(s<128)t.push(s);else if(s<2048)t.push(s>>6|192),t.push(s&63|128);else if((s&64512)==55296){r++;let o=n.charCodeAt(r);d(r<n.length&&(o&64512)===56320,"invalid surrogate pair","str",n);let i=65536+((s&1023)<<10)+(o&1023);t.push(i>>18|240),t.push(i>>12&63|128),t.push(i>>6&63|128),t.push(i&63|128)}else t.push(s>>12|224),t.push(s>>6&63|128),t.push(s&63|128)}return new Uint8Array(t)}function Bp(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Ze(n,e){return Bp(Tu(n,e))}function ja(n,e){return Tu(ae(n,e))}function ci(n){async function e(t,r){g(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");let s=t.url.split(":")[0].toLowerCase();g(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),g(s==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let o=null,i=new AbortController,a=setTimeout(()=>{o=Q("request timeout","TIMEOUT"),i.abort()},t.timeout);r&&r.addListener(()=>{o=Q("request cancelled","CANCELLED"),i.abort()});let c=Object.assign({},n,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:i.signal}),l;try{l=await fetch(t.url,c)}catch(p){throw clearTimeout(a),o||p}clearTimeout(a);let u={};l.headers.forEach((p,b)=>{u[b.toLowerCase()]=p});let f=await l.arrayBuffer(),h=f==null?null:new Uint8Array(f);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}var Sw=ci({});var Rp=12,Sp=250,vu=ci(),Up=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Op=new RegExp("^ipfs://(ipfs/)?(.*)$","i"),qa=!1;async function Bu(n,e){try{let t=n.match(Up);if(!t)throw new Error("invalid data");return new vt(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?io(t[3]):Dp(t[3]))}catch{return new vt(599,"BAD REQUEST (invalid data: URI)",{},null,new ce(n))}}function Ru(n){async function e(t,r){try{let s=t.match(Op);if(!s)throw new Error("invalid link");return new ce(`${n}${s[2]}`)}catch{return new vt(599,"BAD REQUEST (invalid IPFS URI)",{},null,new ce(t))}}return e}var li={data:Bu,ipfs:Ru("https://gateway.ipfs.io/ipfs/")},Su=new WeakMap,hs=class{#e;#t;constructor(e){this.#e=[],this.#t=!1,Su.set(e,()=>{if(!this.#t){this.#t=!0;for(let t of this.#e)setTimeout(()=>{t()},0);this.#e=[]}})}addListener(e){g(!this.#t,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#e.push(e)}get cancelled(){return this.#t}checkSignal(){g(!this.cancelled,"cancelled","CANCELLED",{})}};function ui(n){if(n==null)throw new Error("missing signal; should not happen");return n.checkSignal(),n}var ce=class n{#e;#t;#r;#n;#s;#i;#o;#a;#f;#l;#p;#x;#c;#u;#d;get url(){return this.#i}set url(e){this.#i=String(e)}get body(){return this.#o==null?null:new Uint8Array(this.#o)}set body(e){if(e==null)this.#o=void 0,this.#a=void 0;else if(typeof e=="string")this.#o=ae(e),this.#a="text/plain";else if(e instanceof Uint8Array)this.#o=e,this.#a="application/octet-stream";else if(typeof e=="object")this.#o=ae(JSON.stringify(e)),this.#a="application/json";else throw new Error("invalid body")}hasBody(){return this.#o!=null}get method(){return this.#n?this.#n:this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),this.#n=String(e).toUpperCase()}get headers(){let e=Object.assign({},this.#r);return this.#f&&(e.authorization=`Basic ${ao(ae(this.#f))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&this.#a&&(e["content-type"]=this.#a),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#r[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#r={}}[Symbol.iterator](){let e=this.headers,t=Object.keys(e),r=0;return{next:()=>{if(r<t.length){let s=t[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#f||null}setCredentials(e,t){d(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#f=`${e}:${t}`}get allowGzip(){return this.#t}set allowGzip(e){this.#t=!!e}get allowInsecureAuthentication(){return!!this.#e}set allowInsecureAuthentication(e){this.#e=!!e}get timeout(){return this.#s}set timeout(e){d(e>=0,"timeout must be non-zero","timeout",e),this.#s=e}get preflightFunc(){return this.#l||null}set preflightFunc(e){this.#l=e}get processFunc(){return this.#p||null}set processFunc(e){this.#p=e}get retryFunc(){return this.#x||null}set retryFunc(e){this.#x=e}get getUrlFunc(){return this.#d||vu}set getUrlFunc(e){this.#d=e}constructor(e){this.#i=String(e),this.#e=!1,this.#t=!0,this.#r={},this.#n="",this.#s=3e5,this.#u={slotInterval:Sp,maxAttempts:Rp},this.#d=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#o?A(this.#o):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(this.#u.slotInterval=e.slotInterval),e.maxAttempts!=null&&(this.#u.maxAttempts=e.maxAttempts)}async#h(e,t,r,s,o){if(e>=this.#u.maxAttempts)return o.makeServerError("exceeded maximum retry limit");g(Cu()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await Lp(r);let i=this.clone(),a=(i.url.split(":")[0]||"").toLowerCase();if(a in li){let u=await li[a](i.url,ui(s.#c));if(u instanceof vt){let f=u;if(this.processFunc){ui(s.#c);try{f=await this.processFunc(i,f)}catch(h){(h.throttle==null||typeof h.stall!="number")&&f.makeServerError("error in post-processing function",h).assertOk()}}return f}i=u}this.preflightFunc&&(i=await this.preflightFunc(i));let c=await this.getUrlFunc(i,ui(s.#c)),l=new vt(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{let u=l.headers.location||"";return i.redirect(u).#h(e+1,t,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(i,l,e))){let u=l.headers["retry-after"],f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof u=="string"&&u.match(/^[1-9][0-9]*$/)&&(f=parseInt(u)),i.clone().#h(e+1,t,f,s,l)}if(this.processFunc){ui(s.#c);try{l=await this.processFunc(i,l)}catch(u){(u.throttle==null||typeof u.stall!="number")&&l.makeServerError("error in post-processing function",u).assertOk();let f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return u.stall>=0&&(f=u.stall),i.clone().#h(e+1,t,f,s,l)}}return l}send(){return g(this.#c==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#c=new hs(this),this.#h(0,Cu()+this.timeout,0,this,new vt(0,"",{},null,this))}cancel(){g(this.#c!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});let e=Su.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){let t=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();g(this.method==="GET"&&(t!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});let s=new n(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,s.#r=Object.assign({},this.#r),this.#o&&(s.#o=new Uint8Array(this.#o)),s.#a=this.#a,s}clone(){let e=new n(this.url);return e.#n=this.#n,this.#o&&(e.#o=this.#o),e.#a=this.#a,e.#r=Object.assign({},this.#r),e.#f=this.#f,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#l=this.#l,e.#p=this.#p,e.#x=this.#x,e.#u=Object.assign({},this.#u),e.#d=this.#d,e}static lockConfig(){qa=!0}static getGateway(e){return li[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(qa)throw new Error("gateways locked");li[e]=t}static registerGetUrl(e){if(qa)throw new Error("gateways locked");vu=e}static createGetUrlFunc(e){return ci(e)}static createDataGateway(){return Bu}static createIpfsGatewayFunc(e){return Ru(e)}},vt=class n{#e;#t;#r;#n;#s;#i;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#n?A(this.#n):"null"}>`}get statusCode(){return this.#e}get statusMessage(){return this.#t}get headers(){return Object.assign({},this.#r)}get body(){return this.#n==null?null:new Uint8Array(this.#n)}get bodyText(){try{return this.#n==null?"":Ze(this.#n)}catch{g(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{g(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){let e=this.headers,t=Object.keys(e),r=0;return{next:()=>{if(r<t.length){let s=t[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,r,s,o){this.#e=e,this.#t=t,this.#r=Object.keys(r).reduce((i,a)=>(i[a.toLowerCase()]=String(r[a]),i),{}),this.#n=s==null?null:new Uint8Array(s),this.#s=o||null,this.#i={message:""}}makeServerError(e,t){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);let s=new n(599,r,this.headers,this.body,this.#s||void 0);return s.#i={message:e,error:t},s}throwThrottleError(e,t){t==null?t=-1:d(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);let r=new Error(e||"throttling requests");throw k(r,{stall:t,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return this.#n!=null}get request(){return this.#s}ok(){return this.#i.message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=this.#i;e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{this.#n&&(s=Ze(this.#n))}catch{}g(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};function Cu(){return new Date().getTime()}function Dp(n){return ae(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function Lp(n){return new Promise(e=>setTimeout(e,n))}var Mp=BigInt(-1),Ct=BigInt(0),xs=BigInt(1),Fp=BigInt(5),ps={},ms="0000";for(;ms.length<80;)ms+=ms;function mn(n){let e=ms;for(;e.length<n;)e+=e;return BigInt("1"+e.substring(0,n))}function co(n,e,t){let r=BigInt(e.width);if(e.signed){let s=xs<<r-xs;g(t==null||n>=-s&&n<s,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n>Ct?n=or(ct(n,r),r):n=-or(ct(-n,r),r)}else{let s=xs<<r;g(t==null||n>=0&&n<s,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n=(n%s+s)%s&s-xs}return n}function $a(n){typeof n=="number"&&(n=`fixed128x${n}`);let e=!0,t=128,r=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")e=!1;else{let o=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);d(o,"invalid fixed format","format",n),e=o[1]!=="u",t=parseInt(o[2]),r=parseInt(o[3])}}else if(n){let o=n,i=(a,c,l)=>o[a]==null?l:(d(typeof o[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,o[a]),o[a]);e=i("signed","boolean",e),t=i("width","number",t),r=i("decimals","number",r)}d(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),d(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);let s=(e?"":"u")+"fixed"+String(t)+"x"+String(r);return{signed:e,width:t,decimals:r,name:s}}function _p(n,e){let t="";n<Ct&&(t="-",n*=Mp);let r=n.toString();if(e===0)return t+r;for(;r.length<=e;)r=ms+r;let s=r.length-e;for(r=r.substring(0,s)+"."+r.substring(s);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return t+r}var Sr=class n{format;#e;#t;#r;_value;constructor(e,t,r){Fe(e,ps,"FixedNumber"),this.#t=t,this.#e=r;let s=_p(t,r.decimals);k(this,{format:r.name,_value:s}),this.#r=mn(r.decimals)}get signed(){return this.#e.signed}get width(){return this.#e.width}get decimals(){return this.#e.decimals}get value(){return this.#t}#n(e){d(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#s(e,t){return e=co(e,this.#e,t),new n(ps,e,this.#e)}#i(e,t){return this.#n(e),this.#s(this.#t+e.#t,t)}addUnsafe(e){return this.#i(e)}add(e){return this.#i(e,"add")}#o(e,t){return this.#n(e),this.#s(this.#t-e.#t,t)}subUnsafe(e){return this.#o(e)}sub(e){return this.#o(e,"sub")}#a(e,t){return this.#n(e),this.#s(this.#t*e.#t/this.#r,t)}mulUnsafe(e){return this.#a(e)}mul(e){return this.#a(e,"mul")}mulSignal(e){this.#n(e);let t=this.#t*e.#t;return g(t%this.#r===Ct,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#s(t/this.#r,"mulSignal")}#f(e,t){return g(e.#t!==Ct,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#n(e),this.#s(this.#t*this.#r/e.#t,t)}divUnsafe(e){return this.#f(e)}div(e){return this.#f(e,"div")}divSignal(e){g(e.#t!==Ct,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#n(e);let t=this.#t*this.#r;return g(t%e.#t===Ct,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#s(t/e.#t,"divSignal")}cmp(e){let t=this.value,r=e.value,s=this.decimals-e.decimals;return s>0?r*=mn(s):s<0&&(t*=mn(-s)),t<r?-1:t>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#t;return this.#t<Ct&&(e-=this.#r-xs),e=this.#t/this.#r*this.#r,this.#s(e,"floor")}ceiling(){let e=this.#t;return this.#t>Ct&&(e+=this.#r-xs),e=this.#t/this.#r*this.#r,this.#s(e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;let t=this.decimals-e,r=Fp*mn(t-1),s=this.value+r,o=mn(t);return s=s/o*o,co(s,this.#e,"round"),new n(ps,s,this.#e)}isZero(){return this.#t===Ct}isNegative(){return this.#t<Ct}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return n.fromString(this.toString(),e)}static fromValue(e,t,r){let s=t==null?0:U(t),o=$a(r),i=I(e,"value"),a=s-o.decimals;if(a>0){let c=mn(a);g(i%c===Ct,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),i/=c}else a<0&&(i*=mn(-a));return co(i,o,"fromValue"),new n(ps,i,o)}static fromString(e,t){let r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);d(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);let s=$a(t),o=r[2]||"0",i=r[3]||"";for(;i.length<s.decimals;)i+=ms;g(i.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),i=i.substring(0,s.decimals);let a=BigInt(r[1]+o+i);return co(a,s,"fromString"),new n(ps,a,s)}static fromBytes(e,t){let r=pt(E(e,"value")),s=$a(t);return s.signed&&(r=or(r,s.width)),co(r,s,"fromBytes"),new n(ps,r,s)}};function Hp(n){let e=n.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Uu(n,e,t){let r=0;for(let s=0;s<t;s++)r=r*256+n[e+s];return r}function Ou(n,e,t,r){let s=[];for(;t<e+1+r;){let o=Du(n,t);s.push(o.result),t+=o.consumed,g(t<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:n,length:r,offset:e})}return{consumed:1+r,result:s}}function Du(n,e){g(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});let t=r=>{g(r<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r})};if(n[e]>=248){let r=n[e]-247;t(e+1+r);let s=Uu(n,e+1,r);return t(e+1+r+s),Ou(n,e,e+1+r,r+s)}else if(n[e]>=192){let r=n[e]-192;return t(e+1+r),Ou(n,e,e+1,r)}else if(n[e]>=184){let r=n[e]-183;t(e+1+r);let s=Uu(n,e+1,r);t(e+1+r+s);let o=A(n.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:o}}else if(n[e]>=128){let r=n[e]-128;t(e+1+r);let s=A(n.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:Hp(n[e])}}function cr(n){let e=E(n,"data"),t=Du(e,0);return d(t.consumed===e.length,"unexpected junk after rlp payload","data",n),t.result}function Lu(n){let e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function Fu(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(o){r=r.concat(Fu(o))}),r.length<=55)return r.unshift(192+r.length),r;let s=Lu(r.length);return s.unshift(247+s.length),s.concat(r)}let e=Array.prototype.slice.call(E(n,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;let t=Lu(e.length);return t.unshift(183+t.length),t.concat(e)}var Mu="0123456789abcdef";function je(n){let e="0x";for(let t of Fu(n))e+=Mu[t>>4],e+=Mu[t&15];return e}var _u=["wei","kwei","mwei","gwei","szabo","finney","ether"];function fi(n,e){let t=18;if(typeof e=="string"){let r=_u.indexOf(e);d(r>=0,"invalid unit","unit",e),t=3*r}else e!=null&&(t=U(e,"unit"));return Sr.fromValue(n,t,{decimals:t,width:512}).toString()}function di(n,e){d(typeof n=="string","value must be a string","value",n);let t=18;if(typeof e=="string"){let r=_u.indexOf(e);d(r>=0,"invalid unit","unit",e),t=3*r}else e!=null&&(t=U(e,"unit"));return Sr.fromString(n,{decimals:t,width:512}).value}function Ya(n){return fi(n,18)}function Za(n){return di(n,18)}function lo(n){let e=E(n,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;let t=A(e);return[t.substring(2,10),t.substring(10,14),t.substring(14,18),t.substring(18,22),t.substring(22,34)].join("-")}var _e=32,Xa=new Uint8Array(_e),Gp=["then"],hi={},Ku=new WeakMap;function gn(n){return Ku.get(n)}function Hu(n,e){Ku.set(n,e)}function uo(n,e){let t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);throw t.error=e,t}function ec(n,e,t){return n.indexOf(null)>=0?e.map((r,s)=>r instanceof Bt?ec(gn(r),r,t):r):n.reduce((r,s,o)=>{let i=e.getValue(s);return s in r||(t&&i instanceof Bt&&(i=ec(gn(i),i,t)),r[s]=i),r},{})}var Bt=class n extends Array{#e;constructor(...e){let t=e[0],r=e[1],s=(e[2]||[]).slice(),o=!0;t!==hi&&(r=e,s=[],o=!1),super(r.length),r.forEach((c,l)=>{this[l]=c});let i=s.reduce((c,l)=>(typeof l=="string"&&c.set(l,(c.get(l)||0)+1),c),new Map);if(Hu(this,Object.freeze(r.map((c,l)=>{let u=s[l];return u!=null&&i.get(u)===1?u:null}))),this.#e=[],this.#e==null&&this.#e,!o)return;Object.freeze(this);let a=new Proxy(this,{get:(c,l,u)=>{if(typeof l=="string"){if(l.match(/^[0-9]+$/)){let h=U(l,"%index");if(h<0||h>=this.length)throw new RangeError("out of result range");let p=c[h];return p instanceof Error&&uo(`index ${h}`,p),p}if(Gp.indexOf(l)>=0)return Reflect.get(c,l,u);let f=c[l];if(f instanceof Function)return function(...h){return f.apply(this===u?c:this,h)};if(!(l in c))return c.getValue.apply(this===u?c:this,[l])}return Reflect.get(c,l,u)}});return Hu(a,gn(this)),a}toArray(e){let t=[];return this.forEach((r,s)=>{r instanceof Error&&uo(`index ${s}`,r),e&&r instanceof n&&(r=r.toArray(e)),t.push(r)}),t}toObject(e){let t=gn(this);return t.reduce((r,s,o)=>(g(s!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),ec(t,this,e)),{})}slice(e,t){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),t==null&&(t=this.length),t<0&&(t+=this.length,t<0&&(t=0)),t>this.length&&(t=this.length);let r=gn(this),s=[],o=[];for(let i=e;i<t;i++)s.push(this[i]),o.push(r[i]);return new n(hi,s,o)}filter(e,t){let r=gn(this),s=[],o=[];for(let i=0;i<this.length;i++){let a=this[i];a instanceof Error&&uo(`index ${i}`,a),e.call(t,a,i,this)&&(s.push(a),o.push(r[i]))}return new n(hi,s,o)}map(e,t){let r=[];for(let s=0;s<this.length;s++){let o=this[s];o instanceof Error&&uo(`index ${s}`,o),r.push(e.call(t,o,s,this))}return r}getValue(e){let t=gn(this).indexOf(e);if(t===-1)return;let r=this[t];return r instanceof Error&&uo(`property ${JSON.stringify(e)}`,r.error),r}static fromItems(e,t){return new n(hi,e,t)}};function xi(n){let e=[],t=function(r,s){if(Array.isArray(s))for(let o in s){let i=r.slice();i.push(o);try{t(i,s[o])}catch(a){e.push({path:i,error:a})}}};return t([],n),e}function Gu(n){let e=ee(n);return g(e.length<=_e,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:_e,offset:e.length}),e.length!==_e&&(e=ge(M([Xa.slice(e.length%_e),e]))),e}var Re=class{name;type;localName;dynamic;constructor(e,t,r,s){k(this,{name:e,type:t,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){d(!1,e,this.localName,t)}},bn=class{#e;#t;constructor(){this.#e=[],this.#t=0}get data(){return M(this.#e)}get length(){return this.#t}#r(e){return this.#e.push(e),this.#t+=e.length,e.length}appendWriter(e){return this.#r(ge(e.data))}writeBytes(e){let t=ge(e),r=t.length%_e;return r&&(t=ge(M([t,Xa.slice(r)]))),this.#r(t)}writeValue(e){return this.#r(Gu(e))}writeUpdatableValue(){let e=this.#e.length;return this.#e.push(Xa),this.#t+=_e,t=>{this.#e[e]=Gu(t)}}},pi=class n{allowLoose;#e;#t;#r;#n;#s;constructor(e,t,r){k(this,{allowLoose:!!t}),this.#e=ge(e),this.#r=0,this.#n=null,this.#s=r??1024,this.#t=0}get data(){return A(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#t}get bytes(){return new Uint8Array(this.#e)}#i(e){if(this.#n)return this.#n.#i(e);this.#r+=e,g(this.#s<1||this.#r<=this.#s*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#s} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:ge(this.#e),offset:this.#t,length:e,info:{bytesRead:this.#r,dataLength:this.dataLength}})}#o(e,t,r){let s=Math.ceil(t/_e)*_e;return this.#t+s>this.#e.length&&(this.allowLoose&&r&&this.#t+t<=this.#e.length?s=t:g(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:ge(this.#e),length:this.#e.length,offset:this.#t+s})),this.#e.slice(this.#t,this.#t+s)}subReader(e){let t=new n(this.#e.slice(this.#t+e),this.allowLoose,this.#s);return t.#n=this,t}readBytes(e,t){let r=this.#o(0,e,!!t);return this.#i(e),this.#t+=r.length,r.slice(0,e)}readValue(){return pt(this.readBytes(_e))}readIndex(){return so(this.readBytes(_e))}};function qe(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function fo(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function mi(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");qe(n.outputLen),qe(n.blockLen)}function lr(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function gi(n,e){fo(n);let t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}var bi=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Wu=n=>n instanceof Uint8Array;var gs=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),bs=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Rt=(n,e)=>n<<32-e|n>>>e,Kp=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Kp)throw new Error("Non little-endian hardware is not supported");var Wp=async()=>{};async function yi(n,e,t){let r=Date.now();for(let s=0;s<n;s++){t(s);let o=Date.now()-r;o>=0&&o<e||(await Wp(),r+=o)}}function Vp(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function St(n){if(typeof n=="string"&&(n=Vp(n)),!Wu(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function Vu(...n){let e=new Uint8Array(n.reduce((r,s)=>r+s.length,0)),t=0;return n.forEach(r=>{if(!Wu(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}var Ur=class{clone(){return this._cloneInto()}},zp={}.toString;function wi(n,e){if(e!==void 0&&zp.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(n,e)}function Or(n){let e=r=>n().update(St(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function zu(n){let e=(r,s)=>n(s).update(St(r)).digest(),t=n({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}function Qu(n=32){if(bi&&typeof bi.getRandomValues=="function")return bi.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}var Ai=class extends Ur{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,mi(e);let r=St(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?e.create().update(r).digest():r);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(e){return lr(this),this.iHash.update(e),this}digestInto(e){lr(this),fo(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:s,destroyed:o,blockLen:i,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=o,e.blockLen=i,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},yn=(n,e,t)=>new Ai(n,e).update(t).digest();yn.create=(n,e)=>new Ai(n,e);function Qp(n,e,t,r){mi(n);let s=wi({dkLen:32,asyncTick:10},r),{c:o,dkLen:i,asyncTick:a}=s;if(qe(o),qe(i),qe(a),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");let c=St(e),l=St(t),u=new Uint8Array(i),f=yn.create(n,c),h=f._cloneInto().update(l);return{c:o,dkLen:i,asyncTick:a,DK:u,PRF:f,PRFSalt:h}}function Jp(n,e,t,r,s){return n.destroy(),e.destroy(),r&&r.destroy(),s.fill(0),t}function ho(n,e,t,r){let{c:s,dkLen:o,DK:i,PRF:a,PRFSalt:c}=Qp(n,e,t,r),l,u=new Uint8Array(4),f=bs(u),h=new Uint8Array(a.outputLen);for(let p=1,b=0;b<o;p++,b+=a.outputLen){let m=i.subarray(b,b+a.outputLen);f.setInt32(0,p,!1),(l=c._cloneInto(l)).update(u).digestInto(h),m.set(h.subarray(0,m.length));for(let y=1;y<s;y++){a._cloneInto(l).update(h).digestInto(h);for(let w=0;w<m.length;w++)m[w]^=h[w]}}return Jp(a,c,i,l,h)}function jp(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);let s=BigInt(32),o=BigInt(4294967295),i=Number(t>>s&o),a=Number(t&o),c=r?4:0,l=r?0:4;n.setUint32(e+c,i,r),n.setUint32(e+l,a,r)}var Dr=class extends Ur{constructor(e,t,r,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=bs(this.buffer)}update(e){lr(this);let{view:t,buffer:r,blockLen:s}=this;e=St(e);let o=e.length;for(let i=0;i<o;){let a=Math.min(s-this.pos,o-i);if(a===s){let c=bs(e);for(;s<=o-i;i+=s)this.process(c,i);continue}r.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){lr(this),gi(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:s,isLE:o}=this,{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>s-i&&(this.process(r,0),i=0);for(let f=i;f<s;f++)t[f]=0;jp(r,s-8,BigInt(this.length*8),o),this.process(r,0);let a=bs(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)a.setUint32(4*f,u[f],o)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:s,finished:o,destroyed:i,pos:a}=this;return e.length=s,e.pos=a,e.finished=o,e.destroyed=i,s%t&&e.buffer.set(r),e}};var qp=(n,e,t)=>n&e^~n&t,$p=(n,e,t)=>n&e^n&t^e&t,Yp=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Lr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Mr=new Uint32Array(64),tc=class extends Dr{constructor(){super(64,32,8,!1),this.A=Lr[0]|0,this.B=Lr[1]|0,this.C=Lr[2]|0,this.D=Lr[3]|0,this.E=Lr[4]|0,this.F=Lr[5]|0,this.G=Lr[6]|0,this.H=Lr[7]|0}get(){let{A:e,B:t,C:r,D:s,E:o,F:i,G:a,H:c}=this;return[e,t,r,s,o,i,a,c]}set(e,t,r,s,o,i,a,c){this.A=e|0,this.B=t|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=a|0,this.H=c|0}process(e,t){for(let f=0;f<16;f++,t+=4)Mr[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){let h=Mr[f-15],p=Mr[f-2],b=Rt(h,7)^Rt(h,18)^h>>>3,m=Rt(p,17)^Rt(p,19)^p>>>10;Mr[f]=m+Mr[f-7]+b+Mr[f-16]|0}let{A:r,B:s,C:o,D:i,E:a,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){let h=Rt(a,6)^Rt(a,11)^Rt(a,25),p=u+h+qp(a,c,l)+Yp[f]+Mr[f]|0,m=(Rt(r,2)^Rt(r,13)^Rt(r,22))+$p(r,s,o)|0;u=l,l=c,c=a,a=i+p|0,i=o,o=s,s=r,r=p+m|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,o,i,a,c,l,u)}roundClean(){Mr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var ur=Or(()=>new tc);var Ei=BigInt(4294967295),rc=BigInt(32);function Ju(n,e=!1){return e?{h:Number(n&Ei),l:Number(n>>rc&Ei)}:{h:Number(n>>rc&Ei)|0,l:Number(n&Ei)|0}}function nc(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){let{h:o,l:i}=Ju(n[s],e);[t[s],r[s]]=[o,i]}return[t,r]}var Zp=(n,e)=>BigInt(n>>>0)<<rc|BigInt(e>>>0),Xp=(n,e,t)=>n>>>t,ex=(n,e,t)=>n<<32-t|e>>>t,tx=(n,e,t)=>n>>>t|e<<32-t,rx=(n,e,t)=>n<<32-t|e>>>t,nx=(n,e,t)=>n<<64-t|e>>>t-32,sx=(n,e,t)=>n>>>t-32|e<<64-t,ox=(n,e)=>e,ix=(n,e)=>n,sc=(n,e,t)=>n<<t|e>>>32-t,oc=(n,e,t)=>e<<t|n>>>32-t,ic=(n,e,t)=>e<<t-32|n>>>64-t,ac=(n,e,t)=>n<<t-32|e>>>64-t;function ax(n,e,t,r){let s=(e>>>0)+(r>>>0);return{h:n+t+(s/2**32|0)|0,l:s|0}}var cx=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),lx=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,ux=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),fx=(n,e,t,r,s)=>e+t+r+s+(n/2**32|0)|0,dx=(n,e,t,r,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0),hx=(n,e,t,r,s,o)=>e+t+r+s+o+(n/2**32|0)|0;var px={fromBig:Ju,split:nc,toBig:Zp,shrSH:Xp,shrSL:ex,rotrSH:tx,rotrSL:rx,rotrBH:nx,rotrBL:sx,rotr32H:ox,rotr32L:ix,rotlSH:sc,rotlSL:oc,rotlBH:ic,rotlBL:ac,add:ax,add3L:cx,add3H:lx,add4L:ux,add4H:fx,add5H:hx,add5L:dx},V=px;var[xx,mx]=V.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Fr=new Uint32Array(80),_r=new Uint32Array(80),cc=class extends Dr{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:r,Bl:s,Ch:o,Cl:i,Dh:a,Dl:c,Eh:l,El:u,Fh:f,Fl:h,Gh:p,Gl:b,Hh:m,Hl:y}=this;return[e,t,r,s,o,i,a,c,l,u,f,h,p,b,m,y]}set(e,t,r,s,o,i,a,c,l,u,f,h,p,b,m,y){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=s|0,this.Ch=o|0,this.Cl=i|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=f|0,this.Fl=h|0,this.Gh=p|0,this.Gl=b|0,this.Hh=m|0,this.Hl=y|0}process(e,t){for(let N=0;N<16;N++,t+=4)Fr[N]=e.getUint32(t),_r[N]=e.getUint32(t+=4);for(let N=16;N<80;N++){let L=Fr[N-15]|0,T=_r[N-15]|0,C=V.rotrSH(L,T,1)^V.rotrSH(L,T,8)^V.shrSH(L,T,7),S=V.rotrSL(L,T,1)^V.rotrSL(L,T,8)^V.shrSL(L,T,7),R=Fr[N-2]|0,z=_r[N-2]|0,G=V.rotrSH(R,z,19)^V.rotrBH(R,z,61)^V.shrSH(R,z,6),K=V.rotrSL(R,z,19)^V.rotrBL(R,z,61)^V.shrSL(R,z,6),xe=V.add4L(S,K,_r[N-7],_r[N-16]),we=V.add4H(xe,C,G,Fr[N-7],Fr[N-16]);Fr[N]=we|0,_r[N]=xe|0}let{Ah:r,Al:s,Bh:o,Bl:i,Ch:a,Cl:c,Dh:l,Dl:u,Eh:f,El:h,Fh:p,Fl:b,Gh:m,Gl:y,Hh:w,Hl:P}=this;for(let N=0;N<80;N++){let L=V.rotrSH(f,h,14)^V.rotrSH(f,h,18)^V.rotrBH(f,h,41),T=V.rotrSL(f,h,14)^V.rotrSL(f,h,18)^V.rotrBL(f,h,41),C=f&p^~f&m,S=h&b^~h&y,R=V.add5L(P,T,S,mx[N],_r[N]),z=V.add5H(R,w,L,C,xx[N],Fr[N]),G=R|0,K=V.rotrSH(r,s,28)^V.rotrBH(r,s,34)^V.rotrBH(r,s,39),xe=V.rotrSL(r,s,28)^V.rotrBL(r,s,34)^V.rotrBL(r,s,39),we=r&o^r&a^o&a,De=s&i^s&c^i&c;w=m|0,P=y|0,m=p|0,y=b|0,p=f|0,b=h|0,{h:f,l:h}=V.add(l|0,u|0,z|0,G|0),l=a|0,u=c|0,a=o|0,c=i|0,o=r|0,i=s|0;let v=V.add3L(G,xe,De);r=V.add3H(v,z,K,we),s=v|0}({h:r,l:s}=V.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:o,l:i}=V.add(this.Bh|0,this.Bl|0,o|0,i|0),{h:a,l:c}=V.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=V.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:f,l:h}=V.add(this.Eh|0,this.El|0,f|0,h|0),{h:p,l:b}=V.add(this.Fh|0,this.Fl|0,p|0,b|0),{h:m,l:y}=V.add(this.Gh|0,this.Gl|0,m|0,y|0),{h:w,l:P}=V.add(this.Hh|0,this.Hl|0,w|0,P|0),this.set(r,s,o,i,a,c,l,u,f,h,p,b,m,y,w,P)}roundClean(){Fr.fill(0),_r.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var ki=Or(()=>new cc);function gx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}var ju=gx(),qu=ju.crypto||ju.msCrypto;function lc(n){switch(n){case"sha256":return ur.create();case"sha512":return ki.create()}d(!1,"invalid hashing algorithm name","algorithm",n)}function $u(n,e){let t={sha256:ur,sha512:ki}[n];return d(t!=null,"invalid hmac algorithm","algorithm",n),yn.create(t,e)}function Yu(n,e,t,r,s){let o={sha256:ur,sha512:ki}[s];return d(o!=null,"invalid pbkdf2 algorithm","algorithm",s),ho(o,n,e,{c:t,dkLen:r})}function Zu(n){g(qu!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),d(Number.isInteger(n)&&n>0&&n<=1024,"invalid length","length",n);let e=new Uint8Array(n);return qu.getRandomValues(e),e}var Xu=!1,ef=function(n,e,t){return $u(n,e).update(t).digest()},tf=ef;function Ut(n,e,t){let r=E(e,"key"),s=E(t,"data");return A(tf(n,r,s))}Ut._=ef;Ut.lock=function(){Xu=!0};Ut.register=function(n){if(Xu)throw new Error("computeHmac is locked");tf=n};Object.freeze(Ut);var[sf,of,af]=[[],[],[]],bx=BigInt(0),po=BigInt(1),yx=BigInt(2),wx=BigInt(7),Ax=BigInt(256),Ex=BigInt(113);for(let n=0,e=po,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],sf.push(2*(5*r+t)),of.push((n+1)*(n+2)/2%64);let s=bx;for(let o=0;o<7;o++)e=(e<<po^(e>>wx)*Ex)%Ax,e&yx&&(s^=po<<(po<<BigInt(o))-po);af.push(s)}var[kx,Nx]=nc(af,!0),rf=(n,e,t)=>t>32?ic(n,e,t):sc(n,e,t),nf=(n,e,t)=>t>32?ac(n,e,t):oc(n,e,t);function Ix(n,e=24){let t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let i=0;i<10;i++)t[i]=n[i]^n[i+10]^n[i+20]^n[i+30]^n[i+40];for(let i=0;i<10;i+=2){let a=(i+8)%10,c=(i+2)%10,l=t[c],u=t[c+1],f=rf(l,u,1)^t[a],h=nf(l,u,1)^t[a+1];for(let p=0;p<50;p+=10)n[i+p]^=f,n[i+p+1]^=h}let s=n[2],o=n[3];for(let i=0;i<24;i++){let a=of[i],c=rf(s,o,a),l=nf(s,o,a),u=sf[i];s=n[u],o=n[u+1],n[u]=c,n[u+1]=l}for(let i=0;i<50;i+=10){for(let a=0;a<10;a++)t[a]=n[i+a];for(let a=0;a<10;a++)n[i+a]^=~t[(a+2)%10]&t[(a+4)%10]}n[0]^=kx[r],n[1]^=Nx[r]}t.fill(0)}var Ni=class n extends Ur{constructor(e,t,r,s=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,qe(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=gs(this.state)}keccak(){Ix(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){lr(this);let{blockLen:t,state:r}=this;e=St(e);let s=e.length;for(let o=0;o<s;){let i=Math.min(t-this.pos,s-o);for(let a=0;a<i;a++)r[this.pos++]^=e[o++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:s}=this;e[r]^=t,t&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){lr(this,!1),fo(e),this.finish();let t=this.state,{blockLen:r}=this;for(let s=0,o=e.length;s<o;){this.posOut>=r&&this.keccak();let i=Math.min(r-this.posOut,o-s);e.set(t.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return qe(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(gi(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:s,rounds:o,enableXOF:i}=this;return e||(e=new n(t,r,s,i,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=r,e.outputLen=s,e.enableXOF=i,e.destroyed=this.destroyed,e}},Hr=(n,e,t)=>Or(()=>new Ni(e,n,t)),t3=Hr(6,144,224/8),r3=Hr(6,136,256/8),n3=Hr(6,104,384/8),s3=Hr(6,72,512/8),o3=Hr(1,144,224/8),cf=Hr(1,136,256/8),i3=Hr(1,104,384/8),a3=Hr(1,72,512/8),lf=(n,e,t)=>zu((r={})=>new Ni(e,n,r.dkLen===void 0?t:r.dkLen,!0)),c3=lf(31,168,128/8),l3=lf(31,136,256/8);var uf=!1,ff=function(n){return cf(n)},df=ff;function H(n){let e=E(n,"data");return A(df(e))}H._=ff;H.lock=function(){uf=!0};H.register=function(n){if(uf)throw new TypeError("keccak256 is locked");df=n};Object.freeze(H);var Px=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),pf=Uint8Array.from({length:16},(n,e)=>e),Tx=pf.map(n=>(9*n+5)%16),fc=[pf],dc=[Tx];for(let n=0;n<4;n++)for(let e of[fc,dc])e.push(e[n].map(t=>Px[t]));var xf=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(n=>new Uint8Array(n)),vx=fc.map((n,e)=>n.map(t=>xf[e][t])),Cx=dc.map((n,e)=>n.map(t=>xf[e][t])),Bx=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Rx=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Ii=(n,e)=>n<<e|n>>>32-e;function hf(n,e,t,r){return n===0?e^t^r:n===1?e&t|~e&r:n===2?(e|~t)^r:n===3?e&r|t&~r:e^(t|~r)}var Pi=new Uint32Array(16),uc=class extends Dr{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:e,h1:t,h2:r,h3:s,h4:o}=this;return[e,t,r,s,o]}set(e,t,r,s,o){this.h0=e|0,this.h1=t|0,this.h2=r|0,this.h3=s|0,this.h4=o|0}process(e,t){for(let p=0;p<16;p++,t+=4)Pi[p]=e.getUint32(t,!0);let r=this.h0|0,s=r,o=this.h1|0,i=o,a=this.h2|0,c=a,l=this.h3|0,u=l,f=this.h4|0,h=f;for(let p=0;p<5;p++){let b=4-p,m=Bx[p],y=Rx[p],w=fc[p],P=dc[p],N=vx[p],L=Cx[p];for(let T=0;T<16;T++){let C=Ii(r+hf(p,o,a,l)+Pi[w[T]]+m,N[T])+f|0;r=f,f=l,l=Ii(a,10)|0,a=o,o=C}for(let T=0;T<16;T++){let C=Ii(s+hf(b,i,c,u)+Pi[P[T]]+y,L[T])+h|0;s=h,h=u,u=Ii(c,10)|0,c=i,i=C}}this.set(this.h1+a+u|0,this.h2+l+h|0,this.h3+f+s|0,this.h4+r+i|0,this.h0+o+c|0)}roundClean(){Pi.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}},mf=Or(()=>new uc);var gf=!1,bf=function(n){return mf(n)},yf=bf;function Ot(n){let e=E(n,"data");return A(yf(e))}Ot._=bf;Ot.lock=function(){gf=!0};Ot.register=function(n){if(gf)throw new TypeError("ripemd160 is locked");yf=n};Object.freeze(Ot);var wf=!1,Af=function(n,e,t,r,s){return Yu(n,e,t,r,s)},Ef=Af;function Xe(n,e,t,r,s){let o=E(n,"password"),i=E(e,"salt");return A(Ef(o,i,t,r,s))}Xe._=Af;Xe.lock=function(){wf=!0};Xe.register=function(n){if(wf)throw new Error("pbkdf2 is locked");Ef=n};Object.freeze(Xe);var kf=!1,Nf=function(n){return new Uint8Array(Zu(n))},If=Nf;function $e(n){return If(n)}$e._=Nf;$e.lock=function(){kf=!0};$e.register=function(n){if(kf)throw new Error("randomBytes is locked");If=n};Object.freeze($e);var oe=(n,e)=>n<<e|n>>>32-e;function Pf(n,e,t,r,s,o){let i=n[e++]^t[r++],a=n[e++]^t[r++],c=n[e++]^t[r++],l=n[e++]^t[r++],u=n[e++]^t[r++],f=n[e++]^t[r++],h=n[e++]^t[r++],p=n[e++]^t[r++],b=n[e++]^t[r++],m=n[e++]^t[r++],y=n[e++]^t[r++],w=n[e++]^t[r++],P=n[e++]^t[r++],N=n[e++]^t[r++],L=n[e++]^t[r++],T=n[e++]^t[r++],C=i,S=a,R=c,z=l,G=u,K=f,xe=h,we=p,De=b,v=m,B=y,_=w,te=P,q=N,me=L,Pe=T;for(let Je=0;Je<8;Je+=2)G^=oe(C+te|0,7),De^=oe(G+C|0,9),te^=oe(De+G|0,13),C^=oe(te+De|0,18),v^=oe(K+S|0,7),q^=oe(v+K|0,9),S^=oe(q+v|0,13),K^=oe(S+q|0,18),me^=oe(B+xe|0,7),R^=oe(me+B|0,9),xe^=oe(R+me|0,13),B^=oe(xe+R|0,18),z^=oe(Pe+_|0,7),we^=oe(z+Pe|0,9),_^=oe(we+z|0,13),Pe^=oe(_+we|0,18),S^=oe(C+z|0,7),R^=oe(S+C|0,9),z^=oe(R+S|0,13),C^=oe(z+R|0,18),xe^=oe(K+G|0,7),we^=oe(xe+K|0,9),G^=oe(we+xe|0,13),K^=oe(G+we|0,18),_^=oe(B+v|0,7),De^=oe(_+B|0,9),v^=oe(De+_|0,13),B^=oe(v+De|0,18),te^=oe(Pe+me|0,7),q^=oe(te+Pe|0,9),me^=oe(q+te|0,13),Pe^=oe(me+q|0,18);s[o++]=i+C|0,s[o++]=a+S|0,s[o++]=c+R|0,s[o++]=l+z|0,s[o++]=u+G|0,s[o++]=f+K|0,s[o++]=h+xe|0,s[o++]=p+we|0,s[o++]=b+De|0,s[o++]=m+v|0,s[o++]=y+B|0,s[o++]=w+_|0,s[o++]=P+te|0,s[o++]=N+q|0,s[o++]=L+me|0,s[o++]=T+Pe|0}function ys(n,e,t,r,s){let o=r+0,i=r+16*s;for(let a=0;a<16;a++)t[i+a]=n[e+(2*s-1)*16+a];for(let a=0;a<s;a++,o+=16,e+=16)Pf(t,i,n,e,t,o),a>0&&(i+=16),Pf(t,o,n,e+=16,t,i)}function Tf(n,e,t){let r=wi({dkLen:32,asyncTick:10,maxmem:1073742848},t),{N:s,r:o,p:i,dkLen:a,asyncTick:c,maxmem:l,onProgress:u}=r;if(qe(s),qe(o),qe(i),qe(a),qe(c),qe(l),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");let f=128*o,h=f/4;if(s<=1||s&s-1||s>=2**(f/8)||s>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(i<0||i>(2**32-1)*32/f)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");let p=f*(s+i);if(p>l)throw new Error(`Scrypt: parameters too large, ${p} (128 * r * (N + p)) > ${l} (maxmem)`);let b=ho(ur,n,e,{c:1,dkLen:f*i}),m=gs(b),y=gs(new Uint8Array(f*s)),w=gs(new Uint8Array(f)),P=()=>{};if(u){let N=2*s*i,L=Math.max(Math.floor(N/1e4),1),T=0;P=()=>{T++,u&&(!(T%L)||T===N)&&u(T/N)}}return{N:s,r:o,p:i,dkLen:a,blockSize32:h,V:y,B32:m,B:b,tmp:w,blockMixCb:P,asyncTick:c}}function vf(n,e,t,r,s){let o=ho(ur,n,t,{c:1,dkLen:e});return t.fill(0),r.fill(0),s.fill(0),o}function Cf(n,e,t){let{N:r,r:s,p:o,dkLen:i,blockSize32:a,V:c,B32:l,B:u,tmp:f,blockMixCb:h}=Tf(n,e,t);for(let p=0;p<o;p++){let b=a*p;for(let m=0;m<a;m++)c[m]=l[b+m];for(let m=0,y=0;m<r-1;m++)ys(c,y,c,y+=a,s),h();ys(c,(r-1)*a,l,b,s),h();for(let m=0;m<r;m++){let y=l[b+a-16]%r;for(let w=0;w<a;w++)f[w]=l[b+w]^c[y*a+w];ys(f,0,l,b,s),h()}}return vf(n,i,u,c,f)}async function Bf(n,e,t){let{N:r,r:s,p:o,dkLen:i,blockSize32:a,V:c,B32:l,B:u,tmp:f,blockMixCb:h,asyncTick:p}=Tf(n,e,t);for(let b=0;b<o;b++){let m=a*b;for(let w=0;w<a;w++)c[w]=l[m+w];let y=0;await yi(r-1,p,()=>{ys(c,y,c,y+=a,s),h()}),ys(c,(r-1)*a,l,m,s),h(),await yi(r,p,()=>{let w=l[m+a-16]%r;for(let P=0;P<a;P++)f[P]=l[m+P]^c[w*a+P];ys(f,0,l,m,s),h()})}return vf(n,i,u,c,f)}var Rf=!1,Sf=!1,Uf=async function(n,e,t,r,s,o,i){return await Bf(n,e,{N:t,r,p:s,dkLen:o,onProgress:i})},Of=function(n,e,t,r,s,o){return Cf(n,e,{N:t,r,p:s,dkLen:o})},Df=Uf,Lf=Of;async function Dt(n,e,t,r,s,o,i){let a=E(n,"passwd"),c=E(e,"salt");return A(await Df(a,c,t,r,s,o,i))}Dt._=Uf;Dt.lock=function(){Sf=!0};Dt.register=function(n){if(Sf)throw new Error("scrypt is locked");Df=n};Object.freeze(Dt);function Lt(n,e,t,r,s,o){let i=E(n,"passwd"),a=E(e,"salt");return A(Lf(i,a,t,r,s,o))}Lt._=Of;Lt.lock=function(){Rf=!0};Lt.register=function(n){if(Rf)throw new Error("scryptSync is locked");Lf=n};Object.freeze(Lt);var Mf=function(n){return lc("sha256").update(n).digest()},Ff=function(n){return lc("sha512").update(n).digest()},_f=Mf,Hf=Ff,Gf=!1,Kf=!1;function ve(n){let e=E(n,"data");return A(_f(e))}ve._=Mf;ve.lock=function(){Gf=!0};ve.register=function(n){if(Gf)throw new Error("sha256 is locked");_f=n};Object.freeze(ve);function wn(n){let e=E(n,"data");return A(Hf(e))}wn._=Ff;wn.lock=function(){Kf=!0};wn.register=function(n){if(Kf)throw new Error("sha512 is locked");Hf=n};Object.freeze(ve);var mc={};Au(mc,{bitGet:()=>Fx,bitLen:()=>Mx,bitMask:()=>xo,bitSet:()=>_x,bytesToHex:()=>An,bytesToNumberBE:()=>fr,bytesToNumberLE:()=>Ci,concatBytes:()=>ws,createHmacDrbg:()=>xc,ensureBytes:()=>lt,equalBytes:()=>Dx,hexToBytes:()=>En,hexToNumber:()=>pc,numberToBytesBE:()=>Gr,numberToBytesLE:()=>Bi,numberToHexUnpadded:()=>zf,numberToVarBytesBE:()=>Ox,utf8ToBytes:()=>Lx,validateObject:()=>Kr});var Vf=BigInt(0),Ti=BigInt(1),Sx=BigInt(2),vi=n=>n instanceof Uint8Array,Ux=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function An(n){if(!vi(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=Ux[n[t]];return e}function zf(n){let e=n.toString(16);return e.length&1?`0${e}`:e}function pc(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function En(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);let e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let t=new Uint8Array(e/2);for(let r=0;r<t.length;r++){let s=r*2,o=n.slice(s,s+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[r]=i}return t}function fr(n){return pc(An(n))}function Ci(n){if(!vi(n))throw new Error("Uint8Array expected");return pc(An(Uint8Array.from(n).reverse()))}function Gr(n,e){return En(n.toString(16).padStart(e*2,"0"))}function Bi(n,e){return Gr(n,e).reverse()}function Ox(n){return En(zf(n))}function lt(n,e,t){let r;if(typeof e=="string")try{r=En(e)}catch(o){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${o}`)}else if(vi(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);let s=r.length;if(typeof t=="number"&&s!==t)throw new Error(`${n} expected ${t} bytes, got ${s}`);return r}function ws(...n){let e=new Uint8Array(n.reduce((r,s)=>r+s.length,0)),t=0;return n.forEach(r=>{if(!vi(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}function Dx(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function Lx(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Mx(n){let e;for(e=0;n>Vf;n>>=Ti,e+=1);return e}function Fx(n,e){return n>>BigInt(e)&Ti}var _x=(n,e,t)=>n|(t?Ti:Vf)<<BigInt(e),xo=n=>(Sx<<BigInt(n-1))-Ti,hc=n=>new Uint8Array(n),Wf=n=>Uint8Array.from(n);function xc(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=hc(n),s=hc(n),o=0,i=()=>{r.fill(1),s.fill(0),o=0},a=(...f)=>t(s,r,...f),c=(f=hc())=>{s=a(Wf([0]),f),r=a(),f.length!==0&&(s=a(Wf([1]),f),r=a())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let f=0,h=[];for(;f<e;){r=a();let p=r.slice();h.push(p),f+=r.length}return ws(...h)};return(f,h)=>{i(),c(f);let p;for(;!(p=h(l()));)c();return i(),p}}var Hx={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Kr(n,e,t={}){let r=(s,o,i)=>{let a=Hx[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);let c=n[s];if(!(i&&c===void 0)&&!a(c,n))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${o}`)};for(let[s,o]of Object.entries(e))r(s,o,!1);for(let[s,o]of Object.entries(t))r(s,o,!0);return n}var Oe=BigInt(0),Ne=BigInt(1),kn=BigInt(2),Gx=BigInt(3),gc=BigInt(4),Qf=BigInt(5),Jf=BigInt(8),Kx=BigInt(9),Wx=BigInt(16);function Ye(n,e){let t=n%e;return t>=Oe?t:e+t}function Vx(n,e,t){if(t<=Oe||e<Oe)throw new Error("Expected power/modulo > 0");if(t===Ne)return Oe;let r=Ne;for(;e>Oe;)e&Ne&&(r=r*n%t),n=n*n%t,e>>=Ne;return r}function ut(n,e,t){let r=n;for(;e-- >Oe;)r*=r,r%=t;return r}function Ri(n,e){if(n===Oe||e<=Oe)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=Ye(n,e),r=e,s=Oe,o=Ne,i=Ne,a=Oe;for(;t!==Oe;){let l=r/t,u=r%t,f=s-i*l,h=o-a*l;r=t,t=u,s=i,o=a,i=f,a=h}if(r!==Ne)throw new Error("invert: does not exist");return Ye(s,e)}function zx(n){let e=(n-Ne)/kn,t,r,s;for(t=n-Ne,r=0;t%kn===Oe;t/=kn,r++);for(s=kn;s<n&&Vx(s,e,n)!==n-Ne;s++);if(r===1){let i=(n+Ne)/gc;return function(c,l){let u=c.pow(l,i);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}let o=(t+Ne)/kn;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),t),f=a.pow(c,o),h=a.pow(c,t);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let p=1;for(let m=a.sqr(h);p<l&&!a.eql(m,a.ONE);p++)m=a.sqr(m);let b=a.pow(u,Ne<<BigInt(l-p-1));u=a.sqr(b),f=a.mul(f,b),h=a.mul(h,u),l=p}return f}}function Qx(n){if(n%gc===Gx){let e=(n+Ne)/gc;return function(r,s){let o=r.pow(s,e);if(!r.eql(r.sqr(o),s))throw new Error("Cannot find square root");return o}}if(n%Jf===Qf){let e=(n-Qf)/Jf;return function(r,s){let o=r.mul(s,kn),i=r.pow(o,e),a=r.mul(s,i),c=r.mul(r.mul(a,kn),i),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return n%Wx,zx(n)}var Jx=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function bc(n){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=Jx.reduce((r,s)=>(r[s]="function",r),e);return Kr(n,t)}function jx(n,e,t){if(t<Oe)throw new Error("Expected power > 0");if(t===Oe)return n.ONE;if(t===Ne)return e;let r=n.ONE,s=e;for(;t>Oe;)t&Ne&&(r=n.mul(r,s)),s=n.sqr(s),t>>=Ne;return r}function qx(n,e){let t=new Array(e.length),r=e.reduce((o,i,a)=>n.is0(i)?o:(t[a]=o,n.mul(o,i)),n.ONE),s=n.inv(r);return e.reduceRight((o,i,a)=>n.is0(i)?o:(t[a]=n.mul(o,t[a]),n.mul(o,i)),s),t}function yc(n,e){let t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function jf(n,e,t=!1,r={}){if(n<=Oe)throw new Error(`Expected Field ORDER > 0, got ${n}`);let{nBitLength:s,nByteLength:o}=yc(n,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let i=Qx(n),a=Object.freeze({ORDER:n,BITS:s,BYTES:o,MASK:xo(s),ZERO:Oe,ONE:Ne,create:c=>Ye(c,n),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Oe<=c&&c<n},is0:c=>c===Oe,isOdd:c=>(c&Ne)===Ne,neg:c=>Ye(-c,n),eql:(c,l)=>c===l,sqr:c=>Ye(c*c,n),add:(c,l)=>Ye(c+l,n),sub:(c,l)=>Ye(c-l,n),mul:(c,l)=>Ye(c*l,n),pow:(c,l)=>jx(a,c,l),div:(c,l)=>Ye(c*Ri(l,n),n),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Ri(c,n),sqrt:r.sqrt||(c=>i(a,c)),invertBatch:c=>qx(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>t?Bi(c,o):Gr(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return t?Ci(c):fr(c)}});return Object.freeze(a)}function qf(n){if(typeof n!="bigint")throw new Error("field order must be bigint");let e=n.toString(2).length;return Math.ceil(e/8)}function wc(n){let e=qf(n);return e+Math.ceil(e/2)}function $f(n,e,t=!1){let r=n.length,s=qf(e),o=wc(e);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);let i=t?fr(n):Ci(n),a=Ye(i,e-Ne)+Ne;return t?Bi(a,s):Gr(a,s)}var Yx=BigInt(0),Ac=BigInt(1);function Yf(n,e){let t=(s,o)=>{let i=o.negate();return s?i:o},r=s=>{let o=Math.ceil(e/s)+1,i=2**(s-1);return{windows:o,windowSize:i}};return{constTimeNegate:t,unsafeLadder(s,o){let i=n.ZERO,a=s;for(;o>Yx;)o&Ac&&(i=i.add(a)),a=a.double(),o>>=Ac;return i},precomputeWindow(s,o){let{windows:i,windowSize:a}=r(o),c=[],l=s,u=l;for(let f=0;f<i;f++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,o,i){let{windows:a,windowSize:c}=r(s),l=n.ZERO,u=n.BASE,f=BigInt(2**s-1),h=2**s,p=BigInt(s);for(let b=0;b<a;b++){let m=b*c,y=Number(i&f);i>>=p,y>c&&(y-=h,i+=Ac);let w=m,P=m+Math.abs(y)-1,N=b%2!==0,L=y<0;y===0?u=u.add(t(N,o[w])):l=l.add(t(L,o[P]))}return{p:l,f:u}},wNAFCached(s,o,i,a){let c=s._WINDOW_SIZE||1,l=o.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&o.set(s,a(l))),this.wNAF(c,l,i)}}}function Ec(n){return bc(n.Fp),Kr(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...yc(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}function Zx(n){let e=Ec(n);Kr(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:t,Fp:r,a:s}=e;if(t){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:Xx,hexToBytes:em}=mc,Nn={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){let{Err:e}=Nn;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");let t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Xx(r),l:n.subarray(t+2)}},toSig(n){let{Err:e}=Nn,t=typeof n=="string"?em(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");let{d:s,l:o}=Nn._parseInt(t.subarray(2)),{d:i,l:a}=Nn._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:i}},hexFromSig(n){let e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,t=l=>{let u=l.toString(16);return u.length&1?`0${u}`:u},r=e(t(n.s)),s=e(t(n.r)),o=r.length/2,i=s.length/2,a=t(o),c=t(i);return`30${t(i+o+4)}02${c}${s}02${a}${r}`}},dr=BigInt(0),xt=BigInt(1),W3=BigInt(2),Zf=BigInt(3),V3=BigInt(4);function tm(n){let e=Zx(n),{Fp:t}=e,r=e.toBytes||((b,m,y)=>{let w=m.toAffine();return ws(Uint8Array.from([4]),t.toBytes(w.x),t.toBytes(w.y))}),s=e.fromBytes||(b=>{let m=b.subarray(1),y=t.fromBytes(m.subarray(0,t.BYTES)),w=t.fromBytes(m.subarray(t.BYTES,2*t.BYTES));return{x:y,y:w}});function o(b){let{a:m,b:y}=e,w=t.sqr(b),P=t.mul(w,b);return t.add(t.add(P,t.mul(b,m)),y)}if(!t.eql(t.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function i(b){return typeof b=="bigint"&&dr<b&&b<e.n}function a(b){if(!i(b))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(b){let{allowedPrivateKeyLengths:m,nByteLength:y,wrapPrivateKey:w,n:P}=e;if(m&&typeof b!="bigint"){if(b instanceof Uint8Array&&(b=An(b)),typeof b!="string"||!m.includes(b.length))throw new Error("Invalid key");b=b.padStart(y*2,"0")}let N;try{N=typeof b=="bigint"?b:fr(lt("private key",b,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof b}`)}return w&&(N=Ye(N,P)),a(N),N}let l=new Map;function u(b){if(!(b instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(m,y,w){if(this.px=m,this.py=y,this.pz=w,m==null||!t.isValid(m))throw new Error("x required");if(y==null||!t.isValid(y))throw new Error("y required");if(w==null||!t.isValid(w))throw new Error("z required")}static fromAffine(m){let{x:y,y:w}=m||{};if(!m||!t.isValid(y)||!t.isValid(w))throw new Error("invalid affine point");if(m instanceof f)throw new Error("projective point not allowed");let P=N=>t.eql(N,t.ZERO);return P(y)&&P(w)?f.ZERO:new f(y,w,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){let y=t.invertBatch(m.map(w=>w.pz));return m.map((w,P)=>w.toAffine(y[P])).map(f.fromAffine)}static fromHex(m){let y=f.fromAffine(s(lt("pointHex",m)));return y.assertValidity(),y}static fromPrivateKey(m){return f.BASE.multiply(c(m))}_setWindowSize(m){this._WINDOW_SIZE=m,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:m,y}=this.toAffine();if(!t.isValid(m)||!t.isValid(y))throw new Error("bad point: x or y not FE");let w=t.sqr(y),P=o(m);if(!t.eql(w,P))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:m}=this.toAffine();if(t.isOdd)return!t.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){u(m);let{px:y,py:w,pz:P}=this,{px:N,py:L,pz:T}=m,C=t.eql(t.mul(y,T),t.mul(N,P)),S=t.eql(t.mul(w,T),t.mul(L,P));return C&&S}negate(){return new f(this.px,t.neg(this.py),this.pz)}double(){let{a:m,b:y}=e,w=t.mul(y,Zf),{px:P,py:N,pz:L}=this,T=t.ZERO,C=t.ZERO,S=t.ZERO,R=t.mul(P,P),z=t.mul(N,N),G=t.mul(L,L),K=t.mul(P,N);return K=t.add(K,K),S=t.mul(P,L),S=t.add(S,S),T=t.mul(m,S),C=t.mul(w,G),C=t.add(T,C),T=t.sub(z,C),C=t.add(z,C),C=t.mul(T,C),T=t.mul(K,T),S=t.mul(w,S),G=t.mul(m,G),K=t.sub(R,G),K=t.mul(m,K),K=t.add(K,S),S=t.add(R,R),R=t.add(S,R),R=t.add(R,G),R=t.mul(R,K),C=t.add(C,R),G=t.mul(N,L),G=t.add(G,G),R=t.mul(G,K),T=t.sub(T,R),S=t.mul(G,z),S=t.add(S,S),S=t.add(S,S),new f(T,C,S)}add(m){u(m);let{px:y,py:w,pz:P}=this,{px:N,py:L,pz:T}=m,C=t.ZERO,S=t.ZERO,R=t.ZERO,z=e.a,G=t.mul(e.b,Zf),K=t.mul(y,N),xe=t.mul(w,L),we=t.mul(P,T),De=t.add(y,w),v=t.add(N,L);De=t.mul(De,v),v=t.add(K,xe),De=t.sub(De,v),v=t.add(y,P);let B=t.add(N,T);return v=t.mul(v,B),B=t.add(K,we),v=t.sub(v,B),B=t.add(w,P),C=t.add(L,T),B=t.mul(B,C),C=t.add(xe,we),B=t.sub(B,C),R=t.mul(z,v),C=t.mul(G,we),R=t.add(C,R),C=t.sub(xe,R),R=t.add(xe,R),S=t.mul(C,R),xe=t.add(K,K),xe=t.add(xe,K),we=t.mul(z,we),v=t.mul(G,v),xe=t.add(xe,we),we=t.sub(K,we),we=t.mul(z,we),v=t.add(v,we),K=t.mul(xe,v),S=t.add(S,K),K=t.mul(B,v),C=t.mul(De,C),C=t.sub(C,K),K=t.mul(De,xe),R=t.mul(B,R),R=t.add(R,K),new f(C,S,R)}subtract(m){return this.add(m.negate())}is0(){return this.equals(f.ZERO)}wNAF(m){return p.wNAFCached(this,l,m,y=>{let w=t.invertBatch(y.map(P=>P.pz));return y.map((P,N)=>P.toAffine(w[N])).map(f.fromAffine)})}multiplyUnsafe(m){let y=f.ZERO;if(m===dr)return y;if(a(m),m===xt)return this;let{endo:w}=e;if(!w)return p.unsafeLadder(this,m);let{k1neg:P,k1:N,k2neg:L,k2:T}=w.splitScalar(m),C=y,S=y,R=this;for(;N>dr||T>dr;)N&xt&&(C=C.add(R)),T&xt&&(S=S.add(R)),R=R.double(),N>>=xt,T>>=xt;return P&&(C=C.negate()),L&&(S=S.negate()),S=new f(t.mul(S.px,w.beta),S.py,S.pz),C.add(S)}multiply(m){a(m);let y=m,w,P,{endo:N}=e;if(N){let{k1neg:L,k1:T,k2neg:C,k2:S}=N.splitScalar(y),{p:R,f:z}=this.wNAF(T),{p:G,f:K}=this.wNAF(S);R=p.constTimeNegate(L,R),G=p.constTimeNegate(C,G),G=new f(t.mul(G.px,N.beta),G.py,G.pz),w=R.add(G),P=z.add(K)}else{let{p:L,f:T}=this.wNAF(y);w=L,P=T}return f.normalizeZ([w,P])[0]}multiplyAndAddUnsafe(m,y,w){let P=f.BASE,N=(T,C)=>C===dr||C===xt||!T.equals(P)?T.multiplyUnsafe(C):T.multiply(C),L=N(this,y).add(N(m,w));return L.is0()?void 0:L}toAffine(m){let{px:y,py:w,pz:P}=this,N=this.is0();m==null&&(m=N?t.ONE:t.inv(P));let L=t.mul(y,m),T=t.mul(w,m),C=t.mul(P,m);if(N)return{x:t.ZERO,y:t.ZERO};if(!t.eql(C,t.ONE))throw new Error("invZ was invalid");return{x:L,y:T}}isTorsionFree(){let{h:m,isTorsionFree:y}=e;if(m===xt)return!0;if(y)return y(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:m,clearCofactor:y}=e;return m===xt?this:y?y(f,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return this.assertValidity(),r(f,this,m)}toHex(m=!0){return An(this.toRawBytes(m))}}f.BASE=new f(e.Gx,e.Gy,t.ONE),f.ZERO=new f(t.ZERO,t.ONE,t.ZERO);let h=e.nBitLength,p=Yf(f,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:i}}function rm(n){let e=Ec(n);return Kr(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Xf(n){let e=rm(n),{Fp:t,n:r}=e,s=t.BYTES+1,o=2*t.BYTES+1;function i(v){return dr<v&&v<t.ORDER}function a(v){return Ye(v,r)}function c(v){return Ri(v,r)}let{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:f,isWithinCurveOrder:h}=tm({...e,toBytes(v,B,_){let te=B.toAffine(),q=t.toBytes(te.x),me=ws;return _?me(Uint8Array.from([B.hasEvenY()?2:3]),q):me(Uint8Array.from([4]),q,t.toBytes(te.y))},fromBytes(v){let B=v.length,_=v[0],te=v.subarray(1);if(B===s&&(_===2||_===3)){let q=fr(te);if(!i(q))throw new Error("Point is not on curve");let me=f(q),Pe=t.sqrt(me),Je=(Pe&xt)===xt;return(_&1)===1!==Je&&(Pe=t.neg(Pe)),{x:q,y:Pe}}else if(B===o&&_===4){let q=t.fromBytes(te.subarray(0,t.BYTES)),me=t.fromBytes(te.subarray(t.BYTES,2*t.BYTES));return{x:q,y:me}}else throw new Error(`Point of length ${B} was invalid. Expected ${s} compressed bytes or ${o} uncompressed bytes`)}}),p=v=>An(Gr(v,e.nByteLength));function b(v){let B=r>>xt;return v>B}function m(v){return b(v)?a(-v):v}let y=(v,B,_)=>fr(v.slice(B,_));class w{constructor(B,_,te){this.r=B,this.s=_,this.recovery=te,this.assertValidity()}static fromCompact(B){let _=e.nByteLength;return B=lt("compactSignature",B,_*2),new w(y(B,0,_),y(B,_,2*_))}static fromDER(B){let{r:_,s:te}=Nn.toSig(lt("DER",B));return new w(_,te)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(B){return new w(this.r,this.s,B)}recoverPublicKey(B){let{r:_,s:te,recovery:q}=this,me=S(lt("msgHash",B));if(q==null||![0,1,2,3].includes(q))throw new Error("recovery id invalid");let Pe=q===2||q===3?_+e.n:_;if(Pe>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");let Je=q&1?"03":"02",vr=l.fromHex(Je+p(Pe)),Cr=c(Pe),as=a(-me*Cr),ro=a(te*Cr),Br=l.BASE.multiplyAndAddUnsafe(vr,as,ro);if(!Br)throw new Error("point at infinify");return Br.assertValidity(),Br}hasHighS(){return b(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return En(this.toDERHex())}toDERHex(){return Nn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return En(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}let P={isValidPrivateKey(v){try{return u(v),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{let v=wc(e.n);return $f(e.randomBytes(v),e.n)},precompute(v=8,B=l.BASE){return B._setWindowSize(v),B.multiply(BigInt(3)),B}};function N(v,B=!0){return l.fromPrivateKey(v).toRawBytes(B)}function L(v){let B=v instanceof Uint8Array,_=typeof v=="string",te=(B||_)&&v.length;return B?te===s||te===o:_?te===2*s||te===2*o:v instanceof l}function T(v,B,_=!0){if(L(v))throw new Error("first arg must be private key");if(!L(B))throw new Error("second arg must be public key");return l.fromHex(B).multiply(u(v)).toRawBytes(_)}let C=e.bits2int||function(v){let B=fr(v),_=v.length*8-e.nBitLength;return _>0?B>>BigInt(_):B},S=e.bits2int_modN||function(v){return a(C(v))},R=xo(e.nBitLength);function z(v){if(typeof v!="bigint")throw new Error("bigint expected");if(!(dr<=v&&v<R))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Gr(v,e.nByteLength)}function G(v,B,_=K){if(["recovered","canonical"].some(fn=>fn in _))throw new Error("sign() legacy options not supported");let{hash:te,randomBytes:q}=e,{lowS:me,prehash:Pe,extraEntropy:Je}=_;me==null&&(me=!0),v=lt("msgHash",v),Pe&&(v=lt("prehashed msgHash",te(v)));let vr=S(v),Cr=u(B),as=[z(Cr),z(vr)];if(Je!=null){let fn=Je===!0?q(t.BYTES):Je;as.push(lt("extraEntropy",fn))}let ro=ws(...as),Br=vr;function Va(fn){let cs=C(fn);if(!h(cs))return;let bu=c(cs),zt=l.BASE.multiply(cs).toAffine(),ls=a(zt.x);if(ls===dr)return;let si=a(bu*a(Br+ls*Cr));if(si===dr)return;let yu=(zt.x===ls?0:2)|Number(zt.y&xt),wu=si;return me&&b(si)&&(wu=m(si),yu^=1),new w(ls,wu,yu)}return{seed:ro,k2sig:Va}}let K={lowS:e.lowS,prehash:!1},xe={lowS:e.lowS,prehash:!1};function we(v,B,_=K){let{seed:te,k2sig:q}=G(v,B,_),me=e;return xc(me.hash.outputLen,me.nByteLength,me.hmac)(te,q)}l.BASE._setWindowSize(8);function De(v,B,_,te=xe){let q=v;if(B=lt("msgHash",B),_=lt("publicKey",_),"strict"in te)throw new Error("options.strict was renamed to lowS");let{lowS:me,prehash:Pe}=te,Je,vr;try{if(typeof q=="string"||q instanceof Uint8Array)try{Je=w.fromDER(q)}catch(zt){if(!(zt instanceof Nn.Err))throw zt;Je=w.fromCompact(q)}else if(typeof q=="object"&&typeof q.r=="bigint"&&typeof q.s=="bigint"){let{r:zt,s:ls}=q;Je=new w(zt,ls)}else throw new Error("PARSE");vr=l.fromHex(_)}catch(zt){if(zt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(me&&Je.hasHighS())return!1;Pe&&(B=e.hash(B));let{r:Cr,s:as}=Je,ro=S(B),Br=c(as),Va=a(ro*Br),fn=a(Cr*Br),cs=l.BASE.multiplyAndAddUnsafe(vr,Va,fn)?.toAffine();return cs?a(cs.x)===Cr:!1}return{CURVE:e,getPublicKey:N,getSharedSecret:T,sign:we,verify:De,ProjectivePoint:l,Signature:w,utils:P}}function nm(n){return{hash:n,hmac:(e,...t)=>yn(n,e,Vu(...t)),randomBytes:Qu}}function e0(n,e){let t=r=>Xf({...n,...nm(r)});return Object.freeze({...t(e),create:t})}var n0=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),t0=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),sm=BigInt(1),kc=BigInt(2),r0=(n,e)=>(n+e/kc)/e;function om(n){let e=n0,t=BigInt(3),r=BigInt(6),s=BigInt(11),o=BigInt(22),i=BigInt(23),a=BigInt(44),c=BigInt(88),l=n*n*n%e,u=l*l*n%e,f=ut(u,t,e)*u%e,h=ut(f,t,e)*u%e,p=ut(h,kc,e)*l%e,b=ut(p,s,e)*p%e,m=ut(b,o,e)*b%e,y=ut(m,a,e)*m%e,w=ut(y,c,e)*y%e,P=ut(w,a,e)*m%e,N=ut(P,t,e)*u%e,L=ut(N,i,e)*b%e,T=ut(L,r,e)*l%e,C=ut(T,kc,e);if(!Nc.eql(Nc.sqr(C),n))throw new Error("Cannot find square root");return C}var Nc=jf(n0,void 0,void 0,{sqrt:om}),hr=e0({a:BigInt(0),b:BigInt(7),Fp:Nc,n:t0,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{let e=t0,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-sm*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=t,i=BigInt("0x100000000000000000000000000000000"),a=r0(o*n,e),c=r0(-r*n,e),l=Ye(n-a*t-c*s,e),u=Ye(-a*r-c*o,e),f=l>i,h=u>i;if(f&&(l=e-l),h&&(u=e-u),l>i||u>i)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:f,k1:l,k2neg:h,k2:u}}}},ur),X3=BigInt(0);var e8=hr.ProjectivePoint;var Mt="0x0000000000000000000000000000000000000000";var As="0x0000000000000000000000000000000000000000000000000000000000000000";var Ic=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Pc=BigInt("1000000000000000000"),Tc=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),vc=BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1),Cc=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var Bc="\u039E",mo=`Ethereum Signed Message:
`;var s0=BigInt(0),o0=BigInt(1),Sc=BigInt(2),i0=BigInt(27),a0=BigInt(28),Si=BigInt(35),c0=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),im=c0/Sc,am=Symbol.for("nodejs.util.inspect.custom"),In={};function Rc(n){return Te(ee(n),32)}var Ce=class n{#e;#t;#r;#n;get r(){return this.#e}set r(e){d(nt(e)===32,"invalid r","value",e),this.#e=A(e)}get s(){return d(parseInt(this.#t.substring(0,3))<8,"non-canonical s; use ._s","s",this.#t),this.#t}set s(e){d(nt(e)===32,"invalid s","value",e),this.#t=A(e)}get _s(){return this.#t}isValid(){return BigInt(this.#t)<=im}get v(){return this.#r}set v(e){let t=U(e,"value");d(t===27||t===28,"invalid v","v",e),this.#r=t}get networkV(){return this.#n}get legacyChainId(){let e=this.networkV;return e==null?null:n.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){let e=E(this.s);return this.yParity&&(e[0]|=128),A(e)}get compactSerialized(){return M([this.r,this.yParityAndS])}get serialized(){return M([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,r,s){Fe(e,In,"Signature"),this.#e=t,this.#t=r,this.#r=s,this.#n=null}getCanonical(){if(this.isValid())return this;let e=c0-BigInt(this._s),t=55-this.v,r=new n(In,this.r,Rc(e),t);return this.networkV&&(r.#n=this.networkV),r}clone(){let e=new n(In,this.r,this._s,this.v);return this.networkV&&(e.#n=this.networkV),e}toJSON(){let e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[am](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){let t=I(e,"v");return t==i0||t==a0?s0:(d(t>=Si,"invalid EIP-155 v","v",e),(t-Si)/Sc)}static getChainIdV(e,t){return I(e)*Sc+BigInt(35+t-27)}static getNormalizedV(e){let t=I(e);return t===s0||t===i0?27:t===o0||t===a0?28:(d(t>=Si,"invalid v","v",e),t&o0?27:28)}static from(e){function t(l,u){d(l,u,"signature",e)}if(e==null)return new n(In,As,As,27);if(typeof e=="string"){let l=E(e,"signature");if(l.length===64){let u=A(l.slice(0,32)),f=l.slice(32,64),h=f[0]&128?28:27;return f[0]&=127,new n(In,u,A(f),h)}if(l.length===65){let u=A(l.slice(0,32)),f=A(l.slice(32,64)),h=n.getNormalizedV(l[64]);return new n(In,u,f,h)}t(!1,"invalid raw signature length")}if(e instanceof n)return e.clone();let r=e.r;t(r!=null,"missing r");let s=Rc(r),o=function(l,u){if(l!=null)return Rc(l);if(u!=null){t(W(u,32),"invalid yParityAndS");let f=E(u);return f[0]&=127,A(f)}t(!1,"missing s")}(e.s,e.yParityAndS),{networkV:i,v:a}=function(l,u,f){if(l!=null){let h=I(l);return{networkV:h>=Si?h:void 0,v:n.getNormalizedV(h)}}if(u!=null)return t(W(u,32),"invalid yParityAndS"),{v:E(u)[0]&128?28:27};if(f!=null){switch(U(f,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new n(In,s,o,a);return i&&(c.#n=i),t(e.yParity==null||U(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};var He=class n{#e;constructor(e){d(nt(e)===32,"invalid private key","privateKey","[REDACTED]"),this.#e=A(e)}get privateKey(){return this.#e}get publicKey(){return n.computePublicKey(this.#e)}get compressedPublicKey(){return n.computePublicKey(this.#e,!0)}sign(e){d(nt(e)===32,"invalid digest length","digest",e);let t=hr.sign(ge(e),ge(this.#e),{lowS:!0});return Ce.from({r:Le(t.r,32),s:Le(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){let t=n.computePublicKey(e);return A(hr.getSharedSecret(ge(this.#e),E(t),!1))}static computePublicKey(e,t){let r=E(e,"key");if(r.length===32){let o=hr.getPublicKey(r,!!t);return A(o)}if(r.length===64){let o=new Uint8Array(65);o[0]=4,o.set(r,1),r=o}let s=hr.ProjectivePoint.fromHex(r);return A(s.toRawBytes(t))}static recoverPublicKey(e,t){d(nt(e)===32,"invalid digest length","digest",e);let r=Ce.from(t),s=hr.Signature.fromCompact(ge(M([r.r,r.s])));s=s.addRecoveryBit(r.yParity);let o=s.recoverPublicKey(ge(e));return d(o!=null,"invalid signature for digest","signature",t),"0x"+o.toHex(!1)}static addPoints(e,t,r){let s=hr.ProjectivePoint.fromHex(n.computePublicKey(e).substring(2)),o=hr.ProjectivePoint.fromHex(n.computePublicKey(t).substring(2));return"0x"+s.add(o).toHex(!!r)}};function l0(){Ut.lock(),H.lock(),Xe.lock(),$e.lock(),Ot.lock(),Dt.lock(),Lt.lock(),ve.lock(),wn.lock(),$e.lock()}var cm=BigInt(0),lm=BigInt(36);function u0(n){n=n.toLowerCase();let e=n.substring(2).split(""),t=new Uint8Array(40);for(let s=0;s<40;s++)t[s]=e[s].charCodeAt(0);let r=E(H(t));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}var Uc={};for(let n=0;n<10;n++)Uc[String(n)]=String(n);for(let n=0;n<26;n++)Uc[String.fromCharCode(65+n)]=String(10+n);var f0=15;function d0(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>Uc[r]).join("");for(;e.length>=f0;){let r=e.substring(0,f0);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}var um=function(){let n={};for(let e=0;e<36;e++){let t="0123456789abcdefghijklmnopqrstuvwxyz"[e];n[t]=BigInt(e)}return n}();function fm(n){n=n.toLowerCase();let e=cm;for(let t=0;t<n.length;t++)e=e*lm+um[n[t]];return e}function D(n){if(d(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);let e=u0(n);return d(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===n,"bad address checksum","address",n),e}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){d(n.substring(2,4)===d0(n),"bad icap checksum","address",n);let e=fm(n.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return u0("0x"+e)}d(!1,"invalid address","address",n)}function Oc(n){let e=BigInt(D(n)).toString(36).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+d0("XE00"+e)+e}function Pn(n){let e=D(n.from),r=I(n.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,D(re(H(je([e,r])),12))}function Dc(n,e,t){let r=D(n),s=E(e,"salt"),o=E(t,"initCodeHash");return d(s.length===32,"salt must be 32 bytes","salt",e),d(o.length===32,"initCodeHash must be 32 bytes","initCodeHash",t),D(re(H(M(["0xff",r,s,o])),12))}function Es(n){return n&&typeof n.getAddress=="function"}function Mc(n){try{return D(n),!0}catch{}return!1}async function Lc(n,e){let t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(g(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),d(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),D(t)}function be(n,e){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?D(n):(g(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Lc(n,e.resolveName(n)));if(Es(n))return Lc(n,n.getAddress());if(n&&typeof n.then=="function")return Lc(n,n);d(!1,"unsupported addressable value","target",n)}var Ft={};function O(n,e){let t=!1;return e<0&&(t=!0,e*=-1),new de(Ft,`${t?"":"u"}int${e}`,n,{signed:t,width:e})}function ie(n,e){return new de(Ft,`bytes${e||""}`,n,{size:e})}var h0=Symbol.for("_ethers_typed"),de=class n{type;value;#e;_typedSymbol;constructor(e,t,r,s){s==null&&(s=null),Fe(Ft,e,"Typed"),k(this,{_typedSymbol:h0,type:t,value:r}),this.#e=s,this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#e}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return this.#e===!0?-1:this.#e===!1?this.value.length:null}static from(e,t){return new n(Ft,e,t)}static uint8(e){return O(e,8)}static uint16(e){return O(e,16)}static uint24(e){return O(e,24)}static uint32(e){return O(e,32)}static uint40(e){return O(e,40)}static uint48(e){return O(e,48)}static uint56(e){return O(e,56)}static uint64(e){return O(e,64)}static uint72(e){return O(e,72)}static uint80(e){return O(e,80)}static uint88(e){return O(e,88)}static uint96(e){return O(e,96)}static uint104(e){return O(e,104)}static uint112(e){return O(e,112)}static uint120(e){return O(e,120)}static uint128(e){return O(e,128)}static uint136(e){return O(e,136)}static uint144(e){return O(e,144)}static uint152(e){return O(e,152)}static uint160(e){return O(e,160)}static uint168(e){return O(e,168)}static uint176(e){return O(e,176)}static uint184(e){return O(e,184)}static uint192(e){return O(e,192)}static uint200(e){return O(e,200)}static uint208(e){return O(e,208)}static uint216(e){return O(e,216)}static uint224(e){return O(e,224)}static uint232(e){return O(e,232)}static uint240(e){return O(e,240)}static uint248(e){return O(e,248)}static uint256(e){return O(e,256)}static uint(e){return O(e,256)}static int8(e){return O(e,-8)}static int16(e){return O(e,-16)}static int24(e){return O(e,-24)}static int32(e){return O(e,-32)}static int40(e){return O(e,-40)}static int48(e){return O(e,-48)}static int56(e){return O(e,-56)}static int64(e){return O(e,-64)}static int72(e){return O(e,-72)}static int80(e){return O(e,-80)}static int88(e){return O(e,-88)}static int96(e){return O(e,-96)}static int104(e){return O(e,-104)}static int112(e){return O(e,-112)}static int120(e){return O(e,-120)}static int128(e){return O(e,-128)}static int136(e){return O(e,-136)}static int144(e){return O(e,-144)}static int152(e){return O(e,-152)}static int160(e){return O(e,-160)}static int168(e){return O(e,-168)}static int176(e){return O(e,-176)}static int184(e){return O(e,-184)}static int192(e){return O(e,-192)}static int200(e){return O(e,-200)}static int208(e){return O(e,-208)}static int216(e){return O(e,-216)}static int224(e){return O(e,-224)}static int232(e){return O(e,-232)}static int240(e){return O(e,-240)}static int248(e){return O(e,-248)}static int256(e){return O(e,-256)}static int(e){return O(e,-256)}static bytes1(e){return ie(e,1)}static bytes2(e){return ie(e,2)}static bytes3(e){return ie(e,3)}static bytes4(e){return ie(e,4)}static bytes5(e){return ie(e,5)}static bytes6(e){return ie(e,6)}static bytes7(e){return ie(e,7)}static bytes8(e){return ie(e,8)}static bytes9(e){return ie(e,9)}static bytes10(e){return ie(e,10)}static bytes11(e){return ie(e,11)}static bytes12(e){return ie(e,12)}static bytes13(e){return ie(e,13)}static bytes14(e){return ie(e,14)}static bytes15(e){return ie(e,15)}static bytes16(e){return ie(e,16)}static bytes17(e){return ie(e,17)}static bytes18(e){return ie(e,18)}static bytes19(e){return ie(e,19)}static bytes20(e){return ie(e,20)}static bytes21(e){return ie(e,21)}static bytes22(e){return ie(e,22)}static bytes23(e){return ie(e,23)}static bytes24(e){return ie(e,24)}static bytes25(e){return ie(e,25)}static bytes26(e){return ie(e,26)}static bytes27(e){return ie(e,27)}static bytes28(e){return ie(e,28)}static bytes29(e){return ie(e,29)}static bytes30(e){return ie(e,30)}static bytes31(e){return ie(e,31)}static bytes32(e){return ie(e,32)}static address(e){return new n(Ft,"address",e)}static bool(e){return new n(Ft,"bool",!!e)}static bytes(e){return new n(Ft,"bytes",e)}static string(e){return new n(Ft,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new n(Ft,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===h0}static dereference(e,t){if(n.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}};var Ui=class extends Re{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=de.dereference(t,"string");try{r=D(r)}catch(s){return this._throwError(s.message,t)}return e.writeValue(r)}decode(e){return D(Le(e.readValue(),20))}};var Oi=class extends Re{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}};function Fc(n,e,t){let r=[];if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let c={};r=e.map(l=>{let u=l.localName;return g(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:t}),g(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:t}),c[u]=!0,t[u]})}else d(!1,"invalid tuple value","tuple",t);d(e.length===r.length,"types/value length mismatch","tuple",t);let s=new bn,o=new bn,i=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let f=o.length;c.encode(o,u);let h=s.writeUpdatableValue();i.push(p=>{h(p+f)})}else c.encode(s,u)}),i.forEach(c=>{c(s.length)});let a=n.appendWriter(s);return a+=n.appendWriter(o),a}function _c(n,e){let t=[],r=[],s=n.subReader(0);return e.forEach(o=>{let i=null;if(o.dynamic){let a=n.readIndex(),c=s.subReader(a);try{i=o.decode(c)}catch(l){if(se(l,"BUFFER_OVERRUN"))throw l;i=l,i.baseType=o.name,i.name=o.localName,i.type=o.type}}else try{i=o.decode(n)}catch(a){if(se(a,"BUFFER_OVERRUN"))throw a;i=a,i.baseType=o.name,i.name=o.localName,i.type=o.type}if(i==null)throw new Error("investigate");t.push(i),r.push(o.localName||null)}),Bt.fromItems(t,r)}var Di=class extends Re{coder;length;constructor(e,t,r){let s=e.type+"["+(t>=0?t:"")+"]",o=t===-1||e.dynamic;super("array",s,r,o),k(this,{coder:e,length:t})}defaultValue(){let e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){let r=de.dereference(t,"array");Array.isArray(r)||this._throwError("expected array value",r);let s=this.length;s===-1&&(s=r.length,e.writeValue(r.length)),dn(r.length,s,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let i=0;i<r.length;i++)o.push(this.coder);return Fc(e,o,r)}decode(e){let t=this.length;t===-1&&(t=e.readIndex(),g(t*_e<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*_e,length:e.dataLength}));let r=[];for(let s=0;s<t;s++)r.push(new Oi(this.coder));return _c(e,r)}};var Li=class extends Re{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){let r=de.dereference(t,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}};var go=class extends Re{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=ge(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readIndex(),!0)}},Mi=class extends go{constructor(e){super("bytes",e)}decode(e){return A(super.decode(e))}};var Fi=class extends Re{size;constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),k(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let r=ge(de.dereference(t,this.type));return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return A(e.readBytes(this.size))}};var dm=new Uint8Array([]),_i=class extends Re{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(dm)}decode(e){return e.readBytes(0),null}};var hm=BigInt(0),pm=BigInt(1),xm=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Hi=class extends Re{size;signed;constructor(e,t,r){let s=(t?"int":"uint")+e*8;super(s,s,r,!1),k(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let r=I(de.dereference(t,this.type)),s=ct(xm,_e*8);if(this.signed){let o=ct(s,this.size*8-1);(r>o||r<-(o+pm))&&this._throwError("value out-of-bounds",t),r=ir(r,8*_e)}else(r<hm||r>ct(s,this.size*8))&&this._throwError("value out-of-bounds",t);return e.writeValue(r)}decode(e){let t=ct(e.readValue(),this.size*8);return this.signed&&(t=or(t,this.size*8)),t}};var Gi=class extends go{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,ae(de.dereference(t,"string")))}decode(e){return Ze(super.decode(e))}};var Tn=class extends Re{coders;constructor(e,t){let r=!1,s=[];e.forEach(i=>{i.dynamic&&(r=!0),s.push(i.type)});let o="tuple("+s.join(",")+")";super("tuple",o,t,r),k(this,{coders:Object.freeze(e.slice())})}defaultValue(){let e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});let t=this.coders.reduce((r,s)=>{let o=s.localName;return o&&(r[o]||(r[o]=0),r[o]++),r},{});return this.coders.forEach((r,s)=>{let o=r.localName;!o||t[o]!==1||(o==="length"&&(o="_length"),e[o]==null&&(e[o]=e[s]))}),Object.freeze(e)}encode(e,t){let r=de.dereference(t,"tuple");return Fc(e,this.coders,r)}decode(e){return _c(e,this.coders)}};function Hc(n,e){return{address:D(n),storageKeys:e.map((t,r)=>(d(W(t,32),"invalid slot",`storageKeys[${r}]`,t),t.toLowerCase()))}}function Ge(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(d(t.length===2,"invalid slot set",`value[${r}]`,t),Hc(t[0],t[1])):(d(t!=null&&typeof t=="object","invalid address-slot set","value",n),Hc(t.address,t.storageKeys)));d(n!=null&&typeof n=="object","invalid access list","value",n);let e=Object.keys(n).map(t=>{let r=n[t].reduce((s,o)=>(s[o]=!0,s),{});return Hc(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function vn(n){return{address:D(n.address),nonce:I(n.nonce!=null?n.nonce:0),chainId:I(n.chainId!=null?n.chainId:0),signature:Ce.from(n.signature)}}function _t(n){let e;return typeof n=="string"?e=He.computePublicKey(n,!1):e=n.publicKey,D(H("0x"+e.substring(4)).substring(26))}function Ht(n,e){return _t(He.recoverPublicKey(n,e))}var Me=BigInt(0),mm=BigInt(2),gm=BigInt(27),bm=BigInt(28),ym=BigInt(35),wm=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Am=Symbol.for("nodejs.util.inspect.custom"),Gc=4096*32,Ki=128;function Em(n){return{blobToKzgCommitment:r=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return E(n.blobToKzgCommitment(A(r)))}else if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return E(n.blobToKzgCommitment(r));if("blobToKZGCommitment"in n&&typeof n.blobToKZGCommitment=="function")return E(n.blobToKZGCommitment(A(r)));d(!1,"unsupported KZG library","kzg",n)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in n&&typeof n.computeBlobProof=="function")return E(n.computeBlobProof(A(r),A(s)));if("computeBlobKzgProof"in n&&typeof n.computeBlobKzgProof=="function")return n.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in n&&typeof n.computeBlobKZGProof=="function")return E(n.computeBlobKZGProof(A(r),A(s)));d(!1,"unsupported KZG library","kzg",n)}}}function p0(n,e){let t=n.toString(16);for(;t.length<2;)t="0"+t;return t+=ve(e).substring(4),"0x"+t}function ks(n){return n==="0x"?null:D(n)}function Wi(n,e){try{return Ge(n)}catch(t){d(!1,t.message,e,n)}}function km(n,e){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");let t=[];for(let r=0;r<n.length;r++){let s=n[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);t.push({address:ks(s[1]),nonce:he(s[2],"nonce"),chainId:he(s[0],"chainId"),signature:Ce.from({yParity:Cn(s[3],"yParity"),r:Te(s[4],32),s:Te(s[5],32)})})}return t}catch(t){d(!1,t.message,e,n)}}function Cn(n,e){return n==="0x"?0:U(n,e)}function he(n,e){if(n==="0x")return Me;let t=I(n,e);return d(t<=wm,"value exceeds uint size",e,t),t}function $(n,e){let t=I(n,"value"),r=ee(t);return d(r.length<=32,"value too large",`tx.${e}`,t),r}function Vi(n){return Ge(n).map(e=>[e.address,e.storageKeys])}function Nm(n){return n.map(e=>[$(e.chainId,"chainId"),e.address,$(e.nonce,"nonce"),$(e.signature.yParity,"yParity"),ee(e.signature.r),ee(e.signature._s)])}function Im(n,e){d(Array.isArray(n),`invalid ${e}`,"value",n);for(let t=0;t<n.length;t++)d(W(n[t],32),"invalid ${ param } hash",`value[${t}]`,n[t]);return n}function Pm(n){let e=cr(n);d(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",n);let t={type:0,nonce:Cn(e[0],"nonce"),gasPrice:he(e[1],"gasPrice"),gasLimit:he(e[2],"gasLimit"),to:ks(e[3]),value:he(e[4],"value"),data:A(e[5]),chainId:Me};if(e.length===6)return t;let r=he(e[6],"v"),s=he(e[7],"r"),o=he(e[8],"s");if(s===Me&&o===Me)t.chainId=r;else{let i=(r-ym)/mm;i<Me&&(i=Me),t.chainId=i,d(i!==Me||r===gm||r===bm,"non-canonical legacy v","v",e[6]),t.signature=Ce.from({r:Te(e[7],32),s:Te(e[8],32),v:r})}return t}function Tm(n,e){let t=[$(n.nonce,"nonce"),$(n.gasPrice||0,"gasPrice"),$(n.gasLimit,"gasLimit"),n.to||"0x",$(n.value,"value"),n.data],r=Me;if(n.chainId!=Me)r=I(n.chainId,"tx.chainId"),d(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(n.signature){let o=n.signature.legacyChainId;o!=null&&(r=o)}if(!e)return r!==Me&&(t.push(ee(r)),t.push("0x"),t.push("0x")),je(t);let s=BigInt(27+e.yParity);return r!==Me?s=Ce.getChainIdV(r,e.v):BigInt(e.v)!==s&&d(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(ee(s)),t.push(ee(e.r)),t.push(ee(e._s)),je(t)}function zi(n,e){let t;try{if(t=Cn(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{d(!1,"invalid yParity","yParity",e[0])}let r=Te(e[1],32),s=Te(e[2],32),o=Ce.from({r,s,yParity:t});n.signature=o}function vm(n){let e=cr(E(n).slice(1));d(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",A(n));let t={type:2,chainId:he(e[0],"chainId"),nonce:Cn(e[1],"nonce"),maxPriorityFeePerGas:he(e[2],"maxPriorityFeePerGas"),maxFeePerGas:he(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:he(e[4],"gasLimit"),to:ks(e[5]),value:he(e[6],"value"),data:A(e[7]),accessList:Wi(e[8],"accessList")};return e.length===9||zi(t,e.slice(9)),t}function Cm(n,e){let t=[$(n.chainId,"chainId"),$(n.nonce,"nonce"),$(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),$(n.maxFeePerGas||0,"maxFeePerGas"),$(n.gasLimit,"gasLimit"),n.to||"0x",$(n.value,"value"),n.data,Vi(n.accessList||[])];return e&&(t.push($(e.yParity,"yParity")),t.push(ee(e.r)),t.push(ee(e.s))),M(["0x02",je(t)])}function Bm(n){let e=cr(E(n).slice(1));d(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",A(n));let t={type:1,chainId:he(e[0],"chainId"),nonce:Cn(e[1],"nonce"),gasPrice:he(e[2],"gasPrice"),gasLimit:he(e[3],"gasLimit"),to:ks(e[4]),value:he(e[5],"value"),data:A(e[6]),accessList:Wi(e[7],"accessList")};return e.length===8||zi(t,e.slice(8)),t}function Rm(n,e){let t=[$(n.chainId,"chainId"),$(n.nonce,"nonce"),$(n.gasPrice||0,"gasPrice"),$(n.gasLimit,"gasLimit"),n.to||"0x",$(n.value,"value"),n.data,Vi(n.accessList||[])];return e&&(t.push($(e.yParity,"recoveryParam")),t.push(ee(e.r)),t.push(ee(e.s))),M(["0x01",je(t)])}function Sm(n){let e=cr(E(n).slice(1)),t="3",r=null,s=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";let i=e[1],a=e[2],c=e[3];d(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),d(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),d(Array.isArray(c),"invalid network format: proofs not an array","fields[3]",c),d(i.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),d(i.length===c.length,"invalid network format: blobs/proofs length mismatch","fields",e),s=[];for(let l=0;l<e[1].length;l++)s.push({data:i[l],commitment:a[l],proof:c[l]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){t="3 (EIP-7594 network format)",r=U(e[1]);let i=e[2],a=e[3],c=e[4];d(r===1,`unsupported EIP-7594 network format version: ${r}`,"fields[1]",r),d(Array.isArray(i),"invalid EIP-7594 network format: blobs not an array","fields[2]",i),d(Array.isArray(a),"invalid EIP-7594 network format: commitments not an array","fields[3]",a),d(Array.isArray(c),"invalid EIP-7594 network format: proofs not an array","fields[4]",c),d(i.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),d(i.length*Ki===c.length,"invalid network format: blobs/proofs length mismatch","fields",e),s=[];for(let l=0;l<i.length;l++){let u=[];for(let f=0;f<Ki;f++)u.push(c[l*Ki+f]);s.push({data:i[l],commitment:a[l],proof:M(u)})}e=e[0]}d(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",A(n));let o={type:3,chainId:he(e[0],"chainId"),nonce:Cn(e[1],"nonce"),maxPriorityFeePerGas:he(e[2],"maxPriorityFeePerGas"),maxFeePerGas:he(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:he(e[4],"gasLimit"),to:ks(e[5]),value:he(e[6],"value"),data:A(e[7]),accessList:Wi(e[8],"accessList"),maxFeePerBlobGas:he(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:r};s&&(o.blobs=s),d(o.to!=null,`invalid address for transaction type: ${t}`,"data",n),d(Array.isArray(o.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let i=0;i<o.blobVersionedHashes.length;i++)d(W(o.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",n);return e.length===11||zi(o,e.slice(11)),o}function Um(n,e,t){let r=[$(n.chainId,"chainId"),$(n.nonce,"nonce"),$(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),$(n.maxFeePerGas||0,"maxFeePerGas"),$(n.gasLimit,"gasLimit"),n.to||Mt,$(n.value,"value"),n.data,Vi(n.accessList||[]),$(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Im(n.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(r.push($(e.yParity,"yParity")),r.push(ee(e.r)),r.push(ee(e.s)),t)){if(n.blobWrapperVersion!=null){let s=ee(n.blobWrapperVersion),o=[];for(let{proof:i}of t){let a=E(i),c=a.length/Ki;for(let l=0;l<a.length;l+=c)o.push(a.subarray(l,l+c))}return M(["0x03",je([r,s,t.map(i=>i.data),t.map(i=>i.commitment),o])])}return M(["0x03",je([r,t.map(s=>s.data),t.map(s=>s.commitment),t.map(s=>s.proof)])])}return M(["0x03",je(r)])}function Om(n){let e=cr(E(n).slice(1));d(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",A(n));let t={type:4,chainId:he(e[0],"chainId"),nonce:Cn(e[1],"nonce"),maxPriorityFeePerGas:he(e[2],"maxPriorityFeePerGas"),maxFeePerGas:he(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:he(e[4],"gasLimit"),to:ks(e[5]),value:he(e[6],"value"),data:A(e[7]),accessList:Wi(e[8],"accessList"),authorizationList:km(e[9],"authorizationList")};return e.length===10||zi(t,e.slice(10)),t}function Dm(n,e){let t=[$(n.chainId,"chainId"),$(n.nonce,"nonce"),$(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),$(n.maxFeePerGas||0,"maxFeePerGas"),$(n.gasLimit,"gasLimit"),n.to||"0x",$(n.value,"value"),n.data,Vi(n.accessList||[]),Nm(n.authorizationList||[])];return e&&(t.push($(e.yParity,"yParity")),t.push(ee(e.r)),t.push(ee(e.s))),M(["0x04",je(t)])}var ft=class n{#e;#t;#r;#n;#s;#i;#o;#a;#f;#l;#p;#x;#c;#u;#d;#h;#b;#m;get type(){return this.#e}set type(e){switch(e){case null:this.#e=null;break;case 0:case"legacy":this.#e=0;break;case 1:case"berlin":case"eip-2930":this.#e=1;break;case 2:case"london":case"eip-1559":this.#e=2;break;case 3:case"cancun":case"eip-4844":this.#e=3;break;case 4:case"pectra":case"eip-7702":this.#e=4;break;default:d(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){let e=this.#t;return e==null&&this.type===3?Mt:e}set to(e){this.#t=e==null?null:D(e)}get nonce(){return this.#n}set nonce(e){this.#n=U(e,"value")}get gasLimit(){return this.#s}set gasLimit(e){this.#s=I(e)}get gasPrice(){let e=this.#i;return e==null&&(this.type===0||this.type===1)?Me:e}set gasPrice(e){this.#i=e==null?null:I(e,"gasPrice")}get maxPriorityFeePerGas(){let e=this.#o;return e??(this.type===2||this.type===3?Me:null)}set maxPriorityFeePerGas(e){this.#o=e==null?null:I(e,"maxPriorityFeePerGas")}get maxFeePerGas(){let e=this.#a;return e??(this.type===2||this.type===3?Me:null)}set maxFeePerGas(e){this.#a=e==null?null:I(e,"maxFeePerGas")}get data(){return this.#r}set data(e){this.#r=A(e)}get value(){return this.#f}set value(e){this.#f=I(e,"value")}get chainId(){return this.#l}set chainId(e){this.#l=I(e)}get signature(){return this.#p||null}set signature(e){this.#p=e==null?null:Ce.from(e)}isValid(){let e=this.signature;if(e&&!e.isValid())return!1;let t=this.authorizationList;if(t){for(let r of t)if(!r.signature.isValid())return!1}return!0}get accessList(){let e=this.#x||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){this.#x=e==null?null:Ge(e)}get authorizationList(){let e=this.#b||null;return e==null&&this.type===4?[]:e}set authorizationList(e){this.#b=e==null?null:e.map(t=>vn(t))}get maxFeePerBlobGas(){let e=this.#c;return e==null&&this.type===3?Me:e}set maxFeePerBlobGas(e){this.#c=e==null?null:I(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#u;return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){d(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)d(W(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}this.#u=e}get blobs(){return this.#h==null?null:this.#h.map(e=>Object.assign({},e))}set blobs(e){if(e==null){this.#h=null;return}let t=[],r=[];for(let s=0;s<e.length;s++){let o=e[s];if(Pt(o)){g(this.#d,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let i=E(o);if(d(i.length<=Gc,"blob is too large",`blobs[${s}]`,o),i.length!==Gc){let l=new Uint8Array(Gc);l.set(i),i=l}let a=this.#d.blobToKzgCommitment(i),c=A(this.#d.computeBlobKzgProof(i,a));t.push({data:A(i),commitment:A(a),proof:c}),r.push(p0(1,a))}else{let i=A(o.data),a=A(o.commitment),c=A(o.proof);t.push({data:i,commitment:a,proof:c}),r.push(p0(1,a))}}this.#h=t,this.#u=r}get kzg(){return this.#d}set kzg(e){e==null?this.#d=null:this.#d=Em(e)}get blobWrapperVersion(){return this.#m}set blobWrapperVersion(e){this.#m=e}constructor(){this.#e=null,this.#t=null,this.#n=0,this.#s=Me,this.#i=null,this.#o=null,this.#a=null,this.#r="0x",this.#f=Me,this.#l=Me,this.#p=null,this.#x=null,this.#c=null,this.#u=null,this.#d=null,this.#h=null,this.#b=null,this.#m=null}get hash(){return this.signature==null?null:H(this.#g(!0,!1))}get unsignedHash(){return H(this.unsignedSerialized)}get from(){return this.signature==null?null:Ht(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:He.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}#g(e,t){g(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});let r=e?this.signature:null;switch(this.inferType()){case 0:return Tm(this,r);case 1:return Rm(this,r);case 2:return Cm(this,r);case 3:return Um(this,r,t?this.blobs:null);case 4:return Dm(this,r)}g(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#g(!0,!0)}get unsignedSerialized(){return this.#g(!1,!1)}inferType(){let e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){let e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=this.#c!=null||this.#u;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&g(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),g(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),g(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});let o=[];return this.type!=null?o.push(this.type):this.authorizationList&&this.authorizationList.length?o.push(4):t?o.push(2):e?(o.push(1),r||o.push(0)):r?(o.push(1),o.push(2)):(s&&this.to||(o.push(0),o.push(1),o.push(2)),o.push(3)),o.sort(),o}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return n.from(this)}toJSON(){let e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[Am](){return this.toString()}toString(){let e=[],t=s=>{let o=this[s];typeof o=="string"&&(o=JSON.stringify(o)),e.push(`${s}: ${o}`)};this.type&&t("type"),t("to"),t("data"),t("nonce"),t("gasLimit"),t("value"),this.chainId!=null&&t("chainId"),this.signature&&(t("from"),e.push(`signature: ${this.signature.toString()}`));let r=this.authorizationList;if(r){let s=[];for(let o of r){let i=[];i.push(`address: ${JSON.stringify(o.address)}`),o.nonce!=null&&i.push(`nonce: ${o.nonce}`),o.chainId!=null&&i.push(`chainId: ${o.chainId}`),o.signature&&i.push(`signature: ${o.signature.toString()}`),s.push(`Authorization { ${i.join(", ")} }`)}e.push(`authorizations: [ ${s.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new n;if(typeof e=="string"){let r=E(e);if(r[0]>=127)return n.from(Pm(r));switch(r[0]){case 1:return n.from(Bm(r));case 2:return n.from(vm(r));case 3:return n.from(Sm(r));case 4:return n.from(Om(r))}g(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}let t=new n;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=Ce.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobWrapperVersion!=null&&(t.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(d(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),d(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(d(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),d(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}};function Ns(n){return d(typeof n.address=="string","invalid address for hashAuthorization","auth.address",n),H(M(["0x05",je([n.chainId!=null?ee(n.chainId):"0x",D(n.address),n.nonce!=null?ee(n.nonce):"0x"])]))}function Kc(n,e){return Ht(Ns(n),e)}function Ke(n){return H(ae(n))}var Lm="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",x0=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),m0=4;function Mm(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),s=1,o=[0,1];for(let T=1;T<r;T++)o.push(s+=t());let i=t(),a=e;e+=i;let c=0,l=0;function u(){return c==0&&(l=l<<8|n[e++],c=8),l>>--c&1}let f=31,h=2**f,p=h>>>1,b=p>>1,m=h-1,y=0;for(let T=0;T<f;T++)y=y<<1|u();let w=[],P=0,N=h;for(;;){let T=Math.floor(((y-P+1)*s-1)/N),C=0,S=r;for(;S-C>1;){let G=C+S>>>1;T<o[G]?S=G:C=G}if(C==0)break;w.push(C);let R=P+Math.floor(N*o[C]/s),z=P+Math.floor(N*o[C+1]/s)-1;for(;!((R^z)&p);)y=y<<1&m|u(),R=R<<1&m,z=z<<1&m|1;for(;R&~z&b;)y=y&p|y<<1&m>>>1|u(),R=R<<1^p,z=(z^p)<<1|p|1;P=R,N=1+z-R}let L=r-4;return w.map(T=>{switch(T-L){case 3:return L+65792+(n[a++]<<16|n[a++]<<8|n[a++]);case 2:return L+256+(n[a++]<<8|n[a++]);case 1:return L+n[a++];default:return T-1}})}function Fm(n){let e=0;return()=>n[e++]}function w0(n){return Fm(Mm(_m(n)))}function _m(n){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,o)=>e[s.charCodeAt(0)]=o);let t=n.length,r=new Uint8Array(6*t>>3);for(let s=0,o=0,i=0,a=0;s<t;s++)a=a<<6|e[n.charCodeAt(s)],i+=6,i>=8&&(r[o++]=a>>(i-=8));return r}function Hm(n){return n&1?~n>>1:n>>1}function Gm(n,e){let t=Array(n);for(let r=0,s=0;r<n;r++)t[r]=s+=Hm(e());return t}function wo(n,e=0){let t=[];for(;;){let r=n(),s=n();if(!s)break;e+=r;for(let o=0;o<s;o++)t.push(e+o);e+=s+1}return t}function A0(n){return Ao(()=>{let e=wo(n);if(e.length)return e})}function E0(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(Km(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(Wm(t,n))}return e.flat()}function Ao(n){let e=[];for(;;){let t=n(e.length);if(!t)break;e.push(t)}return e}function k0(n,e,t){let r=Array(n).fill().map(()=>[]);for(let s=0;s<e;s++)Gm(n,t).forEach((o,i)=>r[i].push(o));return r}function Km(n,e){let t=1+e(),r=e(),s=Ao(e);return k0(s.length,1+n,e).flatMap((i,a)=>{let[c,...l]=i;return Array(s[a]).fill().map((u,f)=>{let h=f*r;return[c+f*t,l.map(p=>p+h)]})})}function Wm(n,e){let t=1+e();return k0(t,1+n,e).map(s=>[s[0],s.slice(1)])}function Vm(n){let e=[],t=wo(n);return s(r([]),[]),e;function r(o){let i=n(),a=Ao(()=>{let c=wo(n).map(l=>t[l]);if(c.length)return r(c)});return{S:i,B:a,Q:o}}function s({S:o,B:i},a,c){if(!(o&4&&c===a[a.length-1])){o&2&&(c=a[a.length-1]),o&1&&e.push(a);for(let l of i)for(let u of l.Q)s(l,[...a,u],c)}}}function zm(n){return n.toString(16).toUpperCase().padStart(2,"0")}function N0(n){return`{${zm(n)}}`}function Qm(n){let e=[];for(let t=0,r=n.length;t<r;){let s=n.codePointAt(t);t+=s<65536?1:2,e.push(s)}return e}function Ts(n){let t=n.length;if(t<4096)return String.fromCodePoint(...n);let r=[];for(let s=0;s<t;)r.push(String.fromCodePoint(...n.slice(s,s+=4096)));return r.join("")}function Jm(n,e){let t=n.length,r=t-e.length;for(let s=0;r==0&&s<t;s++)r=n[s]-e[s];return r}var jm="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",Eo=44032,Ji=4352,ji=4449,qi=4519,I0=19,P0=21,vs=28,$i=P0*vs,qm=I0*$i,$m=Eo+qm,Ym=Ji+I0,Zm=ji+P0,Xm=qi+vs;function bo(n){return n>>24&255}function T0(n){return n&16777215}var Vc,g0,zc,Qi;function eg(){let n=w0(jm);Vc=new Map(A0(n).flatMap((e,t)=>e.map(r=>[r,t+1<<24]))),g0=new Set(wo(n)),zc=new Map,Qi=new Map;for(let[e,t]of E0(n)){if(!g0.has(e)&&t.length==2){let[r,s]=t,o=Qi.get(r);o||(o=new Map,Qi.set(r,o)),o.set(s,e)}zc.set(e,t.reverse())}}function v0(n){return n>=Eo&&n<$m}function tg(n,e){if(n>=Ji&&n<Ym&&e>=ji&&e<Zm)return Eo+(n-Ji)*$i+(e-ji)*vs;if(v0(n)&&e>qi&&e<Xm&&(n-Eo)%vs==0)return n+(e-qi);{let t=Qi.get(n);return t&&(t=t.get(e),t)?t:-1}}function C0(n){Vc||eg();let e=[],t=[],r=!1;function s(o){let i=Vc.get(o);i&&(r=!0,o|=i),e.push(o)}for(let o of n)for(;;){if(o<128)e.push(o);else if(v0(o)){let i=o-Eo,a=i/$i|0,c=i%$i/vs|0,l=i%vs;s(Ji+a),s(ji+c),l>0&&s(qi+l)}else{let i=zc.get(o);i?t.push(...i):s(o)}if(!t.length)break;o=t.pop()}if(r&&e.length>1){let o=bo(e[0]);for(let i=1;i<e.length;i++){let a=bo(e[i]);if(a==0||o<=a){o=a;continue}let c=i-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(o=bo(e[--c]),o<=a))break}o=bo(e[i])}}return e}function rg(n){let e=[],t=[],r=-1,s=0;for(let o of n){let i=bo(o),a=T0(o);if(r==-1)i==0?r=a:e.push(a);else if(s>0&&s>=i)i==0?(e.push(r,...t),t.length=0,r=a):t.push(a),s=i;else{let c=tg(r,a);c>=0?r=c:s==0&&i==0?(e.push(r),r=a):(t.push(a),s=i)}}return r>=0&&e.push(r,...t),e}function B0(n){return C0(n).map(T0)}function ng(n){return rg(C0(n))}var b0=45;var R0=".",S0=65039,U0=1,Yi=n=>Array.from(n);function ko(n,e){return n.P.has(e)||n.Q.has(e)}var Qc=class extends Array{get is_emoji(){return!0}},Jc,O0,Rn,jc,D0,sg,Ps,Wc,Is,Bn,y0,qc;function $c(){if(Jc)return;let n=w0(Lm),e=()=>wo(n),t=()=>new Set(e()),r=(u,f)=>f.forEach(h=>u.add(h));Jc=new Map(E0(n)),O0=t(),Rn=e(),jc=new Set(e().map(u=>Rn[u])),Rn=new Set(Rn),D0=t(),sg=t();let s=A0(n),o=n(),i=()=>{let u=new Set;return e().forEach(f=>r(u,s[f])),r(u,e()),u};Ps=Ao(u=>{let f=Ao(n).map(h=>h+96);if(f.length){let h=u>=o;f[0]-=32,f=Ts(f),h&&(f=`Restricted[${f}]`);let p=i(),b=i(),m=!n();return{N:f,P:p,Q:b,M:m,R:h}}}),Wc=t(),Is=new Map;let a=e().concat(Yi(Wc)).sort((u,f)=>u-f);a.forEach((u,f)=>{let h=n(),p=a[f]=h?a[f-h]:{V:[],M:new Map};p.V.push(u),Wc.has(u)||Is.set(u,p)});for(let{V:u,M:f}of new Set(Is.values())){let h=[];for(let b of u){let m=Ps.filter(w=>ko(w,b)),y=h.find(({G:w})=>m.some(P=>w.has(P)));y||(y={G:new Set,V:[]},h.push(y)),y.V.push(b),r(y.G,m)}let p=h.flatMap(b=>Yi(b.G));for(let{G:b,V:m}of h){let y=new Set(p.filter(w=>!b.has(w)));for(let w of m)f.set(w,y)}}Bn=new Set;let c=new Set,l=u=>Bn.has(u)?c.add(u):Bn.add(u);for(let u of Ps){for(let f of u.P)l(f);for(let f of u.Q)l(f)}for(let u of Bn)!Is.has(u)&&!c.has(u)&&Is.set(u,U0);r(Bn,B0(Bn)),y0=Vm(n).map(u=>Qc.from(u)).sort(Jm),qc=new Map;for(let u of y0){let f=[qc];for(let h of u){let p=f.map(b=>{let m=b.get(h);return m||(m=new Map,b.set(h,m)),m});h===S0?f.push(...p):f=p}for(let h of f)h.V=u}}function Yc(n){return(L0(n)?"":`${Zc(Zi([n]))} `)+N0(n)}function Zc(n){return`"${n}"\u200E`}function og(n){if(n.length>=4&&n[2]==b0&&n[3]==b0)throw new Error(`invalid label extension: "${Ts(n.slice(0,4))}"`)}function ig(n){for(let t=n.lastIndexOf(95);t>0;)if(n[--t]!==95)throw new Error("underscore allowed only at start")}function ag(n){let e=n[0],t=x0.get(e);if(t)throw yo(`leading ${t}`);let r=n.length,s=-1;for(let o=1;o<r;o++){e=n[o];let i=x0.get(e);if(i){if(s==o)throw yo(`${t} + ${i}`);s=o+1,t=i}}if(s==r)throw yo(`trailing ${t}`)}function Zi(n,e=1/0,t=N0){let r=[];cg(n[0])&&r.push("\u25CC"),n.length>e&&(e>>=1,n=[...n.slice(0,e),8230,...n.slice(-e)]);let s=0,o=n.length;for(let i=0;i<o;i++){let a=n[i];L0(a)&&(r.push(Ts(n.slice(s,i))),r.push(t(a)),s=i+1)}return r.push(Ts(n.slice(s,o))),r.join("")}function cg(n){return $c(),Rn.has(n)}function L0(n){return $c(),D0.has(n)}function M0(n){return dg(lg(n,ng,xg))}function lg(n,e,t){if(!n)return[];$c();let r=0;return n.split(R0).map(s=>{let o=Qm(s),i={input:o,offset:r};r+=o.length+1;try{let a=i.tokens=pg(o,e,t),c=a.length,l;if(!c)throw new Error("empty label");let u=i.output=a.flat();if(ig(u),!(i.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))og(u),l="ASCII";else{let h=a.flatMap(p=>p.is_emoji?[]:p);if(!h.length)l="Emoji";else{if(Rn.has(u[0]))throw yo("leading combining mark");for(let m=1;m<c;m++){let y=a[m];if(!y.is_emoji&&Rn.has(y[0]))throw yo(`emoji + combining mark: "${Ts(a[m-1])} + ${Zi([y[0]])}"`)}ag(u);let p=Yi(new Set(h)),[b]=fg(p);hg(b,h),ug(b,p),l=b.N}}i.type=l}catch(a){i.error=a}return i})}function ug(n,e){let t,r=[];for(let s of e){let o=Is.get(s);if(o===U0)return;if(o){let i=o.M.get(s);if(t=t?t.filter(a=>i.has(a)):Yi(i),!t.length)return}else r.push(s)}if(t){for(let s of t)if(r.every(o=>ko(s,o)))throw new Error(`whole-script confusable: ${n.N}/${s.N}`)}}function fg(n){let e=Ps;for(let t of n){let r=e.filter(s=>ko(s,t));if(!r.length)throw Ps.some(s=>ko(s,t))?_0(e[0],t):F0(t);if(e=r,r.length==1)break}return e}function dg(n){return n.map(({input:e,error:t,output:r})=>{if(t){let s=t.message;throw new Error(n.length==1?s:`Invalid label ${Zc(Zi(e,63))}: ${s}`)}return Ts(r)}).join(R0)}function F0(n){return new Error(`disallowed character: ${Yc(n)}`)}function _0(n,e){let t=Yc(e),r=Ps.find(s=>s.P.has(e));return r&&(t=`${r.N} ${t}`),new Error(`illegal mixture: ${n.N} + ${t}`)}function yo(n){return new Error(`illegal placement: ${n}`)}function hg(n,e){for(let t of e)if(!ko(n,t))throw _0(n,t);if(n.M){let t=B0(e);for(let r=1,s=t.length;r<s;r++)if(jc.has(t[r])){let o=r+1;for(let i;o<s&&jc.has(i=t[o]);o++)for(let a=r;a<o;a++)if(t[a]==i)throw new Error(`duplicate non-spacing marks: ${Yc(i)}`);if(o-r>m0)throw new Error(`excessive non-spacing marks: ${Zc(Zi(t.slice(r-1,o)))} (${o-r}/${m0})`);r=o}}}function pg(n,e,t){let r=[],s=[];for(n=n.slice().reverse();n.length;){let o=mg(n);if(o)s.length&&(r.push(e(s)),s=[]),r.push(t(o));else{let i=n.pop();if(Bn.has(i))s.push(i);else{let a=Jc.get(i);if(a)s.push(...a);else if(!O0.has(i))throw F0(i)}}}return s.length&&r.push(e(s)),r}function xg(n){return n.filter(e=>e!=S0)}function mg(n,e){let t=qc,r,s=n.length;for(;s&&(t=t.get(n[--s]),!!t);){let{V:o}=t;o&&(r=o,e&&e.push(...n.slice(s).reverse()),n.length=s)}return r}var G0=new Uint8Array(32);G0.fill(0);function H0(n){return d(n.length!==0,"invalid ENS name; empty component","comp",n),n}function Xc(n){let e=ae(Xi(n)),t=[];if(n.length===0)return t;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(t.push(H0(e.slice(r,s))),r=s+1);return d(r<e.length,"invalid ENS name; empty component","name",n),t.push(H0(e.slice(r))),t}function Xi(n){try{if(n.length===0)throw new Error("empty label");return M0(n)}catch(e){d(!1,`invalid ENS name (${e.message})`,"name",n)}}function el(n){try{return Xc(n).length!==0}catch{}return!1}function Wr(n){d(typeof n=="string","invalid ENS name; not a string","name",n),d(n.length,"invalid ENS name (empty label)","name",n);let e=G0,t=Xc(n);for(;t.length;)e=H(M([e,H(t.pop())]));return A(e)}function No(n,e){let t=e??63;return d(t<=255,"DNS encoded label cannot exceed 255","length",t),A(M(Xc(n).map(r=>{d(r.length<=t,`label ${JSON.stringify(n)} exceeds ${t} bytes`,"name",n);let s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}function Cs(n){return typeof n=="string"&&(n=ae(n)),H(M([ae(mo),ae(String(n.length)),n]))}function tl(n,e){let t=Cs(n);return Ht(t,e)}var gg=new RegExp("^bytes([0-9]+)$"),bg=new RegExp("^(u?int)([0-9]*)$"),yg=new RegExp("^(.*)\\[([0-9]*)\\]$");function K0(n,e,t){switch(n){case"address":return t?E(Te(e,32)):E(D(e));case"string":return ae(e);case"bytes":return E(e);case"bool":return e=e?"0x01":"0x00",t?E(Te(e,32)):E(e)}let r=n.match(bg);if(r){let s=r[1]==="int",o=parseInt(r[2]||"256");return d((!r[2]||r[2]===String(o))&&o%8===0&&o!==0&&o<=256,"invalid number type","type",n),t&&(o=256),s&&(e=ir(e,o)),E(Te(ee(e),o/8))}if(r=n.match(gg),r){let s=parseInt(r[1]);return d(String(s)===r[1]&&s!==0&&s<=32,"invalid bytes type","type",n),d(nt(e)===s,`invalid value for ${n}`,"value",e),t?E(sr(e,32)):e}if(r=n.match(yg),r&&Array.isArray(e)){let s=r[1],o=parseInt(r[2]||String(e.length));d(o===e.length,`invalid array length for ${n}`,"value",e);let i=[];return e.forEach(function(a){i.push(K0(s,a,!0))}),E(M(i))}d(!1,"invalid type","type",n)}function Io(n,e){d(n.length===e.length,"wrong number of values; expected ${ types.length }","values",e);let t=[];return n.forEach(function(r,s){t.push(K0(r,e[s]))}),A(M(t))}function rl(n,e){return H(Io(n,e))}function nl(n,e){return ve(Io(n,e))}var Q0=new Uint8Array(32);Q0.fill(0);var wg=BigInt(-1),J0=BigInt(0),j0=BigInt(1),Ag=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Eg(n){let e=E(n),t=e.length%32;return t?M([e,Q0.slice(t)]):A(e)}var kg=Le(j0,32),Ng=Le(J0,32),W0={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},sl=["name","version","chainId","verifyingContract","salt"];function V0(n){return function(e){return d(typeof e=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}var Ig={name:V0("name"),version:V0("version"),chainId:function(n){let e=I(n,"domain.chainId");return d(e>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(e)?Number(e):Ue(e)},verifyingContract:function(n){try{return D(n).toLowerCase()}catch{}d(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){let e=E(n,"domain.salt");return d(e.length===32,'invalid domain value "salt"',"domain.salt",n),A(e)}};function ol(n){{let e=n.match(/^(u?)int(\d+)$/);if(e){let t=e[1]==="",r=parseInt(e[2]);d(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",n);let s=ct(Ag,t?r-1:r),o=t?(s+j0)*wg:J0;return function(i){let a=I(i,"value");return d(a>=o&&a<=s,`value out-of-bounds for ${n}`,"value",a),Le(t?ir(a,256):a,32)}}}{let e=n.match(/^bytes(\d+)$/);if(e){let t=parseInt(e[1]);return d(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",n),function(r){let s=E(r);return d(s.length===t,`invalid length for ${n}`,"value",r),Eg(r)}}}switch(n){case"address":return function(e){return Te(D(e),32)};case"bool":return function(e){return e?kg:Ng};case"bytes":return function(e){return H(e)};case"string":return function(e){return Ke(e)}}return null}function z0(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}function ea(n){let e=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:n}}var mt=class n{primaryType;#e;get types(){return JSON.parse(this.#e)}#t;#r;constructor(e){this.#t=new Map,this.#r=new Map;let t=new Map,r=new Map,s=new Map,o={};Object.keys(e).forEach(c=>{o[c]=e[c].map(({name:l,type:u})=>{let{base:f,index:h}=ea(u);return f==="int"&&!e.int&&(f="int256"),f==="uint"&&!e.uint&&(f="uint256"),{name:l,type:f+(h||"")}}),t.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),this.#e=JSON.stringify(o);for(let c in o){let l=new Set;for(let u of o[c]){d(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);let f=ea(u.type).base;d(f!==c,`circular type reference to ${JSON.stringify(f)}`,"types",e),!ol(f)&&(d(r.has(f),`unknown type ${JSON.stringify(f)}`,"types",e),r.get(f).push(c),t.get(c).add(f))}}let i=Array.from(r.keys()).filter(c=>r.get(c).length===0);d(i.length!==0,"missing primary type","types",e),d(i.length===1,`ambiguous primary types or unused types: ${i.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),k(this,{primaryType:i[0]});function a(c,l){d(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(let u of t.get(c))if(r.has(u)){a(u,l);for(let f of l)s.get(f).add(u)}l.delete(c)}a(this.primaryType,new Set);for(let[c,l]of s){let u=Array.from(l);u.sort(),this.#t.set(c,z0(c,o[c])+u.map(f=>z0(f,o[f])).join(""))}}getEncoder(e){let t=this.#r.get(e);return t||(t=this.#n(e),this.#r.set(e,t)),t}#n(e){{let s=ol(e);if(s)return s}let t=ea(e).array;if(t){let s=t.prefix,o=this.getEncoder(s);return i=>{d(t.count===-1||t.count===i.length,`array length mismatch; expected length ${t.count}`,"value",i);let a=i.map(o);return this.#t.has(s)&&(a=a.map(H)),H(M(a))}}let r=this.types[e];if(r){let s=Ke(this.#t.get(e));return o=>{let i=r.map(({name:a,type:c})=>{let l=this.getEncoder(c)(o[a]);return this.#t.has(c)?H(l):l});return i.unshift(s),M(i)}}d(!1,`unknown type: ${e}`,"type",e)}encodeType(e){let t=this.#t.get(e);return d(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return H(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(ol(e))return r(e,t);let s=ea(e).array;if(s)return d(s.count===-1||s.count===t.length,`array length mismatch; expected length ${s.count}`,"value",t),t.map(i=>this._visit(s.prefix,i,r));let o=this.types[e];if(o)return o.reduce((i,{name:a,type:c})=>(i[a]=this._visit(c,t[a],r),i),{});d(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new n(e)}static getPrimaryType(e){return n.from(e).primaryType}static hashStruct(e,t,r){return n.from(t).hashStruct(e,r)}static hashDomain(e){let t=[];for(let r in e){if(e[r]==null)continue;let s=W0[r];d(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:s})}return t.sort((r,s)=>sl.indexOf(r.name)-sl.indexOf(s.name)),n.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return M(["0x1901",n.hashDomain(e),n.from(t).hash(r)])}static hash(e,t,r){return H(n.encode(e,t,r))}static async resolveNames(e,t,r,s){e=Object.assign({},e);for(let a in e)e[a]==null&&delete e[a];let o={};e.verifyingContract&&!W(e.verifyingContract,20)&&(o[e.verifyingContract]="0x");let i=n.from(t);i.visit(r,(a,c)=>(a==="address"&&!W(c,20)&&(o[c]="0x"),c));for(let a in o)o[a]=await s(a);return e.verifyingContract&&o[e.verifyingContract]&&(e.verifyingContract=o[e.verifyingContract]),r=i.visit(r,(a,c)=>a==="address"&&o[c]?o[c]:c),{domain:e,value:r}}static getPayload(e,t,r){n.hashDomain(e);let s={},o=[];sl.forEach(c=>{let l=e[c];l!=null&&(s[c]=Ig[c](l),o.push({name:c,type:W0[c]}))});let i=n.from(t);t=i.types;let a=Object.assign({},t);return d(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),a.EIP712Domain=o,i.encode(r),{types:a,domain:s,primaryType:i.primaryType,message:i.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return A(E(l));if(c.match(/^u?int/))return I(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return d(typeof l=="string","invalid string","value",l),l}d(!1,"unsupported type","type",c)})}}};function il(n,e,t,r){return Ht(mt.hash(n,e,t),r)}function et(n){let e=new Set;return n.forEach(t=>e.add(t)),Object.freeze(e)}var Pg="external public payable override",Tg=et(Pg.split(" ")),sd="constant external internal payable private public pure view override",vg=et(sd.split(" ")),od="constructor error event fallback function receive struct",id=et(od.split(" ")),ad="calldata memory storage payable indexed",Cg=et(ad.split(" ")),Bg="tuple returns",Rg=[od,ad,Bg,sd].join(" "),Sg=et(Rg.split(" ")),Ug={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Og=new RegExp("^(\\s*)"),Dg=new RegExp("^([0-9]+)"),Lg=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),cd=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),ld=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$"),Gt=class n{#e;#t;get offset(){return this.#e}get length(){return this.#t.length-this.#e}constructor(e){this.#e=0,this.#t=e.slice()}clone(){return new n(this.#t)}reset(){this.#e=0}#r(e=0,t=0){return new n(this.#t.slice(e,t).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))}popKeyword(e){let t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){let t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){let e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");let t=this.#r(this.#e+1,e.match+1);return this.#e=e.match+1,t}popParams(){let e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");let t=[];for(;this.#e<e.match-1;){let r=this.peek().linkNext;t.push(this.#r(this.#e+1,r)),this.#e=r}return this.#e=e.match+1,t}peek(){if(this.#e>=this.#t.length)throw new Error("out-of-bounds");return this.#t[this.#e]}peekKeyword(e){let t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;let t=this.peek();return t.type===e?t.text:null}pop(){let e=this.peek();return this.#e++,e}toString(){let e=[];for(let t=this.#e;t<this.#t.length;t++){let r=this.#t[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};function zr(n){let e=[],t=i=>{let a=o<n.length?JSON.stringify(n[o]):"$EOI";throw new Error(`invalid token ${a} at ${o}: ${i}`)},r=[],s=[],o=0;for(;o<n.length;){let i=n.substring(o),a=i.match(Og);a&&(o+=a[1].length,i=n.substring(o));let c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:o,value:-1};e.push(c);let l=Ug[i[0]]||"";if(l){if(c.type=l,c.text=i[0],o++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&t("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){let f=e.pop().text;u=f+u,e[e.length-1].value=U(f)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=i.match(Lg),a){if(c.text=a[1],o+=c.text.length,Sg.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(ld)){c.type="TYPE";continue}c.type="ID";continue}if(a=i.match(Dg),a){c.text=a[1],c.type="NUMBER",o+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(i[0])} at position ${o}`)}return new Gt(e.map(i=>Object.freeze(i)))}function q0(n,e){let t=[];for(let r in e.keys())n.has(r)&&t.push(r);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function ta(n,e){if(e.peekKeyword(id)){let t=e.pop().text;if(t!==n)throw new Error(`expected ${n}, got ${t}`)}return e.popType("ID")}function xr(n,e){let t=new Set;for(;;){let r=n.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(n.pop(),t.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);t.add(r)}return Object.freeze(t)}function ud(n){let e=xr(n,vg);return q0(e,et("constant payable nonpayable".split(" "))),q0(e,et("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function pr(n,e){return n.popParams().map(t=>Ie.from(t,e))}function fd(n){if(n.peekType("AT")){if(n.pop(),n.peekType("NUMBER"))return I(n.pop().text);throw new Error("invalid gas")}return null}function Sn(n){if(n.length)throw new Error(`unexpected tokens at offset ${n.offset}: ${n.toString()}`)}var Mg=new RegExp(/^(.*)\[([0-9]*)\]$/);function $0(n){let e=n.match(ld);if(d(e,"invalid type","type",n),n==="uint")return"uint256";if(n==="int")return"int256";if(e[2]){let t=parseInt(e[2]);d(t!==0&&t<=32,"invalid bytes length","type",n)}else if(e[3]){let t=parseInt(e[3]);d(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",n)}return n}var Ee={},st=Symbol.for("_ethers_internal"),Y0="_ParamTypeInternal",Z0="_ErrorInternal",X0="_EventInternal",ed="_ConstructorInternal",td="_FallbackInternal",rd="_FunctionInternal",nd="_StructInternal",Ie=class n{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,r,s,o,i,a,c){if(Fe(e,Ee,"ParamType"),Object.defineProperty(this,st,{value:Y0}),i&&(i=Object.freeze(i.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(i==null)throw new Error("")}else if(i!=null)throw new Error("");k(this,{name:t,type:r,baseType:s,indexed:o,components:i,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){let r=this.name||"";if(this.isArray()){let o=JSON.parse(this.arrayChildren.format("json"));return o.name=r,o.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(o)}let s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(o=>JSON.parse(o.format(e)))),JSON.stringify(s)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");let r=this;return e.map(s=>r.arrayChildren.walk(s,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");let r=this;return e.map((s,o)=>r.components[o].walk(s,t))}return t(this.type,e)}#e(e,t,r,s){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");let i=this.arrayChildren,a=t.slice();a.forEach((c,l)=>{i.#e(e,c,r,u=>{a[l]=u})}),s(a);return}if(this.isTuple()){let i=this.components,a;if(Array.isArray(t))a=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");a=i.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in t))throw new Error(`missing value for component ${c.name}`);return t[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{i[l].#e(e,c,r,u=>{a[l]=u})}),s(a);return}let o=r(this.type,t);o.then?e.push(async function(){s(await o)}()):s(o)}async walkAsync(e,t){let r=[],s=[e];return this.#e(r,e,t,o=>{s[0]=o}),r.length&&await Promise.all(r),s[0]}static from(e,t){if(n.isParamType(e))return e;if(typeof e=="string")try{return n.from(zr(e),t)}catch{d(!1,"invalid param type","obj",e)}else if(e instanceof Gt){let a="",c="",l=null;xr(e,et(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(m=>n.from(m)),a=`tuple(${l.map(m=>m.format()).join(",")})`):(a=$0(e.popType("TYPE")),c=a);let u=null,f=null;for(;e.length&&e.peekType("BRACKET");){let m=e.pop();u=new n(Ee,"",a,c,null,l,f,u),f=m.value,a+=m.text,c="array",l=null}let h=null;if(xr(e,Cg).has("indexed")){if(!t)throw new Error("");h=!0}let b=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new n(Ee,b,a,c,h,l,f,u)}let r=e.name;d(!r||typeof r=="string"&&r.match(cd),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(d(t,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let o=e.type,i=o.match(Mg);if(i){let a=parseInt(i[2]||"-1"),c=n.from({type:i[1],components:e.components});return new n(Ee,r||"",o,"array",s,null,a,c)}if(o==="tuple"||o.startsWith("tuple(")||o.startsWith("(")){let a=e.components!=null?e.components.map(l=>n.from(l)):null;return new n(Ee,r||"",o,"tuple",s,a,null,null)}return o=$0(e.type),new n(Ee,r||"",o,o,s,null,null,null)}static isParamType(e){return e&&e[st]===Y0}},qt=class n{type;inputs;constructor(e,t,r){Fe(e,Ee,"Fragment"),r=Object.freeze(r.slice()),k(this,{type:t,inputs:r})}static from(e){if(typeof e=="string"){try{n.from(JSON.parse(e))}catch{}return n.from(zr(e))}if(e instanceof Gt)switch(e.peekKeyword(id)){case"constructor":return Jt.from(e);case"error":return tt.from(e);case"event":return Qt.from(e);case"fallback":case"receive":return Un.from(e);case"function":return jt.from(e);case"struct":return Vr.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Jt.from(e);case"error":return tt.from(e);case"event":return Qt.from(e);case"fallback":case"receive":return Un.from(e);case"function":return jt.from(e);case"struct":return Vr.from(e)}g(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}d(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Jt.isFragment(e)}static isError(e){return tt.isFragment(e)}static isEvent(e){return Qt.isFragment(e)}static isFunction(e){return jt.isFragment(e)}static isStruct(e){return Vr.isFragment(e)}},mr=class extends qt{name;constructor(e,t,r,s){super(e,t,s),d(typeof r=="string"&&r.match(cd),"invalid identifier","name",r),s=Object.freeze(s.slice()),k(this,{name:r})}};function Po(n,e){return"("+e.map(t=>t.format(n)).join(n==="full"?", ":",")+")"}var tt=class n extends mr{constructor(e,t,r){super(e,"error",t,r),Object.defineProperty(this,st,{value:Z0})}get selector(){return Ke(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+Po(e,this.inputs)),t.join(" ")}static from(e){if(n.isFragment(e))return e;if(typeof e=="string")return n.from(zr(e));if(e instanceof Gt){let t=ta("error",e),r=pr(e);return Sn(e),new n(Ee,t,r)}return new n(Ee,e.name,e.inputs?e.inputs.map(Ie.from):[])}static isFragment(e){return e&&e[st]===Z0}},Qt=class n extends mr{anonymous;constructor(e,t,r,s){super(e,"event",t,r),Object.defineProperty(this,st,{value:X0}),k(this,{anonymous:s})}get topicHash(){return Ke(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t=[];return e!=="sighash"&&t.push("event"),t.push(this.name+Po(e,this.inputs)),e!=="sighash"&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return t=(t||[]).map(s=>Ie.from(s)),new n(Ee,e,t,!1).topicHash}static from(e){if(n.isFragment(e))return e;if(typeof e=="string")try{return n.from(zr(e))}catch{d(!1,"invalid event fragment","obj",e)}else if(e instanceof Gt){let t=ta("event",e),r=pr(e,!0),s=!!xr(e,et(["anonymous"])).has("anonymous");return Sn(e),new n(Ee,t,r,s)}return new n(Ee,e.name,e.inputs?e.inputs.map(t=>Ie.from(t,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[st]===X0}},Jt=class n extends qt{payable;gas;constructor(e,t,r,s,o){super(e,t,r),Object.defineProperty(this,st,{value:ed}),k(this,{payable:s,gas:o})}format(e){if(g(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t=[`constructor${Po(e,this.inputs)}`];return this.payable&&t.push("payable"),this.gas!=null&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(n.isFragment(e))return e;if(typeof e=="string")try{return n.from(zr(e))}catch{d(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Gt){xr(e,et(["constructor"]));let t=pr(e),r=!!xr(e,Tg).has("payable"),s=fd(e);return Sn(e),new n(Ee,"constructor",t,r,s)}return new n(Ee,"constructor",e.inputs?e.inputs.map(Ie.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[st]===ed}},Un=class n extends qt{payable;constructor(e,t,r){super(e,"fallback",t),Object.defineProperty(this,st,{value:td}),k(this,{payable:r})}format(e){let t=this.inputs.length===0?"receive":"fallback";if(e==="json"){let r=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:r})}return`${t}()${this.payable?" payable":""}`}static from(e){if(n.isFragment(e))return e;if(typeof e=="string")try{return n.from(zr(e))}catch{d(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Gt){let t=e.toString(),r=e.peekKeyword(et(["fallback","receive"]));if(d(r,"type must be fallback or receive","obj",t),e.popKeyword(et(["fallback","receive"]))==="receive"){let a=pr(e);return d(a.length===0,"receive cannot have arguments","obj.inputs",a),xr(e,et(["payable"])),Sn(e),new n(Ee,[],!0)}let o=pr(e);o.length?d(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(a=>a.format("minimal")).join(", ")):o=[Ie.from("bytes")];let i=ud(e);if(d(i==="nonpayable"||i==="payable","fallback cannot be constants","obj.stateMutability",i),xr(e,et(["returns"])).has("returns")){let a=pr(e);d(a.length===1&&a[0].type==="bytes","invalid fallback outputs","obj.outputs",a.map(c=>c.format("minimal")).join(", "))}return Sn(e),new n(Ee,o,i==="payable")}if(e.type==="receive")return new n(Ee,[],!0);if(e.type==="fallback"){let t=[Ie.from("bytes")],r=e.stateMutability==="payable";return new n(Ee,t,r)}d(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[st]===td}},jt=class n extends mr{constant;outputs;stateMutability;payable;gas;constructor(e,t,r,s,o,i){super(e,"function",t,s),Object.defineProperty(this,st,{value:rd}),o=Object.freeze(o.slice()),k(this,{constant:r==="view"||r==="pure",gas:i,outputs:o,payable:r==="payable",stateMutability:r})}get selector(){return Ke(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});let t=[];return e!=="sighash"&&t.push("function"),t.push(this.name+Po(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(Po(e,this.outputs))),this.gas!=null&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return t=(t||[]).map(s=>Ie.from(s)),new n(Ee,e,"view",t,[],null).selector}static from(e){if(n.isFragment(e))return e;if(typeof e=="string")try{return n.from(zr(e))}catch{d(!1,"invalid function fragment","obj",e)}else if(e instanceof Gt){let r=ta("function",e),s=pr(e),o=ud(e),i=[];xr(e,et(["returns"])).has("returns")&&(i=pr(e));let a=fd(e);return Sn(e),new n(Ee,r,o,s,i,a)}let t=e.stateMutability;return t==null&&(t="payable",typeof e.constant=="boolean"?(t="view",e.constant||(t="payable",typeof e.payable=="boolean"&&!e.payable&&(t="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(t="nonpayable")),new n(Ee,e.name,t,e.inputs?e.inputs.map(Ie.from):[],e.outputs?e.outputs.map(Ie.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[st]===rd}},Vr=class n extends mr{constructor(e,t,r){super(e,"struct",t,r),Object.defineProperty(this,st,{value:nd})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return n.from(zr(e))}catch{d(!1,"invalid struct fragment","obj",e)}else if(e instanceof Gt){let t=ta("struct",e),r=pr(e);return Sn(e),new n(Ee,t,r)}return new n(Ee,e.name,e.inputs?e.inputs.map(Ie.from):[])}static isFragment(e){return e&&e[st]===nd}};var Kt=new Map;Kt.set(0,"GENERIC_PANIC");Kt.set(1,"ASSERT_FALSE");Kt.set(17,"OVERFLOW");Kt.set(18,"DIVIDE_BY_ZERO");Kt.set(33,"ENUM_RANGE_ERROR");Kt.set(34,"BAD_STORAGE_DATA");Kt.set(49,"STACK_UNDERFLOW");Kt.set(50,"ARRAY_RANGE_ERROR");Kt.set(65,"OUT_OF_MEMORY");Kt.set(81,"UNINITIALIZED_FUNCTION_CALL");var Fg=new RegExp(/^bytes([0-9]*)$/),_g=new RegExp(/^(u?int)([0-9]*)$/),al=null,dd=1024;function Hg(n,e,t,r){let s="missing revert data",o=null,i=null,a=null;if(t){s="execution reverted";let l=E(t);if(t=A(t),l.length===0)s+=" (no data present; likely require(false) occurred",o="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(A(l.slice(0,4))==="0x08c379a0")try{o=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[o]},s+=`: ${JSON.stringify(o)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(A(l.slice(0,4))==="0x4e487b71")try{let u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},o=`Panic due to ${Kt.get(u)||"UNKNOWN"}(${u})`,s+=`: ${o}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}let c={to:e.to?D(e.to):null,data:e.data||"0x"};return e.from&&(c.from=D(e.from)),Q(s,"CALL_EXCEPTION",{action:n,data:t,reason:o,transaction:c,invocation:i,revert:a})}var gt=class n{#e(e){if(e.isArray())return new Di(this.#e(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Tn(e.components.map(r=>this.#e(r)),e.name);switch(e.baseType){case"address":return new Ui(e.name);case"bool":return new Li(e.name);case"string":return new Gi(e.name);case"bytes":return new Mi(e.name);case"":return new _i(e.name)}let t=e.type.match(_g);if(t){let r=parseInt(t[2]||"256");return d(r!==0&&r<=256&&r%8===0,"invalid "+t[1]+" bit length","param",e),new Hi(r/8,t[1]==="int",e.name)}if(t=e.type.match(Fg),t){let r=parseInt(t[1]);return d(r!==0&&r<=32,"invalid bytes length","param",e),new Fi(r,e.name)}d(!1,"invalid type","type",e.type)}getDefaultValue(e){let t=e.map(s=>this.#e(Ie.from(s)));return new Tn(t,"_").defaultValue()}encode(e,t){dn(t.length,e.length,"types/values length mismatch");let r=e.map(i=>this.#e(Ie.from(i))),s=new Tn(r,"_"),o=new bn;return s.encode(o,t),o.data}decode(e,t,r){let s=e.map(i=>this.#e(Ie.from(i)));return new Tn(s,"_").decode(new pi(t,r,dd))}static _setDefaultMaxInflation(e){d(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),dd=e}static defaultAbiCoder(){return al==null&&(al=new n),al}static getBuiltinCallException(e,t,r){return Hg(e,t,r,n.defaultAbiCoder())}};function cl(n){let e=ae(n);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return sr(e,32)}function ll(n){let e=E(n,"bytes");if(e.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(e[31]!==0)throw new Error("invalid bytes32 string - no null terminator");let t=31;for(;e[t-1]===0;)t--;return Ze(e.slice(0,t))}var Bs=class{fragment;name;signature;topic;args;constructor(e,t,r){let s=e.name,o=e.format();k(this,{fragment:e,name:s,signature:o,topic:t,args:r})}},Rs=class{fragment;name;args;signature;selector;value;constructor(e,t,r,s){let o=e.name,i=e.format();k(this,{fragment:e,name:o,args:r,signature:i,selector:t,value:s})}},Ss=class{fragment;name;args;signature;selector;constructor(e,t,r){let s=e.name,o=e.format();k(this,{fragment:e,name:s,args:r,signature:o,selector:t})}},On=class{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){k(this,{hash:e,_isIndexed:!0})}},hd={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},pd={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:n=>`reverted with reason string ${JSON.stringify(n)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:n=>{let e="unknown panic code";return n>=0&&n<=255&&hd[n.toString()]&&(e=hd[n.toString()]),`reverted with panic code 0x${n.toString(16)} (${e})`}}},gr=class n{fragments;deploy;fallback;receive;#e;#t;#r;#n;constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,this.#r=new Map,this.#e=new Map,this.#t=new Map;let r=[];for(let i of t)try{r.push(qt.from(i))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(i)}:`,a.message)}k(this,{fragments:Object.freeze(r)});let s=null,o=!1;this.#n=this.getAbiCoder(),this.fragments.forEach((i,a)=>{let c;switch(i.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}k(this,{deploy:i});return;case"fallback":i.inputs.length===0?o=!0:(d(!s||i.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,i),s=i,o=s.payable);return;case"function":c=this.#r;break;case"event":c=this.#t;break;case"error":c=this.#e;break;default:return}let l=i.format();c.has(l)||c.set(l,i)}),this.deploy||k(this,{deploy:Jt.from("constructor()")}),k(this,{fallback:s,receive:o})}format(e){let t=e?"minimal":"full";return this.fragments.map(s=>s.format(t))}formatJson(){let e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return gt.defaultAbiCoder()}#s(e,t,r){if(W(e)){let o=e.toLowerCase();for(let i of this.#r.values())if(o===i.selector)return i;return null}if(e.indexOf("(")===-1){let o=[];for(let[i,a]of this.#r)i.split("(")[0]===e&&o.push(a);if(t){let i=t.length>0?t[t.length-1]:null,a=t.length,c=!0;de.isTyped(i)&&i.type==="overrides"&&(c=!1,a--);for(let l=o.length-1;l>=0;l--){let u=o[l].inputs.length;u!==a&&(!c||u!==a-1)&&o.splice(l,1)}for(let l=o.length-1;l>=0;l--){let u=o[l].inputs;for(let f=0;f<t.length;f++)if(de.isTyped(t[f])){if(f>=u.length){if(t[f].type==="overrides")continue;o.splice(l,1);break}if(t[f].type!==u[f].baseType){o.splice(l,1);break}}}}if(o.length===1&&t&&t.length!==o[0].inputs.length){let i=t[t.length-1];(i==null||Array.isArray(i)||typeof i!="object")&&o.splice(0,1)}if(o.length===0)return null;if(o.length>1&&r){let i=o.map(a=>JSON.stringify(a.format())).join(", ");d(!1,`ambiguous function description (i.e. matches ${i})`,"key",e)}return o[0]}let s=this.#r.get(jt.from(e).format());return s||null}getFunctionName(e){let t=this.#s(e,null,!1);return d(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#s(e,null,!1)}getFunction(e,t){return this.#s(e,t||null,!0)}forEachFunction(e){let t=Array.from(this.#r.keys());t.sort((r,s)=>r.localeCompare(s));for(let r=0;r<t.length;r++){let s=t[r];e(this.#r.get(s),r)}}#i(e,t,r){if(W(e)){let o=e.toLowerCase();for(let i of this.#t.values())if(o===i.topicHash)return i;return null}if(e.indexOf("(")===-1){let o=[];for(let[i,a]of this.#t)i.split("(")[0]===e&&o.push(a);if(t){for(let i=o.length-1;i>=0;i--)o[i].inputs.length<t.length&&o.splice(i,1);for(let i=o.length-1;i>=0;i--){let a=o[i].inputs;for(let c=0;c<t.length;c++)if(de.isTyped(t[c])&&t[c].type!==a[c].baseType){o.splice(i,1);break}}}if(o.length===0)return null;if(o.length>1&&r){let i=o.map(a=>JSON.stringify(a.format())).join(", ");d(!1,`ambiguous event description (i.e. matches ${i})`,"key",e)}return o[0]}let s=this.#t.get(Qt.from(e).format());return s||null}getEventName(e){let t=this.#i(e,null,!1);return d(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#i(e,null,!1)}getEvent(e,t){return this.#i(e,t||null,!0)}forEachEvent(e){let t=Array.from(this.#t.keys());t.sort((r,s)=>r.localeCompare(s));for(let r=0;r<t.length;r++){let s=t[r];e(this.#t.get(s),r)}}getError(e,t){if(W(e)){let s=e.toLowerCase();if(pd[s])return tt.from(pd[s].signature);for(let o of this.#e.values())if(s===o.selector)return o;return null}if(e.indexOf("(")===-1){let s=[];for(let[o,i]of this.#e)o.split("(")[0]===e&&s.push(i);if(s.length===0)return e==="Error"?tt.from("error Error(string)"):e==="Panic"?tt.from("error Panic(uint256)"):null;if(s.length>1){let o=s.map(i=>JSON.stringify(i.format())).join(", ");d(!1,`ambiguous error description (i.e. ${o})`,"name",e)}return s[0]}if(e=tt.from(e).format(),e==="Error(string)")return tt.from("error Error(string)");if(e==="Panic(uint256)")return tt.from("error Panic(uint256)");let r=this.#e.get(e);return r||null}forEachError(e){let t=Array.from(this.#e.keys());t.sort((r,s)=>r.localeCompare(s));for(let r=0;r<t.length;r++){let s=t[r];e(this.#e.get(s),r)}}_decodeParams(e,t){return this.#n.decode(e,t)}_encodeParams(e,t){return this.#n.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){let r=this.getError(e);d(r,"unknown error","fragment",e),e=r}return d(re(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,re(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){let r=this.getError(e);d(r,"unknown error","fragment",e),e=r}return M([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){let r=this.getFunction(e);d(r,"unknown function","fragment",e),e=r}return d(re(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,re(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){let r=this.getFunction(e);d(r,"unknown function","fragment",e),e=r}return M([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){let o=this.getFunction(e);d(o,"unknown function","fragment",e),e=o}let r="invalid length for result data",s=ge(t);if(s.length%32===0)try{return this.#n.decode(e.outputs,s)}catch{r="could not decode result data"}g(!1,r,"BAD_DATA",{value:A(s),info:{method:e.name,signature:e.format()}})}makeError(e,t){let r=E(e,"data"),s=gt.getBuiltinCallException("call",t,r);if(s.message.startsWith("execution reverted (unknown custom error)")){let a=A(r.slice(0,4)),c=this.getError(a);if(c)try{let l=this.#n.decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}let i=this.parseTransaction(t);return i&&(s.invocation={method:i.name,signature:i.signature,args:i.args}),s}encodeFunctionResult(e,t){if(typeof e=="string"){let r=this.getFunction(e);d(r,"unknown function","fragment",e),e=r}return A(this.#n.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){let o=this.getEvent(e);d(o,"unknown event","eventFragment",e),e=o}g(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});let r=[];e.anonymous||r.push(e.topicHash);let s=(o,i)=>o.type==="string"?Ke(i):o.type==="bytes"?H(A(i)):(o.type==="bool"&&typeof i=="boolean"?i=i?"0x01":"0x00":o.type.match(/^u?int/)?i=Le(i):o.type.match(/^bytes/)?i=sr(i,32):o.type==="address"&&this.#n.encode(["address"],[i]),Te(A(i),32));for(t.forEach((o,i)=>{let a=e.inputs[i];if(!a.indexed){d(o==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,o);return}o==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?d(!1,"filtering with tuples or arrays not supported","contract."+a.name,o):Array.isArray(o)?r.push(o.map(c=>s(a,c))):r.push(s(a,o))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){if(typeof e=="string"){let i=this.getEvent(e);d(i,"unknown event","eventFragment",e),e=i}let r=[],s=[],o=[];return e.anonymous||r.push(e.topicHash),d(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((i,a)=>{let c=t[a];if(i.indexed)if(i.type==="string")r.push(Ke(c));else if(i.type==="bytes")r.push(H(c));else{if(i.baseType==="tuple"||i.baseType==="array")throw new Error("not implemented");r.push(this.#n.encode([i.type],[c]))}else s.push(i),o.push(c)}),{data:this.#n.encode(s,o),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"){let p=this.getEvent(e);d(p,"unknown event","eventFragment",e),e=p}if(r!=null&&!e.anonymous){let p=e.topicHash;d(W(r[0],32)&&r[0].toLowerCase()===p,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}let s=[],o=[],i=[];e.inputs.forEach((p,b)=>{p.indexed?p.type==="string"||p.type==="bytes"||p.baseType==="tuple"||p.baseType==="array"?(s.push(Ie.from({type:"bytes32",name:p.name})),i.push(!0)):(s.push(p),i.push(!1)):(o.push(p),i.push(!1))});let a=r!=null?this.#n.decode(s,M(r)):null,c=this.#n.decode(o,t,!0),l=[],u=[],f=0,h=0;return e.inputs.forEach((p,b)=>{let m=null;if(p.indexed)if(a==null)m=new On(null);else if(i[b])m=new On(a[h++]);else try{m=a[h++]}catch(y){m=y}else try{m=c[f++]}catch(y){m=y}l.push(m),u.push(p.name||null)}),Bt.fromItems(l,u)}parseTransaction(e){let t=E(e.data,"tx.data"),r=I(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(A(t.slice(0,4)));if(!s)return null;let o=this.#n.decode(s.inputs,t.slice(4));return new Rs(s,s.selector,o,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new Bs(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){let t=A(e),r=this.getError(re(t,0,4));if(!r)return null;let s=this.#n.decode(r.inputs,re(t,4));return new Ss(r,r.selector,s)}static from(e){return e instanceof n?e:typeof e=="string"?new n(JSON.parse(e)):typeof e.formatJson=="function"?new n(e.formatJson()):typeof e.format=="function"?new n(e.format("json")):new n(e)}};var xd=BigInt(0);function Us(n){return n??null}function Be(n){return n==null?null:n.toString()}var Qr=class{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,r){k(this,{gasPrice:Us(e),maxFeePerGas:Us(t),maxPriorityFeePerGas:Us(r)})}toJSON(){let{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Be(e),maxFeePerGas:Be(t),maxPriorityFeePerGas:Be(r)}}};function bt(n){let e={};n.to&&(e.to=n.to),n.from&&(e.from=n.from),n.data&&(e.data=A(n.data));let t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(let s of t)!(s in n)||n[s]==null||(e[s]=I(n[s],`request.${s}`));let r="type,nonce".split(/,/);for(let s of r)!(s in n)||n[s]==null||(e[s]=U(n[s],`request.${s}`));return n.accessList&&(e.accessList=Ge(n.accessList)),n.authorizationList&&(e.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(e.blockTag=n.blockTag),"enableCcipRead"in n&&(e.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(e.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(e.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(e.kzg=n.kzg),"blobWrapperVersion"in n&&(e.blobWrapperVersion=n.blobWrapperVersion),"blobs"in n&&n.blobs&&(e.blobs=n.blobs.map(s=>Pt(s)?A(s):Object.assign({},s))),e}var Dn=class{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#e;constructor(e,t){this.#e=e.transactions.map(r=>typeof r!="string"?new $t(r,t):r),k(this,{provider:t,hash:Us(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Us(e.prevRandao),extraData:e.extraData,baseFeePerGas:Us(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#e.map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){let e=this.#e.slice();return e.length===0?[]:(g(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){let{baseFeePerGas:e,difficulty:t,extraData:r,gasLimit:s,gasUsed:o,hash:i,miner:a,prevRandao:c,nonce:l,number:u,parentHash:f,parentBeaconBlockRoot:h,stateRoot:p,receiptsRoot:b,timestamp:m,transactions:y}=this;return{_type:"Block",baseFeePerGas:Be(e),difficulty:Be(t),extraData:r,gasLimit:Be(s),gasUsed:Be(o),blobGasUsed:Be(this.blobGasUsed),excessBlobGas:Be(this.excessBlobGas),hash:i,miner:a,prevRandao:c,nonce:l,number:u,parentHash:f,timestamp:m,parentBeaconBlockRoot:h,stateRoot:p,receiptsRoot:b,transactions:y}}[Symbol.iterator](){let e=0,t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#e.length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=this.#e[e];else{let r=e.toLowerCase();for(let s of this.#e)if(typeof s=="string"){if(s!==r)continue;t=s;break}else{if(s.hash!==r)continue;t=s;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){let t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(let r of t)if(r.hash===e)return r;d(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return Gg(this)}},dt=class{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;let r=Object.freeze(e.topics.slice());k(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){let{address:e,blockHash:t,blockNumber:r,data:s,index:o,removed:i,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:s,index:o,removed:i,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){let e=await this.provider.getBlock(this.blockHash);return g(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){let e=await this.provider.getTransaction(this.transactionHash);return g(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){let e=await this.provider.getTransactionReceipt(this.transactionHash);return g(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return Kg(this)}},br=class{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#e;constructor(e,t){this.#e=Object.freeze(e.logs.map(s=>new dt(s,t)));let r=xd;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),k(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#e}toJSON(){let{to:e,from:t,contractAddress:r,hash:s,index:o,blockHash:i,blockNumber:a,logsBloom:c,logs:l,status:u,root:f}=this;return{_type:"TransactionReceipt",blockHash:i,blockNumber:a,contractAddress:r,cumulativeGasUsed:Be(this.cumulativeGasUsed),from:t,gasPrice:Be(this.gasPrice),blobGasUsed:Be(this.blobGasUsed),blobGasPrice:Be(this.blobGasPrice),gasUsed:Be(this.gasUsed),hash:s,index:o,logs:l,logsBloom:c,root:f,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){let e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){let e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return gd(this)}reorderedEvent(e){return g(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),md(this,e)}},$t=class n{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#e;constructor(e,t){this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,this.#e=-1}toJSON(){let{blockNumber:e,blockHash:t,index:r,hash:s,type:o,to:i,from:a,nonce:c,data:l,signature:u,accessList:f,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:f,blockNumber:e,blockHash:t,blobVersionedHashes:h,chainId:Be(this.chainId),data:l,from:a,gasLimit:Be(this.gasLimit),gasPrice:Be(this.gasPrice),hash:s,maxFeePerGas:Be(this.maxFeePerGas),maxPriorityFeePerGas:Be(this.maxPriorityFeePerGas),maxFeePerBlobGas:Be(this.maxFeePerBlobGas),nonce:c,signature:u,to:i,index:r,type:o,value:Be(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){let r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;let t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){let{tx:t,blockNumber:r}=await pe({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:r-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){let r=e??1,s=t??0,o=this.#e,i=-1,a=o===-1,c=async()=>{if(a)return null;let{blockNumber:h,nonce:p}=await pe({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(p<this.nonce){o=h;return}if(a)return null;let b=await this.getTransaction();if(!(b&&b.blockNumber!=null))for(i===-1&&(i=o-3,i<this.#e&&(i=this.#e));i<=h;){if(a)return null;let m=await this.provider.getBlock(i,!0);if(m==null)return;for(let y of m)if(y===this.hash)return;for(let y=0;y<m.length;y++){let w=await m.getTransaction(y);if(w.from===this.from&&w.nonce===this.nonce){if(a)return null;let P=await this.provider.getTransactionReceipt(w.hash);if(P==null||h-P.blockNumber+1<r)return;let N="replaced";w.data===this.data&&w.to===this.to&&w.value===this.value?N="repriced":w.data==="0x"&&w.from===w.to&&w.value===xd&&(N="cancelled"),g(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:N==="replaced"||N==="cancelled",reason:N,replacement:w.replaceableTransaction(o),hash:w.hash,receipt:P})}}i++}},l=h=>{if(h==null||h.status!==0)return h;g(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,p)=>{let b=[],m=()=>{b.forEach(w=>w())};if(b.push(()=>{a=!0}),s>0){let w=setTimeout(()=>{m(),p(Q("wait for transaction timeout","TIMEOUT"))},s);b.push(()=>{clearTimeout(w)})}let y=async w=>{if(await w.confirmations()>=r){m();try{h(l(w))}catch(P){p(P)}}};if(b.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),o>=0){let w=async()=>{try{await c()}catch(P){if(se(P,"TRANSACTION_REPLACED")){m(),p(P);return}}a||this.provider.once("block",w)};b.push(()=>{this.provider.off("block",w)}),this.provider.once("block",w)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return g(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),gd(this)}reorderedEvent(e){return g(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),g(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),md(this,e)}replaceableTransaction(e){d(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);let t=new n(this,this.provider);return t.#e=e,t}};function Gg(n){return{orphan:"drop-block",hash:n.hash,number:n.number}}function md(n,e){return{orphan:"reorder-transaction",tx:n,other:e}}function gd(n){return{orphan:"drop-transaction",tx:n}}function Kg(n){return{orphan:"drop-log",log:{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,address:n.address,data:n.data,topics:Object.freeze(n.topics.slice()),index:n.index}}}var yr=class extends dt{interface;fragment;args;constructor(e,t,r){super(e,e.provider);let s=t.decodeEventLog(r,e.data,e.topics);k(this,{args:s,fragment:r,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}},Jr=class extends dt{error;constructor(e,t){super(e,e.provider),k(this,{error:t})}},Os=class extends br{#e;constructor(e,t,r){super(r,t),this.#e=e}get logs(){return super.logs.map(e=>{let t=e.topics.length?this.#e.getEvent(e.topics[0]):null;if(t)try{return new yr(e,this.#e,t)}catch(r){return new Jr(e,r)}return e})}},wr=class extends $t{#e;constructor(e,t,r){super(r,t),this.#e=e}async wait(e,t){let r=await super.wait(e,t);return r==null?null:new Os(this.#e,this.provider,r)}},jr=class extends ar{log;constructor(e,t,r,s){super(e,t,r),k(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}},Ln=class extends jr{constructor(e,t,r,s,o){super(e,t,r,new yr(o,e.interface,s));let i=e.interface.decodeEventLog(s,this.log.data,this.log.topics);k(this,{args:i,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}};var bd=BigInt(0);function wd(n){return n&&typeof n.call=="function"}function Ad(n){return n&&typeof n.estimateGas=="function"}function sa(n){return n&&typeof n.resolveName=="function"}function Ed(n){return n&&typeof n.sendTransaction=="function"}function kd(n){if(n!=null){if(sa(n))return n;if(n.provider)return n.provider}}var ul=class{#e;fragment;constructor(e,t,r){if(k(this,{fragment:t}),t.inputs.length<r.length)throw new Error("too many arguments");let s=Fn(e.runner,"resolveName"),o=sa(s)?s:null;this.#e=async function(){let i=await Promise.all(t.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,f)=>u==="address"?Array.isArray(f)?Promise.all(f.map(h=>be(h,o))):be(f,o):f)));return e.interface.encodeFilterTopics(t,i)}()}getTopicFilter(){return this.#e}};function Fn(n,e){return n==null?null:typeof n[e]=="function"?n:n.provider&&typeof n.provider[e]=="function"?n.provider:null}function Mn(n){return n==null?null:n.provider||null}async function oa(n,e){let t=de.dereference(n,"overrides");d(typeof t=="object","invalid overrides parameter","overrides",n);let r=bt(t);return d(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),d(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function hl(n,e,t){let r=Fn(n,"resolveName"),s=sa(r)?r:null;return await Promise.all(e.map((o,i)=>o.walkAsync(t[i],(a,c)=>(c=de.dereference(c,a),a==="address"?be(c,s):c))))}function Wg(n){let e=async function(i){let a=await oa(i,["data"]);a.to=await n.getAddress(),a.from&&(a.from=await be(a.from,kd(n.runner)));let c=n.interface,l=I(a.value||bd,"overrides.value")===bd,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&d(!1,"cannot send data to receive or send value to non-payable fallback","overrides",i),d(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);let f=c.receive||c.fallback&&c.fallback.payable;return d(f||l,"cannot send value to non-payable fallback","overrides.value",a.value),d(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},t=async function(i){let a=Fn(n.runner,"call");g(wd(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let c=await e(i);try{return await a.call(c)}catch(l){throw Rr(l)&&l.data?n.interface.makeError(l.data,c):l}},r=async function(i){let a=n.runner;g(Ed(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let c=await a.sendTransaction(await e(i)),l=Mn(n.runner);return new wr(n.interface,l,c)},s=async function(i){let a=Fn(n.runner,"estimateGas");return g(Ad(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(i))},o=async i=>await r(i);return k(o,{_contract:n,estimateGas:s,populateTransaction:e,send:r,staticCall:t}),o}function Vg(n,e){let t=function(...l){let u=n.interface.getFunction(e,l);return g(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){let u=t(...l),f={};if(u.inputs.length+1===l.length&&(f=await oa(l.pop()),f.from&&(f.from=await be(f.from,kd(n.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");let h=await hl(n.runner,u.inputs,l);return Object.assign({},f,await pe({to:n.getAddress(),data:n.interface.encodeFunctionData(u,h)}))},s=async function(...l){let u=await a(...l);return u.length===1?u[0]:u},o=async function(...l){let u=n.runner;g(Ed(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let f=await u.sendTransaction(await r(...l)),h=Mn(n.runner);return new wr(n.interface,h,f)},i=async function(...l){let u=Fn(n.runner,"estimateGas");return g(Ad(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){let u=Fn(n.runner,"call");g(wd(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let f=await r(...l),h="0x";try{h=await u.call(f)}catch(b){throw Rr(b)&&b.data?n.interface.makeError(b.data,f):b}let p=t(...l);return n.interface.decodeFunctionResult(p,h)},c=async(...l)=>t(...l).constant?await s(...l):await o(...l);return k(c,{name:n.interface.getFunctionName(e),_contract:n,_key:e,getFragment:t,estimateGas:i,populateTransaction:r,send:o,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{let l=n.interface.getFunction(e);return g(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function zg(n,e){let t=function(...s){let o=n.interface.getEvent(e,s);return g(o,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),o},r=function(...s){return new ul(n,t(...s),s)};return k(r,{name:n.interface.getEventName(e),_contract:n,_key:e,getFragment:t}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{let s=n.interface.getEvent(e);return g(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}var na=Symbol.for("_ethersInternal_contract"),Nd=new WeakMap;function Qg(n,e){Nd.set(n[na],e)}function ht(n){return Nd.get(n[na])}function Jg(n){return n&&typeof n=="object"&&"getTopicFilter"in n&&typeof n.getTopicFilter=="function"&&n.fragment}async function pl(n,e){let t,r=null;if(Array.isArray(e)){let o=function(i){if(W(i,32))return i;let a=n.interface.getEvent(i);return d(a,"unknown fragment","name",i),a.topicHash};t=e.map(i=>i==null?null:Array.isArray(i)?i.map(o):o(i))}else e==="*"?t=[null]:typeof e=="string"?W(e,32)?t=[e]:(r=n.interface.getEvent(e),d(r,"unknown fragment","event",e),t=[r.topicHash]):Jg(e)?t=await e.getTopicFilter():"fragment"in e?(r=e.fragment,t=[r.topicHash]):d(!1,"unknown event name","event",e);t=t.map(o=>{if(o==null)return null;if(Array.isArray(o)){let i=Array.from(new Set(o.map(a=>a.toLowerCase())).values());return i.length===1?i[0]:(i.sort(),i)}return o.toLowerCase()});let s=t.map(o=>o==null?"null":Array.isArray(o)?o.join("|"):o).join("&");return{fragment:r,tag:s,topics:t}}async function To(n,e){let{subs:t}=ht(n);return t.get((await pl(n,e)).tag)||null}async function yd(n,e,t){let r=Mn(n.runner);g(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});let{fragment:s,tag:o,topics:i}=await pl(n,t),{addr:a,subs:c}=ht(n),l=c.get(o);if(!l){let f={address:a||n,topics:i},h=y=>{let w=s;if(w==null)try{w=n.interface.getEvent(y.topics[0])}catch{}if(w){let P=w,N=s?n.interface.decodeEventLog(s,y.data,y.topics):[];dl(n,t,N,L=>new Ln(n,L,t,P,y))}else dl(n,t,[],P=>new jr(n,P,t,y))},p=[];l={tag:o,listeners:[],start:()=>{p.length||p.push(r.on(f,h))},stop:async()=>{if(p.length==0)return;let y=p;p=[],await Promise.all(y),r.off(f,h)}},c.set(o,l)}return l}var fl=Promise.resolve();async function jg(n,e,t,r){await fl;let s=await To(n,e);if(!s)return!1;let o=s.listeners.length;return s.listeners=s.listeners.filter(({listener:i,once:a})=>{let c=Array.from(t);r&&c.push(r(a?null:i));try{i.call(n,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),ht(n).subs.delete(s.tag)),o>0}async function dl(n,e,t,r){try{await fl}catch{}let s=jg(n,e,t,r);return fl=s,await s}var ra=["then"],Ar=class n{target;interface;runner;filters;[na];fallback;constructor(e,t,r,s){d(typeof e=="string"||Es(e),"invalid value for Contract target","target",e),r==null&&(r=null);let o=gr.from(t);k(this,{target:e,runner:r,interface:o}),Object.defineProperty(this,na,{value:{}});let i,a=null,c=null;if(s){let f=Mn(r);c=new wr(this.interface,f,s)}let l=new Map;if(typeof e=="string")if(W(e))a=e,i=Promise.resolve(e);else{let f=Fn(r,"resolveName");if(!sa(f))throw Q("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});i=f.resolveName(e).then(h=>{if(h==null)throw Q("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return ht(this).addr=h,h})}else i=e.getAddress().then(f=>{if(f==null)throw new Error("TODO");return ht(this).addr=f,f});Qg(this,{addrPromise:i,addr:a,deployTx:c,subs:l});let u=new Proxy({},{get:(f,h,p)=>{if(typeof h=="symbol"||ra.indexOf(h)>=0)return Reflect.get(f,h,p);try{return this.getEvent(h)}catch(b){if(!se(b,"INVALID_ARGUMENT")||b.argument!=="key")throw b}},has:(f,h)=>ra.indexOf(h)>=0?Reflect.has(f,h):Reflect.has(f,h)||this.interface.hasEvent(String(h))});return k(this,{filters:u}),k(this,{fallback:o.receive||o.fallback?Wg(this):null}),new Proxy(this,{get:(f,h,p)=>{if(typeof h=="symbol"||h in f||ra.indexOf(h)>=0)return Reflect.get(f,h,p);try{return f.getFunction(h)}catch(b){if(!se(b,"INVALID_ARGUMENT")||b.argument!=="key")throw b}},has:(f,h)=>typeof h=="symbol"||h in f||ra.indexOf(h)>=0?Reflect.has(f,h):f.interface.hasFunction(h)})}connect(e){return new n(this.target,this.interface,e)}attach(e){return new n(e,this.interface,this.runner)}async getAddress(){return await ht(this).addrPromise}async getDeployedCode(){let e=Mn(this.runner);g(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});let t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){let e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;let r=Mn(this.runner);return g(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,o)=>{let i=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",i)}catch(a){o(a)}};i()})}deploymentTransaction(){return ht(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),Vg(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),zg(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,r){t==null&&(t=0),r==null&&(r="latest");let{addr:s,addrPromise:o}=ht(this),i=s||await o,{fragment:a,topics:c}=await pl(this,e),l={address:i,topics:c,fromBlock:t,toBlock:r},u=Mn(this.runner);return g(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(f=>{let h=a;if(h==null)try{h=this.interface.getEvent(f.topics[0])}catch{}if(h)try{return new yr(f,this.interface,h)}catch(p){return new Jr(f,p)}return new dt(f,u)})}async on(e,t){let r=await yd(this,"on",e);return r.listeners.push({listener:t,once:!1}),r.start(),this}async once(e,t){let r=await yd(this,"once",e);return r.listeners.push({listener:t,once:!0}),r.start(),this}async emit(e,...t){return await dl(this,e,t,null)}async listenerCount(e){if(e){let s=await To(this,e);return s?s.listeners.length:0}let{subs:t}=ht(this),r=0;for(let{listeners:s}of t.values())r+=s.length;return r}async listeners(e){if(e){let s=await To(this,e);return s?s.listeners.map(({listener:o})=>o):[]}let{subs:t}=ht(this),r=[];for(let{listeners:s}of t.values())r=r.concat(s.map(({listener:o})=>o));return r}async off(e,t){let r=await To(this,e);if(!r)return this;if(t){let s=r.listeners.map(({listener:o})=>o).indexOf(t);s>=0&&r.listeners.splice(s,1)}return(t==null||r.listeners.length===0)&&(r.stop(),ht(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){let t=await To(this,e);if(!t)return this;t.stop(),ht(this).subs.delete(t.tag)}else{let{subs:t}=ht(this);for(let{tag:r,stop:s}of t.values())s(),t.delete(r)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends n{constructor(s,o=null){super(s,e,o)}}return t}static from(e,t,r){return r==null&&(r=null),new this(e,t,r)}};function qg(){return Ar}var ot=class extends qg(){};var vo=class n{interface;bytecode;runner;constructor(e,t,r){let s=gr.from(e);t instanceof Uint8Array?t=A(E(t)):(typeof t=="object"&&(t=t.object),t.startsWith("0x")||(t="0x"+t),t=A(E(t))),k(this,{bytecode:t,interface:s,runner:r||null})}attach(e){return new Ar(e,this.interface,this.runner)}async getDeployTransaction(...e){let t={},r=this.interface.deploy;if(r.inputs.length+1===e.length&&(t=await oa(e.pop())),r.inputs.length!==e.length)throw new Error("incorrect number of arguments to constructor");let s=await hl(this.runner,r.inputs,e),o=M([this.bytecode,this.interface.encodeDeploy(s)]);return Object.assign({},t,{data:o})}async deploy(...e){let t=await this.getDeployTransaction(...e);g(this.runner&&typeof this.runner.sendTransaction=="function","factory runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let r=await this.runner.sendTransaction(t),s=Pn(r);return new Ar(s,this.interface,this.runner,r)}connect(e){return new n(this.interface,this.bytecode,e)}static fromSolidity(e,t){d(e!=null,"bad compiler output","output",e),typeof e=="string"&&(e=JSON.parse(e));let r=e.abi,s="";return e.bytecode?s=e.bytecode:e.evm&&e.evm.bytecode&&(s=e.evm.bytecode),new this(r,s,t)}};function xl(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):d(!1,"unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}var Ds=class{name;constructor(e){k(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}};var Pd=new RegExp("^(ipfs)://(.*)$","i"),Id=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Pd,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")],qr=class n{provider;address;name;#e;#t;constructor(e,t,r){k(this,{provider:e,address:t,name:r}),this.#e=null,this.#t=new ot(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return this.#e==null&&(this.#e=(async()=>{try{return await this.#t.supportsInterface("0x9061b923")}catch(e){if(se(e,"CALL_EXCEPTION"))return!1;throw this.#e=null,e}})()),await this.#e}async#r(e,t){t=(t||[]).slice();let r=this.#t.interface;t.unshift(Wr(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),g(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[No(this.name,255),r.encodeFunctionData(s,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{let o=await this.#t[e](...t);return s?r.decodeFunctionResult(s,o)[0]:o}catch(o){if(!se(o,"CALL_EXCEPTION"))throw o}return null}async getAddress(e){if(e==null&&(e=60),e===60)try{let o=await this.#r("addr(bytes32)");return o==null||o===Mt?null:o}catch(o){if(se(o,"CALL_EXCEPTION"))return null;throw o}if(e>=0&&e<2147483648){let o=e+2147483648,i=await this.#r("addr(bytes32,uint)",[o]);if(W(i,20))return D(i)}let t=null;for(let o of this.provider.plugins)if(o instanceof Ds&&o.supportsCoinType(e)){t=o;break}if(t==null)return null;let r=await this.#r("addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;let s=await t.decodeAddress(e,r);if(s!=null)return s;g(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){let t=await this.#r("text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){let e=await this.#r("contenthash(bytes32)");if(e==null||e==="0x")return null;let t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){let s=t[1]==="e3010170"?"ipfs":"ipns",o=parseInt(t[4],16);if(t[5].length===o*2)return`${s}://${xn("0x"+t[2])}`}let r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;g(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){let e=[{type:"name",value:this.name}];try{let t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let r=0;r<Id.length;r++){let s=t.match(Id[r]);if(s==null)continue;let o=s[1].toLowerCase();switch(o){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{let i=xl(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:i}),{linkage:e,url:i}}case"erc721":case"erc1155":{let i=o==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:o,value:t});let a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};let c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${o}caip`,value:s[2]||""}),{url:null,linkage:e};let l=c[1],u=new ot(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(o==="erc721"){let m=await u.ownerOf(l);if(a!==m)return e.push({type:"!owner",value:m}),{url:null,linkage:e};e.push({type:"owner",value:m})}else if(o==="erc1155"){let m=await u.balanceOf(a,l);if(!m)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:m.toString()})}let f=await u[i](l);if(f==null||f==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:f}),o==="erc1155"&&(f=f.replace("{id}",Le(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:f})),f.match(/^ipfs:/i)&&(f=xl(f)),e.push({type:"metadata-url",value:f});let h={},p=await new ce(f).send();p.assertOk();try{h=p.bodyJson}catch{try{e.push({type:"!metadata",value:p.bodyText})}catch{let w=p.body;return w&&e.push({type:"!metadata",value:A(w)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let b=h.image;if(typeof b!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!b.match(/^(https:\/\/|data:)/i)){if(b.match(Pd)==null)return e.push({type:"!imageUrl-ipfs",value:b}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:b}),b=xl(b)}return e.push({type:"url",value:b}),{linkage:e,url:b}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){let t=await e.getNetwork(),r=t.getPlugin("org.ethers.plugins.network.Ens");return g(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),r.address}static async#n(e,t){let r=await n.getEnsAddress(e);try{let o=await new ot(r,["function resolver(bytes32) view returns (address)"],e).resolver(Wr(t),{enableCcipRead:!0});return o===Mt?null:o}catch(s){throw s}return null}static async fromName(e,t){let r=t;for(;;){if(r===""||r==="."||t!=="eth"&&r==="eth")return null;let s=await n.#n(e,r);if(s!=null){let o=new n(e,s,t);return r!==t&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};var Td=BigInt(0);function Y(n,e){return function(t){return t==null?e:n(t)}}function Co(n,e){return t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(r=>n(r))}}function Bo(n,e){return t=>{let r={};for(let s in n){let o=s;if(e&&s in e&&!(o in t)){for(let i of e[s])if(i in t){o=i;break}}try{let i=n[s](t[o]);i!==void 0&&(r[s]=i)}catch(i){let a=i instanceof Error?i.message:"not-an-error";g(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:t})}}return r}}function $g(n){switch(n){case!0:case"true":return!0;case!1:case"false":return!1}d(!1,`invalid boolean; ${JSON.stringify(n)}`,"value",n)}function Ls(n){return d(W(n,!0),"invalid data","value",n),n}function We(n){return d(W(n,32),"invalid hash","value",n),n}var Yg=Bo({address:D,blockHash:We,blockNumber:U,data:Ls,index:U,removed:Y($g,!1),topics:Co(We),transactionHash:We,transactionIndex:U},{index:["logIndex"]});function vd(n){return Yg(n)}var Zg=Bo({hash:Y(We),parentHash:We,parentBeaconBlockRoot:Y(We,null),number:U,timestamp:U,nonce:Y(Ls),difficulty:I,gasLimit:I,gasUsed:I,stateRoot:Y(We,null),receiptsRoot:Y(We,null),blobGasUsed:Y(I,null),excessBlobGas:Y(I,null),miner:Y(D),prevRandao:Y(We,null),extraData:Ls,baseFeePerGas:Y(I)},{prevRandao:["mixHash"]});function Cd(n){let e=Zg(n);return e.transactions=n.transactions.map(t=>typeof t=="string"?t:ml(t)),e}var Xg=Bo({transactionIndex:U,blockNumber:U,transactionHash:We,address:D,topics:Co(We),data:Ls,index:U,blockHash:We},{index:["logIndex"]});function eb(n){return Xg(n)}var tb=Bo({to:Y(D,null),from:Y(D,null),contractAddress:Y(D,null),index:U,root:Y(A),gasUsed:I,blobGasUsed:Y(I,null),logsBloom:Y(Ls),blockHash:We,hash:We,logs:Co(eb),blockNumber:U,cumulativeGasUsed:I,effectiveGasPrice:Y(I),blobGasPrice:Y(I,null),status:Y(U),type:Y(U,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Bd(n){return tb(n)}function ml(n){n.to&&I(n.to)===Td&&(n.to="0x0000000000000000000000000000000000000000");let e=Bo({hash:We,index:Y(U,void 0),type:t=>t==="0x"||t==null?0:U(t),accessList:Y(Ge,null),blobVersionedHashes:Y(Co(We,!0),null),authorizationList:Y(Co(t=>{let r;if(t.signature)r=t.signature;else{let s=t.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},t,{yParity:s})}return{address:D(t.address),chainId:I(t.chainId),nonce:I(t.nonce),signature:Ce.from(r)}},!1),null),blockHash:Y(We,null),blockNumber:Y(U,null),transactionIndex:Y(U,null),from:D,gasPrice:Y(I),maxPriorityFeePerGas:Y(I),maxFeePerGas:Y(I),maxFeePerBlobGas:Y(I,null),gasLimit:I,to:Y(D,null),value:I,nonce:U,data:Ls,creates:Y(D,null),chainId:Y(I,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(n);if(e.to==null&&e.creates==null&&(e.creates=Pn(e)),(n.type===1||n.type===2)&&n.accessList==null&&(e.accessList=[]),n.signature?e.signature=Ce.from(n.signature):e.signature=Ce.from(n),e.chainId==null){let t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&I(e.blockHash)===Td&&(e.blockHash=null),e}var rb="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",Wt=class n{name;constructor(e){k(this,{name:e})}clone(){return new n(this.name)}},$r=class n extends Wt{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){e==null&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);let r={effectiveBlock:e};function s(o,i){let a=(t||{})[o];a==null&&(a=i),d(typeof a=="number",`invalud value for ${o}`,"costs",t),r[o]=a}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),k(this,r)}clone(){return new n(this.effectiveBlock,this)}},Yr=class n extends Wt{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens"),k(this,{address:e||rb,targetNetwork:t??1})}clone(){return new n(this.address,this.targetNetwork)}},Ro=class n extends Wt{#e;get feeDataFunc(){return this.#e}constructor(e){super("org.ethers.plugins.network.FeeData"),this.#e=e}async getFeeData(e){return await this.#e(e)}clone(){return new n(this.#e)}},_n=class extends Wt{#e;#t;get url(){return this.#e}get processFunc(){return this.#t}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#e=e,this.#t=t}clone(){return this}};var gl=new Map,J=class n{#e;#t;#r;constructor(e,t){this.#e=e,this.#t=I(t),this.#r=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#e}set name(e){this.#e=e}get chainId(){return this.#t}set chainId(e){this.#t=I(e,"chainId")}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===I(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===I(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===I(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(this.#r.values())}attachPlugin(e){if(this.#r.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#r.set(e.name,e.clone()),this}getPlugin(e){return this.#r.get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){let e=new n(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){let t=this.getPlugin("org.ethers.plugins.network.GasCost")||new $r,r=t.txBase;if(e.to==null&&(r+=t.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=t.txDataZero:r+=t.txDataNonzero;if(e.accessList){let s=Ge(e.accessList);for(let o in s)r+=t.txAccessListAddress+t.txAccessListStorageKey*s[o].storageKeys.length}return r}static from(e){if(nb(),e==null)return n.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){let t=gl.get(e);if(t)return t();if(typeof e=="bigint")return new n("unknown",e);d(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){d(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);let t=new n(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new Yr(e.ensAddress,e.ensNetwork)),t}d(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));let r=gl.get(e);r&&d(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),gl.set(e,t)}};function Rd(n,e){let t=String(n);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${n}`);let r=t.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${n}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function Sd(n){return new _n(n,async(e,t,r)=>{r.setHeader("User-Agent","ethers");let s;try{let[o,i]=await Promise.all([r.send(),e()]);s=o;let a=s.bodyJson.standard;return{gasPrice:i.gasPrice,maxFeePerGas:Rd(a.maxFee,9),maxPriorityFeePerGas:Rd(a.maxPriorityFee,9)}}catch(o){g(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:o})}})}var Ud=!1;function nb(){if(Ud)return;Ud=!0;function n(e,t,r){let s=function(){let o=new J(e,t);return r.ensNetwork!=null&&o.attachPlugin(new Yr(null,r.ensNetwork)),o.attachPlugin(new $r),(r.plugins||[]).forEach(i=>{o.attachPlugin(i)}),o};J.register(e,s),J.register(t,s),r.altNames&&r.altNames.forEach(o=>{J.register(o,s)})}n("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),n("ropsten",3,{ensNetwork:3}),n("rinkeby",4,{ensNetwork:4}),n("goerli",5,{ensNetwork:5}),n("kovan",42,{ensNetwork:42}),n("sepolia",11155111,{ensNetwork:11155111}),n("holesky",17e3,{ensNetwork:17e3}),n("classic",61,{}),n("classicKotti",6,{}),n("arbitrum",42161,{ensNetwork:1}),n("arbitrum-goerli",421613,{}),n("arbitrum-sepolia",421614,{}),n("base",8453,{ensNetwork:1}),n("base-goerli",84531,{}),n("base-sepolia",84532,{}),n("bnb",56,{ensNetwork:1}),n("bnbt",97,{}),n("filecoin",314,{}),n("filecoin-calibration",314159,{}),n("linea",59144,{ensNetwork:1}),n("linea-goerli",59140,{}),n("linea-sepolia",59141,{}),n("matic",137,{ensNetwork:1,plugins:[Sd("https://gasstation.polygon.technology/v2")]}),n("matic-amoy",80002,{}),n("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Sd("https://gasstation-testnet.polygon.technology/v2")]}),n("optimism",10,{ensNetwork:1,plugins:[]}),n("optimism-goerli",420,{}),n("optimism-sepolia",11155420,{}),n("xdai",100,{ensNetwork:1})}function bl(n){return JSON.parse(JSON.stringify(n))}var ia=class{#e;#t;#r;#n;constructor(e){this.#e=e,this.#t=null,this.#r=4e3,this.#n=-2}get pollingInterval(){return this.#r}set pollingInterval(e){this.#r=e}async#s(){try{let e=await this.#e.getBlockNumber();if(this.#n===-2){this.#n=e;return}if(e!==this.#n){for(let t=this.#n+1;t<=e;t++){if(this.#t==null)return;await this.#e.emit("block",t)}this.#n=e}}catch{}this.#t!=null&&(this.#t=this.#e._setTimeout(this.#s.bind(this),this.#r))}start(){this.#t||(this.#t=this.#e._setTimeout(this.#s.bind(this),this.#r),this.#s())}stop(){this.#t&&(this.#e._clearTimeout(this.#t),this.#t=null)}pause(e){this.stop(),e&&(this.#n=-2)}resume(){this.start()}},So=class{#e;#t;#r;constructor(e){this.#e=e,this.#r=!1,this.#t=t=>{this._poll(t,this.#e)}}async _poll(e,t){throw new Error("sub-classes must override this")}start(){this.#r||(this.#r=!0,this.#t(-2),this.#e.on("block",this.#t))}stop(){this.#r&&(this.#r=!1,this.#e.off("block",this.#t))}pause(e){this.stop()}resume(){this.start()}},aa=class extends So{#e;#t;constructor(e,t){super(e),this.#e=t,this.#t=-2}pause(e){e&&(this.#t=-2),super.pause(e)}async _poll(e,t){let r=await t.getBlock(this.#e);r!=null&&(this.#t===-2?this.#t=r.number:r.number>this.#t&&(t.emit(this.#e,r.number),this.#t=r.number))}},ca=class extends So{#e;constructor(e,t){super(e),this.#e=bl(t)}async _poll(e,t){throw new Error("@TODO")}},la=class extends So{#e;constructor(e,t){super(e),this.#e=t}async _poll(e,t){let r=await t.getTransactionReceipt(this.#e);r&&t.emit(this.#e,r)}},Zr=class{#e;#t;#r;#n;#s;constructor(e,t){this.#e=e,this.#t=bl(t),this.#r=this.#i.bind(this),this.#n=!1,this.#s=-2}async#i(e){if(this.#s===-2)return;let t=bl(this.#t);t.fromBlock=this.#s+1,t.toBlock=e;let r=await this.#e.getLogs(t);if(r.length===0){this.#s<e-60&&(this.#s=e-60);return}for(let s of r)this.#e.emit(this.#t,s),this.#s=s.blockNumber}start(){this.#n||(this.#n=!0,this.#s===-2&&this.#e.getBlockNumber().then(e=>{this.#s=e}),this.#e.on("block",this.#r))}stop(){this.#n&&(this.#n=!1,this.#e.off("block",this.#r))}pause(e){this.stop(),e&&(this.#s=-2)}resume(){this.start()}};var sb=BigInt(2),ob=10;function ua(n){return n&&typeof n.then=="function"}function fa(n,e){return n+":"+JSON.stringify(e,(t,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){let s=Object.keys(r);return s.sort(),s.reduce((o,i)=>(o[i]=r[i],o),{})}return r})}var Vt=class{name;constructor(e){k(this,{name:e})}start(){}stop(){}pause(e){}resume(){}};function ib(n){return JSON.parse(JSON.stringify(n))}function Al(n){return n=Array.from(new Set(n).values()),n.sort(),n}async function yl(n,e){if(n==null)throw new Error("invalid event");if(Array.isArray(n)&&(n={topics:n}),typeof n=="string")switch(n){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:n,tag:n}}if(W(n,32)){let t=n.toLowerCase();return{type:"transaction",tag:fa("tx",{hash:t}),hash:t}}if(n.orphan){let t=n;return{type:"orphan",tag:fa("orphan",t),filter:ib(t)}}if(n.address||n.topics){let t=n,r={topics:(t.topics||[]).map(s=>s==null?null:Array.isArray(s)?Al(s.map(o=>o.toLowerCase())):s.toLowerCase())};if(t.address){let s=[],o=[],i=a=>{W(a)?s.push(a):o.push((async()=>{s.push(await be(a,e))})())};Array.isArray(t.address)?t.address.forEach(i):i(t.address),o.length&&await Promise.all(o),r.address=Al(s.map(a=>a.toLowerCase()))}return{filter:r,tag:fa("event",r),type:"event"}}d(!1,"unknown ProviderEvent","event",n)}function wl(){return new Date().getTime()}var ab={cacheTimeout:250,pollingInterval:4e3},yt=class{#e;#t;#r;#n;#s;#i;#o;#a;#f;#l;#p;#x;constructor(e,t){if(this.#x=Object.assign({},ab,t||{}),e==="any")this.#i=!0,this.#s=null;else if(e){let r=J.from(e);this.#i=!1,this.#s=Promise.resolve(r),setTimeout(()=>{this.emit("network",r,null)},0)}else this.#i=!1,this.#s=null;this.#a=-1,this.#o=new Map,this.#e=new Map,this.#t=new Map,this.#r=null,this.#n=!1,this.#f=1,this.#l=new Map,this.#p=!1}get pollingInterval(){return this.#x.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#t.values())}attachPlugin(e){if(this.#t.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#t.set(e.name,e.connect(this)),this}getPlugin(e){return this.#t.get(e)||null}get disableCcipRead(){return this.#p}set disableCcipRead(e){this.#p=!!e}async#c(e){let t=this.#x.cacheTimeout;if(t<0)return await this._perform(e);let r=fa(e.method,e),s=this.#o.get(r);return s||(s=this._perform(e),this.#o.set(r,s),setTimeout(()=>{this.#o.get(r)===s&&this.#o.delete(r)},t)),await s}async ccipReadFetch(e,t,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;let s=e.to.toLowerCase(),o=t.toLowerCase(),i=[];for(let a=0;a<r.length;a++){let c=r[a],l=c.replace("{sender}",s).replace("{data}",o),u=new ce(l);c.indexOf("{data}")===-1&&(u.body={data:o,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let f="unknown error",h;try{h=await u.send()}catch(p){i.push(p.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:p}});continue}try{let p=h.bodyJson;if(p.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:p}),p.data;p.message&&(f=p.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:p})}catch{}g(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${f}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:f}}),i.push(f)}g(!1,`error encountered during CCIP fetch: ${i.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:i}})}_wrapBlock(e,t){return new Dn(Cd(e),this)}_wrapLog(e,t){return new dt(vd(e),this)}_wrapTransactionReceipt(e,t){return new br(Bd(e),this)}_wrapTransactionResponse(e,t){return new $t(ml(e),this)}_detectNetwork(){g(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){g(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){let e=U(await this.#c({method:"getBlockNumber"}),"%response");return this.#a>=0&&(this.#a=e),e}_getAddress(e){return be(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(W(e))return W(e,32)?e:Ue(e);if(typeof e=="bigint"&&(e=U(e,"blockTag")),typeof e=="number")return e>=0?Ue(e):this.#a>=0?Ue(this.#a+e):this.getBlockNumber().then(t=>Ue(t+e));d(!1,"invalid blockTag","blockTag",e)}_getFilter(e){let t=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?Al(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let f;switch(c.length){case 0:break;case 1:f=c[0];break;default:c.sort(),f=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");let h={};return f&&(h.address=f),t.length&&(h.topics=t),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h},o=[];if(e.address)if(Array.isArray(e.address))for(let c of e.address)o.push(this._getAddress(c));else o.push(this._getAddress(e.address));let i;"fromBlock"in e&&(i=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),o.filter(c=>typeof c!="string").length||i!=null&&typeof i!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(o),i,a]).then(c=>s(c[0],c[1],c[2])):s(o,i,a)}_getTransactionRequest(e){let t=bt(e),r=[];if(["to","from"].forEach(s=>{if(t[s]==null)return;let o=be(t[s],this);ua(o)?r.push(async function(){t[s]=await o}()):t[s]=o}),t.blockTag!=null){let s=this._getBlockTag(t.blockTag);ua(s)?r.push(async function(){t.blockTag=await s}()):t.blockTag=s}return r.length?async function(){return await Promise.all(r),t}():t}async getNetwork(){if(this.#s==null){let s=(async()=>{try{let o=await this._detectNetwork();return this.emit("network",o,null),o}catch(o){throw this.#s===s&&(this.#s=null),o}})();return this.#s=s,(await s).clone()}let e=this.#s,[t,r]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==r.chainId&&(this.#i?(this.emit("network",r,t),this.#s===e&&(this.#s=Promise.resolve(r))):g(!1,`network changed: ${t.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){let e=await this.getNetwork(),t=async()=>{let{_block:s,gasPrice:o,priorityFee:i}=await pe({_block:this.#b("latest",!1),gasPrice:(async()=>{try{let u=await this.#c({method:"getGasPrice"});return I(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{let u=await this.#c({method:"getPriorityFee"});return I(u,"%response")}catch{}return null})()}),a=null,c=null,l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=i??BigInt("1000000000"),a=l.baseFeePerGas*sb+c),new Qr(o,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){let s=new ce(r.url),o=await r.processFunc(t,this,s);return new Qr(o.gasPrice,o.maxFeePerGas,o.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return ua(t)&&(t=await t),I(await this.#c({method:"estimateGas",transaction:t}),"%response")}async#u(e,t,r){g(r<ob,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});let s=bt(e);try{return A(await this._perform({method:"call",transaction:s,blockTag:t}))}catch(o){if(!this.disableCcipRead&&Rr(o)&&o.data&&r>=0&&t==="latest"&&s.to!=null&&re(o.data,0,4)==="0x556f1830"){let i=o.data,a=await be(s.to,this),c;try{c=db(re(o.data,4))}catch(f){g(!1,f.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:i}})}g(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:i,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});let l=await this.ccipReadFetch(s,c.calldata,c.urls);g(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:o.data,errorArgs:c.errorArgs}});let u={to:a,data:M([c.selector,fb([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{let f=await this.#u(u,t,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:f}),f}catch(f){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:f}),f}}throw o}}async#d(e){let{value:t}=await pe({network:this.getNetwork(),value:e});return t}async call(e){let{tx:t,blockTag:r}=await pe({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#d(this.#u(t,r,e.enableCcipRead?0:-1))}async#h(e,t,r){let s=this._getAddress(t),o=this._getBlockTag(r);return(typeof s!="string"||typeof o!="string")&&([s,o]=await Promise.all([s,o])),await this.#d(this.#c(Object.assign(e,{address:s,blockTag:o})))}async getBalance(e,t){return I(await this.#h({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return U(await this.#h({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return A(await this.#h({method:"getCode"},e,t))}async getStorage(e,t,r){let s=I(t,"position");return A(await this.#h({method:"getStorage",position:s},e,r))}async broadcastTransaction(e){let{blockNumber:t,hash:r,network:s}=await pe({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),o=ft.from(e);if(o.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(o,s).replaceableTransaction(t)}async#b(e,t){if(W(e,32))return await this.#c({method:"getBlock",blockHash:e,includeTransactions:t});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await this.#c({method:"getBlock",blockTag:r,includeTransactions:t})}async getBlock(e,t){let{network:r,params:s}=await pe({network:this.getNetwork(),params:this.#b(e,!!t)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){let{network:t,params:r}=await pe({network:this.getNetwork(),params:this.#c({method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,t)}async getTransactionReceipt(e){let{network:t,params:r}=await pe({network:this.getNetwork(),params:this.#c({method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){let s=await this.#c({method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,t)}async getTransactionResult(e){let{result:t}=await pe({network:this.getNetwork(),result:this.#c({method:"getTransactionResult",hash:e})});return t==null?null:A(t)}async getLogs(e){let t=this._getFilter(e);ua(t)&&(t=await t);let{network:r,params:s}=await pe({network:this.getNetwork(),params:this.#c({method:"getLogs",filter:t})});return s.map(o=>this._wrapLog(o,r))}_getProvider(e){g(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await qr.fromName(this,e)}async getAvatar(e){let t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){let t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=D(e);let t=Wr(e.substring(2).toLowerCase()+".addr.reverse");try{let r=await qr.getEnsAddress(this),o=await new ot(r,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(o==null||o===Mt)return null;let a=await new ot(o,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(a)!==e?null:a}catch(r){if(se(r,"BAD_DATA")&&r.value==="0x"||se(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,t,r){let s=t??1;return s===0?this.getTransactionReceipt(e):new Promise(async(o,i)=>{let a=null,c=async l=>{try{let u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){o(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),i(Q("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){g(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){let t=this.#l.get(e);t&&(t.timer&&clearTimeout(t.timer),this.#l.delete(e))}_setTimeout(e,t){t==null&&(t=0);let r=this.#f++,s=()=>{this.#l.delete(r),e()};if(this.paused)this.#l.set(r,{timer:null,func:s,time:t});else{let o=setTimeout(s,t);this.#l.set(r,{timer:o,func:s,time:wl()})}return r}_forEachSubscriber(e){for(let t of this.#e.values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Vt(e.type);case"block":{let t=new ia(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new aa(this,e.type);case"event":return new Zr(this,e.filter);case"transaction":return new la(this,e.hash);case"orphan":return new ca(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(let r of this.#e.values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=t,r.started&&t.start(),this.#r!=null&&t.pause(this.#r);break}}async#m(e,t){let r=await yl(e,this);return r.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(r=await yl({orphan:"drop-log",log:t[0]},this)),this.#e.get(r.tag)||null}async#g(e){let t=await yl(e,this),r=t.tag,s=this.#e.get(r);return s||(s={subscriber:this._getSubscriber(t),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#e.set(r,s)),s}async on(e,t){let r=await this.#g(e);return r.listeners.push({listener:t,once:!1}),r.started||(r.subscriber.start(),r.started=!0,this.#r!=null&&r.subscriber.pause(this.#r)),this}async once(e,t){let r=await this.#g(e);return r.listeners.push({listener:t,once:!0}),r.started||(r.subscriber.start(),r.started=!0,this.#r!=null&&r.subscriber.pause(this.#r)),this}async emit(e,...t){let r=await this.#m(e,t);if(!r||r.listeners.length===0)return!1;let s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:o,once:i})=>{let a=new ar(this,i?null:o,e);try{o.call(this,...t,a)}catch{}return!i}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),this.#e.delete(r.tag)),s>0}async listenerCount(e){if(e){let r=await this.#m(e);return r?r.listeners.length:0}let t=0;for(let{listeners:r}of this.#e.values())t+=r.length;return t}async listeners(e){if(e){let r=await this.#m(e);return r?r.listeners.map(({listener:s})=>s):[]}let t=[];for(let{listeners:r}of this.#e.values())t=t.concat(r.map(({listener:s})=>s));return t}async off(e,t){let r=await this.#m(e);if(!r)return this;if(t){let s=r.listeners.map(({listener:o})=>o).indexOf(t);s>=0&&r.listeners.splice(s,1)}return(!t||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),this.#e.delete(r.tag)),this}async removeAllListeners(e){if(e){let{tag:t,started:r,subscriber:s}=await this.#g(e);r&&s.stop(),this.#e.delete(t)}else for(let[t,{started:r,subscriber:s}]of this.#e)r&&s.stop(),this.#e.delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#n}destroy(){this.removeAllListeners();for(let e of this.#l.keys())this._clearTimeout(e);this.#n=!0}get paused(){return this.#r!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#a=-1,this.#r!=null){if(this.#r==!!e)return;g(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),this.#r=!!e;for(let t of this.#l.values())t.timer&&clearTimeout(t.timer),t.time=wl()-t.time}resume(){if(this.#r!=null){this._forEachSubscriber(e=>e.resume()),this.#r=null;for(let e of this.#l.values()){let t=e.time;t<0&&(t=0),e.time=wl(),setTimeout(e.func,t)}}}};function cb(n,e){try{let t=El(n,e);if(t)return Ze(t)}catch{}return null}function El(n,e){if(n==="0x")return null;try{let t=U(re(n,e,e+32)),r=U(re(n,t,t+32));return re(n,t+32,t+32+r)}catch{}return null}function Od(n){let e=ee(n);if(e.length>32)throw new Error("internal; should not happen");let t=new Uint8Array(32);return t.set(e,32-e.length),t}function lb(n){if(n.length%32===0)return n;let e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}var ub=new Uint8Array([]);function fb(n){let e=[],t=0;for(let r=0;r<n.length;r++)e.push(ub),t+=32;for(let r=0;r<n.length;r++){let s=E(n[r]);e[r]=Od(t),e.push(Od(s.length)),e.push(lb(s)),t+=32+Math.ceil(s.length/32)*32}return M(e)}var Dd="0x0000000000000000000000000000000000000000000000000000000000000000";function db(n){let e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};g(nt(n)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});let t=re(n,0,32);g(re(t,0,12)===re(Dd,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=re(t,12);try{let r=[],s=U(re(n,32,64)),o=U(re(n,s,s+32)),i=re(n,s+32);for(let a=0;a<o;a++){let c=cb(i,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{g(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{let r=El(n,64);if(r==null)throw new Error("abort");e.calldata=r}catch{g(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}g(re(n,100,128)===re(Dd,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=re(n,96,100);try{let r=El(n,128);if(r==null)throw new Error("abort");e.extraData=r}catch{g(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Hn(n,e){if(n.provider)return n.provider;g(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function Ld(n,e){let t=bt(e);if(t.to!=null&&(t.to=be(t.to,n)),t.from!=null){let r=t.from;t.from=Promise.all([n.getAddress(),be(r,n)]).then(([s,o])=>(d(s.toLowerCase()===o.toLowerCase(),"transaction from mismatch","tx.from",o),s))}else t.from=n.getAddress();return await pe(t)}var wt=class{provider;constructor(e){k(this,{provider:e||null})}async getNonce(e){return Hn(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await Ld(this,e)}async populateTransaction(e){let t=Hn(this,"populateTransaction"),r=await Ld(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));let s=await this.provider.getNetwork();if(r.chainId!=null){let i=I(r.chainId);d(i===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;let o=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||o)?d(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&o&&d(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){let i=await t.getFeeData();g(i.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice)}else{let i=await t.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){let a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(g(!o,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):g(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return await pe(r)}async populateAuthorization(e){let t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await Hn(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return Hn(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Hn(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Hn(this,"resolveName").resolveName(e)}async sendTransaction(e){let t=Hn(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;let s=ft.from(r);return await t.broadcastTransaction(await this.signTransaction(s))}authorize(e){g(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}},Gn=class n extends wt{address;constructor(e,t){super(t),k(this,{address:e})}async getAddress(){return this.address}connect(e){return new n(this.address,e)}#e(e,t){g(!1,`VoidSigner cannot sign ${e}`,"UNSUPPORTED_OPERATION",{operation:t})}async signTransaction(e){this.#e("transactions","signTransaction")}async signMessage(e){this.#e("messages","signMessage")}async signTypedData(e,t,r){this.#e("typed-data","signTypedData")}};var Md=new Set;function Ve(n){Md.has(n)||(Md.add(n),console.log("========= NOTICE ========="),console.log(`Request-Rate Exceeded for ${n} (this message will not be repeated)`),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.org/api-keys/"),console.log("=========================="))}function hb(n){return JSON.parse(JSON.stringify(n))}var da=class{#e;#t;#r;#n;#s;#i;constructor(e){this.#e=e,this.#t=null,this.#r=this.#o.bind(this),this.#n=!1,this.#s=null,this.#i=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#o(e){try{this.#t==null&&(this.#t=this._subscribe(this.#e));let t=null;try{t=await this.#t}catch(o){if(!se(o,"UNSUPPORTED_OPERATION")||o.operation!=="eth_newFilter")throw o}if(t==null){this.#t=null,this.#e._recoverSubscriber(this,this._recover(this.#e));return}let r=await this.#e.getNetwork();if(this.#s||(this.#s=r),this.#s.chainId!==r.chainId)throw new Error("chaid changed");if(this.#i)return;let s=await this.#e.send("eth_getFilterChanges",[t]);await this._emitResults(this.#e,s)}catch(t){console.log("@TODO",t)}this.#e.once("block",this.#r)}#a(){let e=this.#t;e&&(this.#t=null,e.then(t=>{this.#e.destroyed||this.#e.send("eth_uninstallFilter",[t])}))}start(){this.#n||(this.#n=!0,this.#o(-2))}stop(){this.#n&&(this.#n=!1,this.#i=!0,this.#a(),this.#e.off("block",this.#r))}pause(e){e&&this.#a(),this.#e.off("block",this.#r)}resume(){this.start()}},ha=class extends da{#e;constructor(e,t){super(e),this.#e=hb(t)}_recover(e){return new Zr(e,this.#e)}async _subscribe(e){return await e.send("eth_newFilter",[this.#e])}async _emitResults(e,t){for(let r of t)e.emit(this.#e,e._wrapLog(r,e._network))}},pa=class extends da{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(let r of t)e.emit("pending",r)}};var pb="bigint,boolean,function,number,string,symbol".split(/,/g);function xa(n){if(n==null||pb.indexOf(typeof n)>=0||typeof n.getAddress=="function")return n;if(Array.isArray(n))return n.map(xa);if(typeof n=="object")return Object.keys(n).reduce((e,t)=>(e[t]=n[t],e),{});throw new Error(`should not happen: ${n} (${typeof n})`)}function xb(n){return new Promise(e=>{setTimeout(e,n)})}function Ms(n){return n&&n.toLowerCase()}function Fd(n){return n&&typeof n.pollingInterval=="number"}var _d={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3},Xr=class extends wt{address;constructor(e,t){super(e),t=D(t),k(this,{address:t})}connect(e){g(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){let t=xa(e),r=[];if(t.from){let o=t.from;r.push((async()=>{let i=await be(o,this.provider);d(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=i})())}else t.from=this.address;if(t.gasLimit==null&&r.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),t.to!=null){let o=t.to;r.push((async()=>{t.to=await be(o,this.provider)})())}r.length&&await Promise.all(r);let s=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(e){let t=await this.provider.getBlockNumber(),r=await this.sendUncheckedTransaction(e);return await new Promise((s,o)=>{let i=[1e3,100],a=0,c=async()=>{try{let l=await this.provider.getTransaction(r);if(l!=null){s(l.replaceableTransaction(t));return}}catch(l){if(se(l,"CANCELLED")||se(l,"BAD_DATA")||se(l,"NETWORK_ERROR")||se(l,"UNSUPPORTED_OPERATION")){l.info==null&&(l.info={}),l.info.sendTransactionHash=r,o(l);return}if(se(l,"INVALID_ARGUMENT")&&(a++,l.info==null&&(l.info={}),l.info.sendTransactionHash=r,a>10)){o(l);return}this.provider.emit("error",Q("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:l}))}this.provider._setTimeout(()=>{c()},i.pop()||4e3)};c()})}async signTransaction(e){let t=xa(e);if(t.from){let s=await be(t.from,this.provider);d(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=s}else t.from=this.address;let r=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[r])}async signMessage(e){let t=typeof e=="string"?ae(e):e;return await this.provider.send("personal_sign",[A(t),this.address.toLowerCase()])}async signTypedData(e,t,r){let s=xa(r),o=await mt.resolveNames(e,t,s,async i=>{let a=await be(i);return d(a!=null,"TypedData does not support null address","value",i),a});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(mt.getPayload(o.domain,t,o.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){let t=typeof e=="string"?ae(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),A(t)])}},en=class extends yt{#e;#t;#r;#n;#s;#i;#o;#a(){if(this.#n)return;let e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");this.#n=setTimeout(()=>{this.#n=null;let t=this.#r;for(this.#r=[];t.length;){let r=[t.shift()];for(;t.length&&r.length!==this.#e.batchMaxCount;)if(r.push(t.shift()),JSON.stringify(r.map(o=>o.payload)).length>this.#e.batchMaxSize){t.unshift(r.pop());break}(async()=>{let s=r.length===1?r[0].payload:r.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{let o=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:o});for(let{resolve:i,reject:a,payload:c}of r){if(this.destroyed){a(Q("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:c.method}));continue}let l=o.filter(u=>u.id===c.id)[0];if(l==null){let u=Q("missing response for request","BAD_DATA",{value:o,info:{payload:c}});this.emit("error",u),a(u);continue}if("error"in l){a(this.getRpcError(c,l));continue}i(l.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(let{reject:i}of r)i(o)}})()}},e)}constructor(e,t){super(e,t),this.#t=1,this.#e=Object.assign({},_d,t||{}),this.#r=[],this.#n=null,this.#i=null,this.#o=null;{let s=null,o=new Promise(i=>{s=i});this.#s={promise:o,resolve:s}}let r=this._getOption("staticNetwork");typeof r=="boolean"?(d(!r||e!=="any","staticNetwork cannot be used on special network 'any'","options",t),r&&e!=null&&(this.#i=J.from(e))):r&&(d(e==null||r.matches(e),"staticNetwork MUST match network object","options",t),this.#i=r)}_getOption(e){return this.#e[e]}get _network(){return g(this.#i,"network is not available yet","NETWORK_ERROR"),this.#i}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let r=e.transaction;if(r&&r.type!=null&&I(r.type)&&r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null){let s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},r,{type:void 0})}))}}let t=this.getRpcRequest(e);return t!=null?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){let e=this._getOption("staticNetwork");if(e)if(e===!0){if(this.#i)return this.#i}else return e;return this.#o?await this.#o:this.ready?(this.#o=(async()=>{try{let t=J.from(I(await this.send("eth_chainId",[])));return this.#o=null,t}catch(t){throw this.#o=null,t}})(),await this.#o):(this.#o=(async()=>{let t={id:this.#t++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:t});let r;try{r=(await this._send(t))[0],this.#o=null}catch(s){throw this.#o=null,this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:r}),"result"in r)return J.from(I(r.result));throw this.getRpcError(t,r)})(),await this.#o)}_start(){this.#s==null||this.#s.resolve==null||(this.#s.resolve(),this.#s=null,(async()=>{for(;this.#i==null&&!this.destroyed;)try{this.#i=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Q("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await xb(1e3)}this.#a()})())}async _waitUntilReady(){if(this.#s!=null)return await this.#s.promise}_getSubscriber(e){return e.type==="pending"?new pa(this):e.type==="event"?this._getOption("polling")?new Zr(this,e.filter):new ha(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new Vt("orphan"):super._getSubscriber(e)}get ready(){return this.#s==null}getRpcTransaction(e){let t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(r=>{if(e[r]==null)return;let s=r;r==="gasLimit"&&(s="gas"),t[s]=Ue(I(e[r],`tx.${r}`))}),["from","to","data"].forEach(r=>{e[r]!=null&&(t[r]=A(e[r]))}),e.accessList&&(t.accessList=Ge(e.accessList)),e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.map(r=>r.toLowerCase())),e.authorizationList&&(t.authorizationList=e.authorizationList.map(r=>{let s=vn(r);return{address:s.address,nonce:Ue(s.nonce),chainId:Ue(s.chainId),yParity:Ue(s.signature.yParity),r:Ue(s.signature.r),s:Ue(s.signature.s)}})),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Ms(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Ms(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[Ms(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Ms(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(Ms):e.filter.address=Ms(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){let{method:r}=e,{error:s}=t;if(r==="eth_estimateGas"&&s.message){let a=s.message;if(!a.match(/revert/i)&&a.match(/insufficient funds/i))return Q("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:s}});if(a.match(/nonce/i)&&a.match(/too low/i))return Q("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:s}})}if(r==="eth_call"||r==="eth_estimateGas"){let a=kl(s),c=gt.getBuiltinCallException(r==="eth_call"?"call":"estimateGas",e.params[0],a?a.data:null);return c.info={error:s,payload:e},c}let o=JSON.stringify(mb(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return Q("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[r]||"unknown",reason:"rejected",info:{payload:e,error:s}});if(r==="eth_sendRawTransaction"||r==="eth_sendTransaction"){let a=e.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Q("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:a,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return Q("nonce has already been used","NONCE_EXPIRED",{transaction:a,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Q("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:a,info:{error:s}});if(o.match(/only replay-protected/i))return Q("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:a,info:{error:s}}})}let i=!!o.match(/the method .* does not exist/i);return i||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(i=!0),i?Q("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:s,payload:e}}):Q("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:e})}send(e,t){if(this.destroyed)return Promise.reject(Q("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));let r=this.#t++,s=new Promise((o,i)=>{this.#r.push({resolve:o,reject:i,payload:{method:e,params:t,id:r,jsonrpc:"2.0"}})});return this.#a(),s}async getSigner(e){e==null&&(e=0);let t=this.send("eth_accounts",[]);if(typeof e=="number"){let s=await t;if(e>=s.length)throw new Error("no such account");return new Xr(this,s[e])}let{accounts:r}=await pe({network:this.getNetwork(),accounts:t});e=D(e);for(let s of r)if(D(s)===e)return new Xr(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(t=>new Xr(this,t))}destroy(){this.#n&&(clearTimeout(this.#n),this.#n=null);for(let{payload:e,reject:t}of this.#r)t(Q("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#r=[],super.destroy()}},Uo=class extends en{#e;constructor(e,t){super(e,t);let r=this._getOption("pollingInterval");r==null&&(r=_d.pollingInterval),this.#e=r}_getSubscriber(e){let t=super._getSubscriber(e);return Fd(t)&&(t.pollingInterval=this.#e),t}get pollingInterval(){return this.#e}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#e=e,this._forEachSubscriber(t=>{Fd(t)&&(t.pollingInterval=this.#e)})}},Ae=class extends Uo{#e;constructor(e,t,r){e==null&&(e="http://localhost:8545"),super(t,r),typeof e=="string"?this.#e=new ce(e):this.#e=e.clone()}_getConnection(){return this.#e.clone()}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){let t=this._getConnection();t.body=JSON.stringify(e),t.setHeader("content-type","application/json");let r=await t.send();r.assertOk();let s=r.bodyJson;return Array.isArray(s)||(s=[s]),s}};function kl(n){if(n==null)return null;if(typeof n.message=="string"&&n.message.match(/revert/i)&&W(n.data))return{message:n.message,data:n.data};if(typeof n=="object"){for(let e in n){let t=kl(n[e]);if(t)return t}return null}if(typeof n=="string")try{return kl(JSON.parse(n))}catch{}return null}function Nl(n,e){if(n!=null){if(typeof n.message=="string"&&e.push(n.message),typeof n=="object")for(let t in n)Nl(n[t],e);if(typeof n=="string")try{return Nl(JSON.parse(n),e)}catch{}}}function mb(n){let e=[];return Nl(n,e),e}var ma="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function gb(n){switch(n){case"mainnet":return"rpc.ankr.com/eth";case"goerli":return"rpc.ankr.com/eth_goerli";case"sepolia":return"rpc.ankr.com/eth_sepolia";case"arbitrum":return"rpc.ankr.com/arbitrum";case"base":return"rpc.ankr.com/base";case"base-goerli":return"rpc.ankr.com/base_goerli";case"base-sepolia":return"rpc.ankr.com/base_sepolia";case"bnb":return"rpc.ankr.com/bsc";case"bnbt":return"rpc.ankr.com/bsc_testnet_chapel";case"filecoin":return"rpc.ankr.com/filecoin";case"filecoin-calibration":return"rpc.ankr.com/filecoin_testnet";case"matic":return"rpc.ankr.com/polygon";case"matic-mumbai":return"rpc.ankr.com/polygon_mumbai";case"optimism":return"rpc.ankr.com/optimism";case"optimism-goerli":return"rpc.ankr.com/optimism_testnet";case"optimism-sepolia":return"rpc.ankr.com/optimism_sepolia"}d(!1,"unsupported network","network",n)}var Kn=class n extends Ae{apiKey;constructor(e,t){e==null&&(e="mainnet");let r=J.from(e);t==null&&(t=ma);let s={polling:!0,staticNetwork:r},o=n.getRequest(r,t);super(o,r,s),k(this,{apiKey:t})}_getProvider(e){try{return new n(e,this.apiKey)}catch{}return super._getProvider(e)}static getRequest(e,t){t==null&&(t=ma);let r=new ce(`https://${gb(e.name)}/${t}`);return r.allowGzip=!0,t===ma&&(r.retryFunc=async(s,o,i)=>(Ve("AnkrProvider"),!0)),r}getRpcError(e,t){return e.method==="eth_sendRawTransaction"&&t&&t.error&&t.error.message==="INTERNAL_ERROR: could not replace existing tx"&&(t.error.message="replacement transaction underpriced"),super.getRpcError(e,t)}isCommunityResource(){return this.apiKey===ma}};var ga="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";function bb(n){switch(n){case"mainnet":return"eth-mainnet.g.alchemy.com";case"goerli":return"eth-goerli.g.alchemy.com";case"sepolia":return"eth-sepolia.g.alchemy.com";case"arbitrum":return"arb-mainnet.g.alchemy.com";case"arbitrum-goerli":return"arb-goerli.g.alchemy.com";case"arbitrum-sepolia":return"arb-sepolia.g.alchemy.com";case"base":return"base-mainnet.g.alchemy.com";case"base-goerli":return"base-goerli.g.alchemy.com";case"base-sepolia":return"base-sepolia.g.alchemy.com";case"matic":return"polygon-mainnet.g.alchemy.com";case"matic-amoy":return"polygon-amoy.g.alchemy.com";case"matic-mumbai":return"polygon-mumbai.g.alchemy.com";case"optimism":return"opt-mainnet.g.alchemy.com";case"optimism-goerli":return"opt-goerli.g.alchemy.com";case"optimism-sepolia":return"opt-sepolia.g.alchemy.com"}d(!1,"unsupported network","network",n)}var Wn=class n extends Ae{apiKey;constructor(e,t){e==null&&(e="mainnet");let r=J.from(e);t==null&&(t=ga);let s=n.getRequest(r,t);super(s,r,{staticNetwork:r}),k(this,{apiKey:t})}_getProvider(e){try{return new n(e,this.apiKey)}catch{}return super._getProvider(e)}async _perform(e){if(e.method==="getTransactionResult"){let{trace:t,tx:r}=await pe({trace:this.send("trace_transaction",[e.hash]),tx:this.getTransaction(e.hash)});if(t==null||r==null)return null;let s,o=!1;try{s=t[0].result.output,o=t[0].error==="Reverted"}catch{}if(s)return g(!o,"an error occurred during transaction executions","CALL_EXCEPTION",{action:"getTransactionResult",data:s,reason:null,transaction:r,invocation:null,revert:null}),s;g(!1,"could not parse trace result","BAD_DATA",{value:t})}return await super._perform(e)}isCommunityResource(){return this.apiKey===ga}static getRequest(e,t){t==null&&(t=ga);let r=new ce(`https://${bb(e.name)}/v2/${t}`);return r.allowGzip=!0,t===ga&&(r.retryFunc=async(s,o,i)=>(Ve("alchemy"),!0)),r}};function ba(n){switch(n){case"mainnet":return"39f1d67cedf8b7831010a665328c9197";case"arbitrum":return"0550c209db33c3abf4cc927e1e18cea1";case"bnb":return"98b5a77e531614387366f6fc5da097f8";case"matic":return"cd9d4d70377471aa7c142ec4a4205249"}d(!1,"unsupported network","network",n)}function yb(n){switch(n){case"mainnet":return"ethereum-mainnet.core.chainstack.com";case"arbitrum":return"arbitrum-mainnet.core.chainstack.com";case"bnb":return"bsc-mainnet.core.chainstack.com";case"matic":return"polygon-mainnet.core.chainstack.com"}d(!1,"unsupported network","network",n)}var Vn=class n extends Ae{apiKey;constructor(e,t){e==null&&(e="mainnet");let r=J.from(e);t==null&&(t=ba(r.name));let s=n.getRequest(r,t);super(s,r,{staticNetwork:r}),k(this,{apiKey:t})}_getProvider(e){try{return new n(e,this.apiKey)}catch{}return super._getProvider(e)}isCommunityResource(){return this.apiKey===ba(this._network.name)}static getRequest(e,t){t==null&&(t=ba(e.name));let r=new ce(`https://${yb(e.name)}/${t}`);return r.allowGzip=!0,t===ba(e.name)&&(r.retryFunc=async(s,o,i)=>(Ve("ChainstackProvider"),!0)),r}};var zn=class extends Ae{constructor(e){e==null&&(e="mainnet");let t=J.from(e);d(t.name==="mainnet","unsupported network","network",e),super("https://cloudflare-eth.com/",t,{staticNetwork:t})}};var wb="1 11155111 17000 560048 2741 11124 33111 33139 42170 42161 421614 43114 43113 8453 84532 80069 80094 199 1029 81457 168587773 56 97 42220 11142220 252 2523 100 999 737373 747474 59144 59141 5000 5003 43521 143 10143 1287 1284 1285 10 11155420 204 5611 80002 137 534352 534351 1329 1328 146 14601 988 2201 1923 1924 167013 167000 130 1301 480 4801 51 50 324 300".split(/ /g),Hd=2e3;function Ab(n){return n&&typeof n.then=="function"}var Gd="org.ethers.plugins.provider.Etherscan",Oo=class n extends Wt{baseUrl;constructor(e){super(Gd),k(this,{baseUrl:e})}clone(){return new n(this.baseUrl)}},Eb=["enableCcipRead"],kb=1,Qn=class extends yt{network;apiKey;#e;constructor(e,t){let r=t??null;super();let s=J.from(e);d(wb.indexOf(`${s.chainId}`)>=0,"unsupported network","network",s),this.#e=s.getPlugin(Gd),k(this,{apiKey:r,network:s})}getBaseUrl(){if(this.#e)return this.#e.baseUrl;switch(this.network.name){case"mainnet":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"holesky":return"https://api-holesky.etherscan.io";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"base":return"https://api.basescan.org";case"base-sepolia":return"https://api-sepolia.basescan.org";case"bnb":return"https://api.bscscan.com";case"bnbt":return"https://api-testnet.bscscan.com";case"matic":return"https://api.polygonscan.com";case"matic-amoy":return"https://api-amoy.polygonscan.com";case"matic-mumbai":return"https://api-testnet.polygonscan.com";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io";default:}d(!1,"unsupported network","network",this.network)}getUrl(e,t){let r=Object.keys(t).reduce((s,o)=>{let i=t[o];return i!=null&&(s+=`&${o}=${i}`),s},"");return this.apiKey&&(r+=`&apikey=${this.apiKey}`),`https://api.etherscan.io/v2/api?chainid=${this.network.chainId}&module=${e}${r}`}getPostUrl(){return`https://api.etherscan.io/v2/api?chainid=${this.network.chainId}`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t.chainid=this.network.chainId,t}async detectNetwork(){return this.network}async fetch(e,t,r){let s=kb++,o=r?this.getPostUrl():this.getUrl(e,t),i=r?this.getPostData(e,t):null;this.emit("debug",{action:"sendRequest",id:s,url:o,payload:i});let a=new ce(o);a.setThrottleParams({slotInterval:1e3}),a.retryFunc=(u,f,h)=>(this.isCommunityResource()&&Ve("Etherscan"),Promise.resolve(!0)),a.processFunc=async(u,f)=>{let h=f.hasBody()?JSON.parse(Ze(f.body)):{},p=(typeof h.result=="string"?h.result:"").toLowerCase().indexOf("rate limit")>=0;return e==="proxy"?h&&h.status==0&&h.message=="NOTOK"&&p&&(this.emit("debug",{action:"receiveError",id:s,reason:"proxy-NOTOK",error:h}),f.throwThrottleError(h.result,Hd)):p&&(this.emit("debug",{action:"receiveError",id:s,reason:"null result",error:h.result}),f.throwThrottleError(h.result,Hd)),f},i&&(a.setHeader("content-type","application/x-www-form-urlencoded; charset=UTF-8"),a.body=Object.keys(i).map(u=>`${u}=${i[u]}`).join("&"));let c=await a.send();try{c.assertOk()}catch(u){this.emit("debug",{action:"receiveError",id:s,error:u,reason:"assertOk"}),g(!1,"response error","SERVER_ERROR",{request:a,response:c})}c.hasBody()||(this.emit("debug",{action:"receiveError",id:s,error:"missing body",reason:"null body"}),g(!1,"missing response","SERVER_ERROR",{request:a,response:c}));let l=JSON.parse(Ze(c.body));return e==="proxy"?(l.jsonrpc!="2.0"&&(this.emit("debug",{action:"receiveError",id:s,result:l,reason:"invalid JSON-RPC"}),g(!1,"invalid JSON-RPC response (missing jsonrpc='2.0')","SERVER_ERROR",{request:a,response:c,info:{result:l}})),l.error&&(this.emit("debug",{action:"receiveError",id:s,result:l,reason:"JSON-RPC error"}),g(!1,"error response","SERVER_ERROR",{request:a,response:c,info:{result:l}})),this.emit("debug",{action:"receiveRequest",id:s,result:l}),l.result):l.status==0&&(l.message==="No records found"||l.message==="No transactions found")?(this.emit("debug",{action:"receiveRequest",id:s,result:l}),l.result):((l.status!=1||typeof l.message=="string"&&!l.message.match(/^OK/))&&(this.emit("debug",{action:"receiveError",id:s,result:l}),g(!1,"error response","SERVER_ERROR",{request:a,response:c,info:{result:l}})),this.emit("debug",{action:"receiveRequest",id:s,result:l}),l.result)}_getTransactionPostData(e){let t={};for(let r in e){if(Eb.indexOf(r)>=0||e[r]==null)continue;let s=e[r];if(!(r==="type"&&s===0)&&!(r==="blockTag"&&s==="latest")){if({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r])s=Ue(s);else if(r==="accessList")s="["+Ge(s).map(o=>`{address:"${o.address}",storageKeys:["${o.storageKeys.join('","')}"]}`).join(",")+"]";else if(r==="blobVersionedHashes"){if(s.length===0)continue;g(!1,"Etherscan API does not support blobVersionedHashes","UNSUPPORTED_OPERATION",{operation:"_getTransactionPostData",info:{transaction:e}})}else s=A(s);t[r]=s}}return t}_checkError(e,t,r){let s="";if(se(t,"SERVER_ERROR")){try{s=t.info.result.error.message}catch{}if(!s)try{s=t.info.message}catch{}}if(e.method==="estimateGas"&&!s.match(/revert/i)&&s.match(/insufficient funds/i)&&g(!1,"insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.transaction}),(e.method==="call"||e.method==="estimateGas")&&s.match(/execution reverted/i)){let o="";try{o=t.info.result.error.data}catch{}let i=gt.getBuiltinCallException(e.method,e.transaction,o);throw i.info={request:e,error:t},i}if(s&&e.method==="broadcastTransaction"){let o=ft.from(e.signedTransaction);s.match(/replacement/i)&&s.match(/underpriced/i)&&g(!1,"replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:o}),s.match(/insufficient funds/)&&g(!1,"insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:o}),s.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&g(!1,"nonce has already been used","NONCE_EXPIRED",{transaction:o})}throw t}async _detectNetwork(){return this.network}async _perform(e){switch(e.method){case"chainId":return this.network.chainId;case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getPriorityFee":if(this.network.name==="mainnet")return"1000000000";if(this.network.name==="optimism")return"1000000";throw new Error("fallback onto the AbstractProvider default");case"getBalance":return this.fetch("account",{action:"balance",address:e.address,tag:e.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:e.address,tag:e.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:e.address,tag:e.blockTag});case"getStorage":return this.fetch("proxy",{action:"eth_getStorageAt",address:e.address,position:e.position,tag:e.blockTag});case"broadcastTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:e.signedTransaction},!0).catch(t=>this._checkError(e,t,e.signedTransaction));case"getBlock":if("blockTag"in e)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:e.blockTag,boolean:e.includeTransactions?"true":"false"});g(!1,"getBlock by blockHash not supported by Etherscan","UNSUPPORTED_OPERATION",{operation:"getBlock(blockHash)"});case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:e.hash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:e.hash});case"call":{if(e.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");let t=this._getTransactionPostData(e.transaction);t.module="proxy",t.action="eth_call";try{return await this.fetch("proxy",t,!0)}catch(r){return this._checkError(e,r,e.transaction)}}case"estimateGas":{let t=this._getTransactionPostData(e.transaction);t.module="proxy",t.action="eth_estimateGas";try{return await this.fetch("proxy",t,!0)}catch(r){return this._checkError(e,r,e.transaction)}}default:break}return super._perform(e)}async getNetwork(){return this.network}async getEtherPrice(){return this.network.name!=="mainnet"?0:parseFloat((await this.fetch("stats",{action:"ethprice"})).ethusd)}async getContract(e){let t=this._getAddress(e);Ab(t)&&(t=await t);try{let r=await this.fetch("contract",{action:"getabi",address:t}),s=JSON.parse(r);return new ot(t,s,this)}catch{return null}}isCommunityResource(){return this.apiKey==null}};function Nb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}var Kd=Nb().WebSocket;var tn=class{#e;#t;get filter(){return JSON.parse(this.#t)}#r;#n;#s;constructor(e,t){this.#e=e,this.#t=JSON.stringify(t),this.#r=null,this.#n=null,this.#s=null}start(){this.#r=this.#e.send("eth_subscribe",this.filter).then(e=>(this.#e._register(e,this),e))}stop(){this.#r.then(e=>{this.#e.destroyed||this.#e.send("eth_unsubscribe",[e])}),this.#r=null}pause(e){g(e,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"}),this.#n=!!e}resume(){this.#n=null}_handleMessage(e){if(this.#r!=null&&this.#n===null){let t=this.#s;t==null?t=this._emit(this.#e,e):t=t.then(async()=>{await this._emit(this.#e,e)}),this.#s=t.then(()=>{this.#s===t&&(this.#s=null)})}}async _emit(e,t){throw new Error("sub-classes must implemente this; _emit")}},Fs=class extends tn{constructor(e){super(e,["newHeads"])}async _emit(e,t){e.emit("block",parseInt(t.number))}},_s=class extends tn{constructor(e){super(e,["newPendingTransactions"])}async _emit(e,t){e.emit("pending",t)}},Hs=class extends tn{#e;get logFilter(){return JSON.parse(this.#e)}constructor(e,t){super(e,["logs",t]),this.#e=JSON.stringify(t)}async _emit(e,t){e.emit(this.logFilter,e._wrapLog(t,e._network))}},Jn=class extends en{#e;#t;#r;constructor(e,t){let r=Object.assign({},t??{});d(r.batchMaxCount==null||r.batchMaxCount===1,"sockets-based providers do not support batches","options.batchMaxCount",t),r.batchMaxCount=1,r.staticNetwork==null&&(r.staticNetwork=!0),super(e,r),this.#e=new Map,this.#t=new Map,this.#r=new Map}_getSubscriber(e){switch(e.type){case"close":return new Vt("close");case"block":return new Fs(this);case"pending":return new _s(this);case"event":return new Hs(this,e.filter);case"orphan":if(e.filter.orphan==="drop-log")return new Vt("drop-log")}return super._getSubscriber(e)}_register(e,t){this.#t.set(e,t);let r=this.#r.get(e);if(r){for(let s of r)t._handleMessage(s);this.#r.delete(e)}}async _send(e){d(!Array.isArray(e),"WebSocket does not support batch send","payload",e);let t=new Promise((r,s)=>{this.#e.set(e.id,{payload:e,resolve:r,reject:s})});return await this._waitUntilReady(),await this._write(JSON.stringify(e)),[await t]}async _processMessage(e){let t=JSON.parse(e);if(t&&typeof t=="object"&&"id"in t){let r=this.#e.get(t.id);if(r==null){this.emit("error",Q("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:t}));return}this.#e.delete(t.id),r.resolve(t)}else if(t&&t.method==="eth_subscription"){let r=t.params.subscription,s=this.#t.get(r);if(s)s._handleMessage(t.params.result);else{let o=this.#r.get(r);o==null&&(o=[],this.#r.set(r,o)),o.push(t.params.result)}}else{this.emit("error",Q("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:t}));return}}async _write(e){throw new Error("sub-classes must override this")}};var Er=class extends Jn{#e;#t;get websocket(){if(this.#t==null)throw new Error("websocket closed");return this.#t}constructor(e,t,r){super(t,r),typeof e=="string"?(this.#e=()=>new Kd(e),this.#t=this.#e()):typeof e=="function"?(this.#e=e,this.#t=e()):(this.#e=null,this.#t=e),this.websocket.onopen=async()=>{try{await this._start(),this.resume()}catch(s){console.log("failed to start WebsocketProvider",s)}},this.websocket.onmessage=s=>{this._processMessage(s.data)}}async _write(e){this.websocket.send(e)}async destroy(){this.#t!=null&&(this.#t.close(),this.#t=null),super.destroy()}};var Do="84842078b09946638c03157f83405213";function Ib(n){switch(n){case"mainnet":return"mainnet.infura.io";case"goerli":return"goerli.infura.io";case"sepolia":return"sepolia.infura.io";case"arbitrum":return"arbitrum-mainnet.infura.io";case"arbitrum-goerli":return"arbitrum-goerli.infura.io";case"arbitrum-sepolia":return"arbitrum-sepolia.infura.io";case"base":return"base-mainnet.infura.io";case"base-goerlia":case"base-goerli":return"base-goerli.infura.io";case"base-sepolia":return"base-sepolia.infura.io";case"bnb":return"bsc-mainnet.infura.io";case"bnbt":return"bsc-testnet.infura.io";case"linea":return"linea-mainnet.infura.io";case"linea-goerli":return"linea-goerli.infura.io";case"linea-sepolia":return"linea-sepolia.infura.io";case"matic":return"polygon-mainnet.infura.io";case"matic-amoy":return"polygon-amoy.infura.io";case"matic-mumbai":return"polygon-mumbai.infura.io";case"optimism":return"optimism-mainnet.infura.io";case"optimism-goerli":return"optimism-goerli.infura.io";case"optimism-sepolia":return"optimism-sepolia.infura.io"}d(!1,"unsupported network","network",n)}var Gs=class extends Er{projectId;projectSecret;constructor(e,t){let r=new rn(e,t),s=r._getConnection();g(!s.credentials,"INFURA WebSocket project secrets unsupported","UNSUPPORTED_OPERATION",{operation:"InfuraProvider.getWebSocketProvider()"});let o=s.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(o,r._network),k(this,{projectId:r.projectId,projectSecret:r.projectSecret})}isCommunityResource(){return this.projectId===Do}},rn=class n extends Ae{projectId;projectSecret;constructor(e,t,r){e==null&&(e="mainnet");let s=J.from(e);t==null&&(t=Do),r==null&&(r=null);let o=n.getRequest(s,t,r);super(o,s,{staticNetwork:s}),k(this,{projectId:t,projectSecret:r})}_getProvider(e){try{return new n(e,this.projectId,this.projectSecret)}catch{}return super._getProvider(e)}isCommunityResource(){return this.projectId===Do}static getWebSocketProvider(e,t){return new Gs(e,t)}static getRequest(e,t,r){t==null&&(t=Do),r==null&&(r=null);let s=new ce(`https://${Ib(e.name)}/v3/${t}`);return s.allowGzip=!0,r&&s.setCredentials("",r),t===Do&&(s.retryFunc=async(o,i,a)=>(Ve("InfuraProvider"),!0)),s}};var ya="919b412a057b5e9c9b6dce193c5a60242d6efadb";function Pb(n){switch(n){case"mainnet":return"ethers.quiknode.pro";case"goerli":return"ethers.ethereum-goerli.quiknode.pro";case"sepolia":return"ethers.ethereum-sepolia.quiknode.pro";case"holesky":return"ethers.ethereum-holesky.quiknode.pro";case"arbitrum":return"ethers.arbitrum-mainnet.quiknode.pro";case"arbitrum-goerli":return"ethers.arbitrum-goerli.quiknode.pro";case"arbitrum-sepolia":return"ethers.arbitrum-sepolia.quiknode.pro";case"base":return"ethers.base-mainnet.quiknode.pro";case"base-goerli":return"ethers.base-goerli.quiknode.pro";case"base-spolia":return"ethers.base-sepolia.quiknode.pro";case"bnb":return"ethers.bsc.quiknode.pro";case"bnbt":return"ethers.bsc-testnet.quiknode.pro";case"matic":return"ethers.matic.quiknode.pro";case"matic-mumbai":return"ethers.matic-testnet.quiknode.pro";case"optimism":return"ethers.optimism.quiknode.pro";case"optimism-goerli":return"ethers.optimism-goerli.quiknode.pro";case"optimism-sepolia":return"ethers.optimism-sepolia.quiknode.pro";case"xdai":return"ethers.xdai.quiknode.pro"}d(!1,"unsupported network","network",n)}var jn=class n extends Ae{token;constructor(e,t){e==null&&(e="mainnet");let r=J.from(e);t==null&&(t=ya);let s=n.getRequest(r,t);super(s,r,{staticNetwork:r}),k(this,{token:t})}_getProvider(e){try{return new n(e,this.token)}catch{}return super._getProvider(e)}isCommunityResource(){return this.token===ya}static getRequest(e,t){t==null&&(t=ya);let r=new ce(`https://${Pb(e.name)}/${t}`);return r.allowGzip=!0,t===ya&&(r.retryFunc=async(s,o,i)=>(Ve("QuickNodeProvider"),!0)),r}};var Tb=BigInt("1"),vb=BigInt("2");function Cb(n){for(let e=n.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1)),r=n[e];n[e]=n[t],n[t]=r}}function Bb(n){return new Promise(e=>{setTimeout(e,n)})}function vl(){return new Date().getTime()}function Il(n){return JSON.stringify(n,(e,t)=>typeof t=="bigint"?{type:"bigint",value:t.toString()}:t)}var Wd={stallTimeout:400,priority:1,weight:1},Vd={blockNumber:-2,requests:0,lateResponses:0,errorResponses:0,outOfSync:-1,unsupportedEvents:0,rollingDuration:0,score:0,_network:null,_updateNumber:null,_totalTime:0,_lastFatalError:null,_lastFatalErrorTimestamp:0};async function Rb(n,e){for(;(n.blockNumber<0||n.blockNumber<e)&&(n._updateNumber||(n._updateNumber=(async()=>{try{let t=await n.provider.getBlockNumber();t>n.blockNumber&&(n.blockNumber=t)}catch(t){n.blockNumber=-2,n._lastFatalError=t,n._lastFatalErrorTimestamp=vl()}n._updateNumber=null})()),await n._updateNumber,n.outOfSync++,!n._lastFatalError););}function Ks(n){if(n==null)return"null";if(Array.isArray(n))return"["+n.map(Ks).join(",")+"]";if(typeof n=="object"&&typeof n.toJSON=="function")return Ks(n.toJSON());switch(typeof n){case"boolean":case"symbol":return n.toString();case"bigint":case"number":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{let e=Object.keys(n);return e.sort(),"{"+e.map(t=>`${JSON.stringify(t)}:${Ks(n[t])}`).join(",")+"}"}}throw console.log("Could not serialize",n),new Error("Hmm...")}function Pl(n,e){if("error"in e){let r=e.error,s;return se(r,"CALL_EXCEPTION")?s=Ks(Object.assign({},r,{shortMessage:void 0,reason:void 0,info:void 0})):s=Ks(r),{tag:s,value:r}}let t=e.result;return{tag:Ks(t),value:t}}function wa(n,e){let t=new Map;for(let{value:s,tag:o,weight:i}of e){let a=t.get(o)||{value:s,weight:0};a.weight+=i,t.set(o,a)}let r=null;for(let s of t.values())s.weight>=n&&(!r||s.weight>r.weight)&&(r=s);if(r)return r.value}function Cl(n,e){let t=0,r=new Map,s=null,o=[];for(let{value:a,tag:c,weight:l}of e)if(a instanceof Error){let u=r.get(c)||{value:a,weight:0};u.weight+=l,r.set(c,u),(s==null||u.weight>s.weight)&&(s=u)}else o.push(BigInt(a)),t+=l;if(t<n)return s&&s.weight>=n?s.value:void 0;o.sort((a,c)=>a<c?-1:c>a?1:0);let i=Math.floor(o.length/2);return o.length%2?o[i]:(o[i-1]+o[i]+Tb)/vb}function Tl(n,e){let t=wa(n,e);if(t!==void 0)return t;for(let r of e)if(r.value)return r.value}function Sb(n,e){if(n===1)return U(Cl(n,e),"%internal");let t=new Map,r=(i,a)=>{let c=t.get(i)||{result:i,weight:0};c.weight+=a,t.set(i,c)};for(let{weight:i,value:a}of e){let c=U(a);r(c-1,i),r(c,i),r(c+1,i)}let s=0,o;for(let{weight:i,result:a}of t.values())i>=n&&(i>s||o!=null&&i===s&&a>o)&&(s=i,o=a);return o}var qn=class extends yt{quorum;eventQuorum;eventWorkers;#e;#t;#r;constructor(e,t,r){super(t,r),this.#e=e.map(s=>s instanceof yt?Object.assign({provider:s},Wd,Vd):Object.assign({},Wd,s,Vd)),this.#t=-2,this.#r=null,r&&r.quorum!=null?this.quorum=r.quorum:this.quorum=Math.ceil(this.#e.reduce((s,o)=>(s+=o.weight,s),0)/2),this.eventQuorum=1,this.eventWorkers=1,d(this.quorum<=this.#e.reduce((s,o)=>s+o.weight,0),"quorum exceed provider weight","quorum",this.quorum)}get providerConfigs(){return this.#e.map(e=>{let t=Object.assign({},e);for(let r in t)r[0]==="_"&&delete t[r];return t})}async _detectNetwork(){return J.from(I(await this._perform({method:"chainId"})))}async _translatePerform(e,t){switch(t.method){case"broadcastTransaction":return await e.broadcastTransaction(t.signedTransaction);case"call":return await e.call(Object.assign({},t.transaction,{blockTag:t.blockTag}));case"chainId":return(await e.getNetwork()).chainId;case"estimateGas":return await e.estimateGas(t.transaction);case"getBalance":return await e.getBalance(t.address,t.blockTag);case"getBlock":{let r="blockHash"in t?t.blockHash:t.blockTag;return await e.getBlock(r,t.includeTransactions)}case"getBlockNumber":return await e.getBlockNumber();case"getCode":return await e.getCode(t.address,t.blockTag);case"getGasPrice":return(await e.getFeeData()).gasPrice;case"getPriorityFee":return(await e.getFeeData()).maxPriorityFeePerGas;case"getLogs":return await e.getLogs(t.filter);case"getStorage":return await e.getStorage(t.address,t.position,t.blockTag);case"getTransaction":return await e.getTransaction(t.hash);case"getTransactionCount":return await e.getTransactionCount(t.address,t.blockTag);case"getTransactionReceipt":return await e.getTransactionReceipt(t.hash);case"getTransactionResult":return await e.getTransactionResult(t.hash)}}#n(e){let t=Array.from(e).map(s=>s.config),r=this.#e.slice();Cb(r),r.sort((s,o)=>s.priority-o.priority);for(let s of r)if(!s._lastFatalError&&t.indexOf(s)===-1)return s;return null}#s(e,t){let r=this.#n(e);if(r==null)return null;let s={config:r,result:null,didBump:!1,perform:null,staller:null},o=vl();return s.perform=(async()=>{try{r.requests++;let a=await this._translatePerform(r.provider,t);s.result={result:a}}catch(a){r.errorResponses++,s.result={error:a}}let i=vl()-o;r._totalTime+=i,r.rollingDuration=.95*r.rollingDuration+.05*i,s.perform=null})(),s.staller=(async()=>{await Bb(r.stallTimeout),s.staller=null})(),e.add(s),s}async#i(){let e=this.#r;if(!e){let t=[];this.#e.forEach(r=>{t.push((async()=>{await Rb(r,0),r._lastFatalError||(r._network=await r.provider.getNetwork())})())}),this.#r=e=(async()=>{await Promise.all(t);let r=null;for(let s of this.#e){if(s._lastFatalError)continue;let o=s._network;r==null?r=o.chainId:o.chainId!==r&&g(!1,"cannot mix providers on different networks","UNSUPPORTED_OPERATION",{operation:"new FallbackProvider"})}})()}await e}async#o(e,t){let r=[];for(let s of e)if(s.result!=null){let{tag:o,value:i}=Pl(t.method,s.result);r.push({tag:o,value:i,weight:s.config.weight})}if(!(r.reduce((s,o)=>s+o.weight,0)<this.quorum)){switch(t.method){case"getBlockNumber":{this.#t===-2&&(this.#t=Math.ceil(U(Cl(this.quorum,this.#e.filter(o=>!o._lastFatalError).map(o=>({value:o.blockNumber,tag:U(o.blockNumber).toString(),weight:o.weight}))))));let s=Sb(this.quorum,r);return s===void 0?void 0:(s>this.#t&&(this.#t=s),this.#t)}case"getGasPrice":case"getPriorityFee":case"estimateGas":return Cl(this.quorum,r);case"getBlock":return"blockTag"in t&&t.blockTag==="pending"?Tl(this.quorum,r):wa(this.quorum,r);case"call":case"chainId":case"getBalance":case"getTransactionCount":case"getCode":case"getStorage":case"getTransaction":case"getTransactionReceipt":case"getLogs":return wa(this.quorum,r);case"broadcastTransaction":return Tl(this.quorum,r)}g(!1,"unsupported method","UNSUPPORTED_OPERATION",{operation:`_perform(${Il(t.method)})`})}}async#a(e,t){if(e.size===0)throw new Error("no runners?!");let r=[],s=0;for(let i of e){if(i.perform&&r.push(i.perform),i.staller){r.push(i.staller);continue}i.didBump||(i.didBump=!0,s++)}let o=await this.#o(e,t);if(o!==void 0){if(o instanceof Error)throw o;return o}for(let i=0;i<s;i++)this.#s(e,t);return g(r.length>0,"quorum not met","SERVER_ERROR",{request:"%sub-requests",info:{request:t,results:Array.from(e).map(i=>Il(i.result))}}),await Promise.race(r),await this.#a(e,t)}async _perform(e){if(e.method==="broadcastTransaction"){let o=this.#e.map(c=>null),i=this.#e.map(async({provider:c,weight:l},u)=>{try{let f=await c._perform(e);o[u]=Object.assign(Pl(e.method,{result:f}),{weight:l})}catch(f){o[u]=Object.assign(Pl(e.method,{error:f}),{weight:l})}});for(;;){let c=o.filter(f=>f!=null);for(let{value:f}of c)if(!(f instanceof Error))return f;let l=wa(this.quorum,o.filter(f=>f!=null));if(se(l,"INSUFFICIENT_FUNDS"))throw l;let u=i.filter((f,h)=>o[h]==null);if(u.length===0)break;await Promise.race(u)}let a=Tl(this.quorum,o);if(g(a!==void 0,"problem multi-broadcasting","SERVER_ERROR",{request:"%sub-requests",info:{request:e,results:o.map(Il)}}),a instanceof Error)throw a;return a}await this.#i();let t=new Set,r=0;for(;;){let o=this.#s(t,e);if(o==null||(r+=o.config.weight,r>=this.quorum))break}let s=await this.#a(t,e);for(let o of t)o.perform&&o.result==null&&o.config.lateResponses++;return s}async destroy(){for(let{provider:e}of this.#e)e.destroy();super.destroy()}};function Ub(n){return n&&typeof n.send=="function"&&typeof n.close=="function"}var Ob="goerli kovan sepolia classicKotti optimism-goerli arbitrum-goerli matic-mumbai bnbt".split(" ");function Bl(n,e){e==null&&(e={});let t=i=>e[i]==="-"?!1:typeof e.exclusive=="string"?i===e.exclusive:Array.isArray(e.exclusive)?e.exclusive.indexOf(i)!==-1:!0;if(typeof n=="string"&&n.match(/^https?:/))return new Ae(n);if(typeof n=="string"&&n.match(/^wss?:/)||Ub(n))return new Er(n);let r=null;try{r=J.from(n)}catch{}let s=[];if(t("publicPolygon")&&r&&(r.name==="matic"?s.push(new Ae("https://polygon-rpc.com/",r,{staticNetwork:r})):r.name==="matic-amoy"&&s.push(new Ae("https://rpc-amoy.polygon.technology/",r,{staticNetwork:r}))),t("alchemy"))try{s.push(new Wn(n,e.alchemy))}catch{}if(t("ankr")&&e.ankr!=null)try{s.push(new Kn(n,e.ankr))}catch{}if(t("chainstack"))try{s.push(new Vn(n,e.chainstack))}catch{}if(t("cloudflare"))try{s.push(new zn(n))}catch{}if(t("etherscan"))try{s.push(new Qn(n,e.etherscan))}catch{}if(t("infura"))try{let i=e.infura,a;typeof i=="object"&&(a=i.projectSecret,i=i.projectId),s.push(new rn(n,i,a))}catch{}if(t("quicknode"))try{let i=e.quicknode;s.push(new jn(n,i))}catch{}if(g(s.length,"unsupported default network","UNSUPPORTED_OPERATION",{operation:"getDefaultProvider"}),s.length===1)return s[0];let o=Math.floor(s.length/2);return o>2&&(o=2),r&&Ob.indexOf(r.name)!==-1&&(o=1),e&&e.quorum&&(o=e.quorum),new qn(s,void 0,{quorum:o})}var Lo=class n extends wt{signer;#e;#t;constructor(e){super(e.provider),k(this,{signer:e}),this.#e=null,this.#t=0}async getAddress(){return this.signer.getAddress()}connect(e){return new n(this.signer.connect(e))}async getNonce(e){if(e==="pending"){this.#e==null&&(this.#e=super.getNonce("pending"));let t=this.#t;return await this.#e+t}return super.getNonce(e)}increment(){this.#t++}reset(){this.#t=0,this.#e=null}async sendTransaction(e){let t=this.getNonce("pending");return this.increment(),e=await this.signer.populateTransaction(e),e.nonce=await t,await this.signer.sendTransaction(e)}signTransaction(e){return this.signer.signTransaction(e)}signMessage(e){return this.signer.signMessage(e)}signTypedData(e,t,r){return this.signer.signTypedData(e,t,r)}};var Mo=class n extends Uo{#e;#t;constructor(e,t,r){let s=Object.assign({},r??{},{batchMaxCount:1});d(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,s),this.#t=null,r&&r.providerInfo&&(this.#t=r.providerInfo),this.#e=async(o,i)=>{let a={method:o,params:i};this.emit("debug",{action:"sendEip1193Request",payload:a});try{let c=await e.request(a);return this.emit("debug",{action:"receiveEip1193Result",result:c}),c}catch(c){let l=new Error(c.message);throw l.code=c.code,l.data=c.data,l.payload=a,this.emit("debug",{action:"receiveEip1193Error",error:l}),l}}}get providerInfo(){return this.#t}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){d(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{let t=await this.#e(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch(t=JSON.parse(JSON.stringify(t)),t.error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`;break}return super.getRpcError(e,t)}async hasSigner(e){e==null&&(e=0);let t=await this.send("eth_accounts",[]);return typeof e=="number"?t.length>e:(e=e.toLowerCase(),t.filter(r=>r.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await this.#e("eth_requestAccounts",[])}catch(t){let r=t.payload;throw this.getRpcError(r,{id:r.id,error:t})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new n(e.provider);let t=e.window?e.window:typeof window<"u"?window:null;if(t==null)return null;let r=e.anyProvider;if(r&&t.ethereum)return new n(t.ethereum);if(!("addEventListener"in t&&"dispatchEvent"in t&&"removeEventListener"in t))return null;let s=e.timeout?e.timeout:300;return s===0?null:await new Promise((o,i)=>{let a=[],c=f=>{a.push(f.detail),r&&l()},l=()=>{if(clearTimeout(u),a.length)if(e&&e.filter){let f=e.filter(a.map(h=>Object.assign({},h.info)));if(f==null)o(null);else if(f instanceof n)o(f);else{let h=null;if(f.uuid&&(h=a.filter(b=>f.uuid===b.info.uuid)[0]),h){let{provider:p,info:b}=h;o(new n(p,void 0,{providerInfo:b}))}else i(Q("filter returned unknown info","UNSUPPORTED_OPERATION",{value:f}))}}else{let{provider:f,info:h}=a[0];o(new n(f,void 0,{providerInfo:h}))}else o(null);t.removeEventListener("eip6963:announceProvider",c)},u=setTimeout(()=>{l()},s);t.addEventListener("eip6963:announceProvider",c),t.dispatchEvent(new Event("eip6963:requestProvider"))})}};function Db(n){switch(n){case"mainnet":return"https://eth.blockscout.com/api/eth-rpc";case"sepolia":return"https://eth-sepolia.blockscout.com/api/eth-rpc";case"holesky":return"https://eth-holesky.blockscout.com/api/eth-rpc";case"classic":return"https://etc.blockscout.com/api/eth-rpc";case"arbitrum":return"https://arbitrum.blockscout.com/api/eth-rpc";case"base":return"https://base.blockscout.com/api/eth-rpc";case"base-sepolia":return"https://base-sepolia.blockscout.com/api/eth-rpc";case"matic":return"https://polygon.blockscout.com/api/eth-rpc";case"optimism":return"https://optimism.blockscout.com/api/eth-rpc";case"optimism-sepolia":return"https://optimism-sepolia.blockscout.com/api/eth-rpc";case"xdai":return"https://gnosis.blockscout.com/api/eth-rpc"}d(!1,"unsupported network","network",n)}var Fo=class n extends Ae{apiKey;constructor(e,t){e==null&&(e="mainnet");let r=J.from(e);t==null&&(t=null);let s=n.getRequest(r);super(s,r,{staticNetwork:r}),k(this,{apiKey:t})}_getProvider(e){try{return new n(e,this.apiKey)}catch{}return super._getProvider(e)}isCommunityResource(){return this.apiKey===null}getRpcRequest(e){let t=super.getRpcRequest(e);return t&&t.method==="eth_estimateGas"&&t.args.length==1&&(t.args=t.args.slice(),t.args.push("latest")),t}getRpcError(e,t){let r=t?t.error:null;if(r&&r.code===-32015&&!W(r.data||"",!0)){let s={"assert(false)":"01","arithmetic underflow or overflow":"11","division or modulo by zero":"12","out-of-bounds array access; popping on an empty array":"31","out-of-bounds access of an array or bytesN":"32"},o="";r.message==="VM execution error."?o=s[r.data]||"":s[r.message||""]&&(o=s[r.message||""]),o&&(r.message+=` (reverted: ${r.data})`,r.data="0x4e487b7100000000000000000000000000000000000000000000000000000000000000"+o)}else r&&r.code===-32e3&&r.message==="wrong transaction nonce"&&(r.message+=" (nonce too low)");return super.getRpcError(e,t)}static getRequest(e){let t=new ce(Db(e.name));return t.allowGzip=!0,t}};var Aa="62e1ad51b37b8e00394bda3b";function Lb(n){switch(n){case"mainnet":return"eth-mainnet.gateway.pokt.network";case"goerli":return"eth-goerli.gateway.pokt.network";case"matic":return"poly-mainnet.gateway.pokt.network";case"matic-mumbai":return"polygon-mumbai-rpc.gateway.pokt.network"}d(!1,"unsupported network","network",n)}var _o=class n extends Ae{applicationId;applicationSecret;constructor(e,t,r){e==null&&(e="mainnet");let s=J.from(e);t==null&&(t=Aa),r==null&&(r=null);let o={staticNetwork:s},i=n.getRequest(s,t,r);super(i,s,o),k(this,{applicationId:t,applicationSecret:r})}_getProvider(e){try{return new n(e,this.applicationId,this.applicationSecret)}catch{}return super._getProvider(e)}static getRequest(e,t,r){t==null&&(t=Aa);let s=new ce(`https://${Lb(e.name)}/v1/lb/${t}`);return s.allowGzip=!0,r&&s.setCredentials("",r),t===Aa&&(s.retryFunc=async(o,i,a)=>(Ve("PocketProvider"),!0)),s}isCommunityResource(){return this.applicationId===Aa}};var Rl=void 0;var kr=class n extends wt{address;#e;constructor(e,t){super(t),d(e&&typeof e.sign=="function","invalid private key","privateKey","[ REDACTED ]"),this.#e=e;let r=_t(this.signingKey.publicKey);k(this,{address:r})}get signingKey(){return this.#e}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(e){return new n(this.#e,e)}async signTransaction(e){e=bt(e);let{to:t,from:r}=await pe({to:e.to?be(e.to,this):void 0,from:e.from?be(e.from,this):void 0});t!=null&&(e.to=t),r!=null&&(e.from=r),e.from!=null&&(d(D(e.from)===this.address,"transaction from address mismatch","tx.from",e.from),delete e.from);let s=ft.from(e);return s.signature=this.signingKey.sign(s.unsignedHash),s.serialized}async signMessage(e){return this.signMessageSync(e)}signMessageSync(e){return this.signingKey.sign(Cs(e)).serialized}authorizeSync(e){d(typeof e.address=="string","invalid address for authorizeSync","auth.address",e);let t=this.signingKey.sign(Ns(e));return Object.assign({},{address:D(e.address),nonce:I(e.nonce||0),chainId:I(e.chainId||0)},{signature:t})}async authorize(e){return e=Object.assign({},e,{address:await be(e.address,this)}),this.authorizeSync(await this.populateAuthorization(e))}async signTypedData(e,t,r){let s=await mt.resolveNames(e,t,r,async o=>{g(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:o}});let i=await this.provider.resolveName(o);return g(i!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:o}),i});return this.signingKey.sign(mt.hash(s.domain,t,s.value)).serialized}};var Ea=" !#$%&'()*+,-./<=>?@[]^_`{|}~",Mb=/^[a-z]*$/i;function zd(n,e){let t=97;return n.reduce((r,s)=>(s===e?t++:s.match(Mb)?r.push(String.fromCharCode(t)+s):(t=97,r.push(s)),r),[])}function Fb(n,e){for(let s=Ea.length-1;s>=0;s--)n=n.split(Ea[s]).join(e.substring(2*s,2*s+2));let t=[],r=n.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(s,o,i,a)=>{if(i)for(let c=parseInt(i);c>=0;c--)t.push(";");else t.push(o.toLowerCase());return""});if(r)throw new Error(`leftovers: ${JSON.stringify(r)}`);return zd(zd(t,";"),":")}function ka(n){return d(n[0]==="0","unsupported auwl data","data",n),Fb(n.substring(1+2*Ea.length),n.substring(1,1+2*Ea.length))}var $n=class{locale;constructor(e){k(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}};var Nr=class extends $n{#e;#t;constructor(e,t,r){super(e),this.#e=t,this.#t=r,this.#r=null}get _data(){return this.#e}_decodeWords(){return ka(this.#e)}#r;#n(){if(this.#r==null){let e=this._decodeWords();if(Ke(e.join(`
`)+`
`)!==this.#t)throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);this.#r=e}return this.#r}getWord(e){let t=this.#n();return d(e>=0&&e<t.length,`invalid word index: ${e}`,"index",e),t[e]}getWordIndex(e){return this.#n().indexOf(e)}};var _b="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",Hb="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60",Sl=null,it=class n extends Nr{constructor(){super("en",_b,Hb)}static wordlist(){return Sl==null&&(Sl=new n),Sl}};function Qd(n){return(1<<n)-1<<8-n&255}function Gb(n){return(1<<n)-1&255}function Ul(n,e){hn("NFKD"),e==null&&(e=it.wordlist());let t=e.split(n);d(t.length%3===0&&t.length>=12&&t.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");let r=new Uint8Array(Math.ceil(11*t.length/8)),s=0;for(let l=0;l<t.length;l++){let u=e.getWordIndex(t[l].normalize("NFKD"));d(u>=0,`invalid mnemonic word at index ${l}`,"mnemonic","[ REDACTED ]");for(let f=0;f<11;f++)u&1<<10-f&&(r[s>>3]|=1<<7-s%8),s++}let o=32*t.length/3,i=t.length/3,a=Qd(i),c=E(ve(r.slice(0,o/8)))[0]&a;return d(c===(r[r.length-1]&a),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),A(r.slice(0,o/8))}function Ol(n,e){d(n.length%4===0&&n.length>=16&&n.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=it.wordlist());let t=[0],r=11;for(let i=0;i<n.length;i++)r>8?(t[t.length-1]<<=8,t[t.length-1]|=n[i],r-=8):(t[t.length-1]<<=r,t[t.length-1]|=n[i]>>8-r,t.push(n[i]&Gb(8-r)),r+=3);let s=n.length/4,o=parseInt(ve(n).substring(2,4),16)&Qd(s);return t[t.length-1]<<=s,t[t.length-1]|=o>>8-s,e.join(t.map(i=>e.getWord(i)))}var Dl={},Yt=class n{phrase;password;wordlist;entropy;constructor(e,t,r,s,o){s==null&&(s=""),o==null&&(o=it.wordlist()),Fe(e,Dl,"Mnemonic"),k(this,{phrase:r,password:s,wordlist:o,entropy:t})}computeSeed(){let e=ae("mnemonic"+this.password,"NFKD");return Xe(ae(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,t,r){let s=Ul(e,r);return e=Ol(E(s),r),new n(Dl,s,e,t,r)}static fromEntropy(e,t,r){let s=E(e,"entropy"),o=Ol(s,r);return new n(Dl,A(s),o,t,r)}static entropyToPhrase(e,t){let r=E(e,"entropy");return Ol(r,t)}static phraseToEntropy(e,t){return Ul(e,t)}static isValidMnemonic(e,t){try{return Ul(e,t),!0}catch{}return!1}};var ze=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Ll=function(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},Ia,Et,Zt,Kb={16:10,24:12,32:14},Wb=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],At=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Na=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],Vb=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],zb=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],Qb=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],Jb=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],jb=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],qb=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],$b=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],Yb=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],Zb=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],Xb=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],e1=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],t1=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function Ml(n){let e=[];for(let t=0;t<n.length;t+=4)e.push(n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3]);return e}var Ho=class n{get key(){return ze(this,Ia,"f").slice()}constructor(e){if(Ia.set(this,void 0),Et.set(this,void 0),Zt.set(this,void 0),!(this instanceof n))throw Error("AES must be instanitated with `new`");Ll(this,Ia,new Uint8Array(e),"f");let t=Kb[this.key.length];if(t==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");Ll(this,Zt,[],"f"),Ll(this,Et,[],"f");for(let u=0;u<=t;u++)ze(this,Zt,"f").push([0,0,0,0]),ze(this,Et,"f").push([0,0,0,0]);let r=(t+1)*4,s=this.key.length/4,o=Ml(this.key),i;for(let u=0;u<s;u++)i=u>>2,ze(this,Zt,"f")[i][u%4]=o[u],ze(this,Et,"f")[t-i][u%4]=o[u];let a=0,c=s,l;for(;c<r;){if(l=o[s-1],o[0]^=At[l>>16&255]<<24^At[l>>8&255]<<16^At[l&255]<<8^At[l>>24&255]^Wb[a]<<24,a+=1,s!=8)for(let p=1;p<s;p++)o[p]^=o[p-1];else{for(let p=1;p<s/2;p++)o[p]^=o[p-1];l=o[s/2-1],o[s/2]^=At[l&255]^At[l>>8&255]<<8^At[l>>16&255]<<16^At[l>>24&255]<<24;for(let p=s/2+1;p<s;p++)o[p]^=o[p-1]}let u=0,f,h;for(;u<s&&c<r;)f=c>>2,h=c%4,ze(this,Zt,"f")[f][h]=o[u],ze(this,Et,"f")[t-f][h]=o[u++],c++}for(let u=1;u<t;u++)for(let f=0;f<4;f++)l=ze(this,Et,"f")[u][f],ze(this,Et,"f")[u][f]=Zb[l>>24&255]^Xb[l>>16&255]^e1[l>>8&255]^t1[l&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");let t=ze(this,Zt,"f").length-1,r=[0,0,0,0],s=Ml(e);for(let a=0;a<4;a++)s[a]^=ze(this,Zt,"f")[0][a];for(let a=1;a<t;a++){for(let c=0;c<4;c++)r[c]=Vb[s[c]>>24&255]^zb[s[(c+1)%4]>>16&255]^Qb[s[(c+2)%4]>>8&255]^Jb[s[(c+3)%4]&255]^ze(this,Zt,"f")[a][c];s=r.slice()}let o=new Uint8Array(16),i=0;for(let a=0;a<4;a++)i=ze(this,Zt,"f")[t][a],o[4*a]=(At[s[a]>>24&255]^i>>24)&255,o[4*a+1]=(At[s[(a+1)%4]>>16&255]^i>>16)&255,o[4*a+2]=(At[s[(a+2)%4]>>8&255]^i>>8)&255,o[4*a+3]=(At[s[(a+3)%4]&255]^i)&255;return o}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");let t=ze(this,Et,"f").length-1,r=[0,0,0,0],s=Ml(e);for(let a=0;a<4;a++)s[a]^=ze(this,Et,"f")[0][a];for(let a=1;a<t;a++){for(let c=0;c<4;c++)r[c]=jb[s[c]>>24&255]^qb[s[(c+3)%4]>>16&255]^$b[s[(c+2)%4]>>8&255]^Yb[s[(c+1)%4]&255]^ze(this,Et,"f")[a][c];s=r.slice()}let o=new Uint8Array(16),i=0;for(let a=0;a<4;a++)i=ze(this,Et,"f")[t][a],o[4*a]=(Na[s[a]>>24&255]^i>>24)&255,o[4*a+1]=(Na[s[(a+3)%4]>>16&255]^i>>16)&255,o[4*a+2]=(Na[s[(a+2)%4]>>8&255]^i>>8)&255,o[4*a+3]=(Na[s[(a+1)%4]&255]^i)&255;return o}};Ia=new WeakMap,Et=new WeakMap,Zt=new WeakMap;var Xt=class{constructor(e,t,r){if(r&&!(this instanceof r))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new Ho(t)},name:{enumerable:!0,value:e}})}};var Pa=function(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},Ws=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Go,Ir,Ko=class n extends Xt{constructor(e,t){if(super("ECC",e,n),Go.set(this,void 0),Ir.set(this,void 0),t){if(t.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");Pa(this,Go,new Uint8Array(t),"f")}else Pa(this,Go,new Uint8Array(16),"f");Pa(this,Ir,this.iv,"f")}get iv(){return new Uint8Array(Ws(this,Go,"f"))}encrypt(e){if(e.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");let t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){for(let s=0;s<16;s++)Ws(this,Ir,"f")[s]^=e[r+s];Pa(this,Ir,this.aes.encrypt(Ws(this,Ir,"f")),"f"),t.set(Ws(this,Ir,"f"),r)}return t}decrypt(e){if(e.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");let t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){let s=this.aes.decrypt(e.subarray(r,r+16));for(let o=0;o<16;o++)t[r+o]=s[o]^Ws(this,Ir,"f")[o],Ws(this,Ir,"f")[o]=e[r+o]}return t}};Go=new WeakMap,Ir=new WeakMap;var Fl=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},r1,n1,Ta,s1;n1=new WeakMap,Ta=new WeakMap,r1=new WeakSet,s1=function(e){let t=this.segmentSize/8;Fl(this,Ta,"f").set(Fl(this,Ta,"f").subarray(t)),Fl(this,Ta,"f").set(e.subarray(0,t),16-t)};var Vs=function(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},kt=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Wo,Yn,Nt,nn=class n extends Xt{constructor(e,t){super("CTR",e,n),Wo.set(this,void 0),Yn.set(this,void 0),Nt.set(this,void 0),Vs(this,Nt,new Uint8Array(16),"f"),kt(this,Nt,"f").fill(0),Vs(this,Wo,kt(this,Nt,"f"),"f"),Vs(this,Yn,16,"f"),t==null&&(t=1),typeof t=="number"?this.setCounterValue(t):this.setCounterBytes(t)}get counter(){return new Uint8Array(kt(this,Nt,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let t=15;t>=0;--t)kt(this,Nt,"f")[t]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");kt(this,Nt,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(kt(this,Nt,"f")[e]===255)kt(this,Nt,"f")[e]=0;else{kt(this,Nt,"f")[e]++;break}}encrypt(e){var t,r;let s=new Uint8Array(e);for(let o=0;o<s.length;o++)kt(this,Yn,"f")===16&&(Vs(this,Wo,this.aes.encrypt(kt(this,Nt,"f")),"f"),Vs(this,Yn,0,"f"),this.increment()),s[o]^=kt(this,Wo,"f")[Vs(this,Yn,(r=kt(this,Yn,"f"),t=r++,r),"f"),t];return s}decrypt(e){return this.encrypt(e)}};Wo=new WeakMap,Yn=new WeakMap,Nt=new WeakMap;var o1,i1,a1;o1=new WeakMap,i1=new WeakMap,a1=new WeakMap;function _l(n){if(n.length<16)throw new TypeError("PKCS#7 invalid length");let e=n[n.length-1];if(e>16)throw new TypeError("PKCS#7 padding byte out of range");let t=n.length-e;for(let r=0;r<e;r++)if(n[t+r]!==e)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(n.subarray(0,t))}function Hl(n){return typeof n=="string"&&!n.startsWith("0x")&&(n="0x"+n),ge(n)}function zs(n,e){for(n=String(n);n.length<e;)n="0"+n;return n}function Zn(n){return typeof n=="string"?ae(n,"NFKC"):ge(n)}function ke(n,e){let t=e.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);d(t!=null,"invalid path","path",e);let r=t[1],s=t[3],o=t[4]==="!",i=n;for(let a of r.toLowerCase().split(".")){if(Array.isArray(i)){if(!a.match(/^[0-9]+$/))break;i=i[parseInt(a)]}else if(typeof i=="object"){let c=null;for(let l in i)if(l.toLowerCase()===a){c=i[l];break}i=c}else i=null;if(i==null)break}if(d(!o||i!=null,"missing required value","path",r),s&&i!=null){if(s==="int"){if(typeof i=="string"&&i.match(/^-?[0-9]+$/))return parseInt(i);if(Number.isSafeInteger(i))return i}if(s==="number"&&typeof i=="string"&&i.match(/^-?[0-9.]*$/))return parseFloat(i);if(s==="data"&&typeof i=="string")return Hl(i);if(s==="array"&&Array.isArray(i)||s===typeof i)return i;d(!1,`wrong type found for ${s} `,"path",r)}return i}var jd="m/44'/60'/0'/0/0";function Qs(n){try{let e=JSON.parse(n);if((e.version!=null?parseInt(e.version):0)===3)return!0}catch{}return!1}function c1(n,e,t){if(ke(n,"crypto.cipher:string")==="aes-128-ctr"){let s=ke(n,"crypto.cipherparams.iv:data!"),o=new nn(e,s);return A(o.decrypt(t))}g(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}function va(n,e){let t=E(e),r=ke(n,"crypto.ciphertext:data!"),s=A(H(M([t.slice(16,32),r]))).substring(2);d(s===ke(n,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");let o=c1(n,t.slice(0,16),r),i=_t(o);if(n.address){let l=n.address.toLowerCase();l.startsWith("0x")||(l="0x"+l),d(D(l)===i,"keystore address/privateKey mismatch","address",n.address)}let a={address:i,privateKey:o};if(ke(n,"x-ethers.version:string")==="0.1"){let l=t.slice(32,64),u=ke(n,"x-ethers.mnemonicCiphertext:data!"),f=ke(n,"x-ethers.mnemonicCounter:data!"),h=new nn(l,f);a.mnemonic={path:ke(n,"x-ethers.path:string")||jd,locale:ke(n,"x-ethers.locale:string")||"en",entropy:A(E(h.decrypt(u)))}}return a}function qd(n){let e=ke(n,"crypto.kdf:string");if(e&&typeof e=="string"){if(e.toLowerCase()==="scrypt"){let t=ke(n,"crypto.kdfparams.salt:data!"),r=ke(n,"crypto.kdfparams.n:int!"),s=ke(n,"crypto.kdfparams.r:int!"),o=ke(n,"crypto.kdfparams.p:int!");d(r>0&&(r&r-1)===0,"invalid kdf.N","kdf.N",r),d(s>0&&o>0,"invalid kdf","kdf",e);let i=ke(n,"crypto.kdfparams.dklen:int!");return d(i===32,"invalid kdf.dklen","kdf.dflen",i),{name:"scrypt",salt:t,N:r,r:s,p:o,dkLen:64}}else if(e.toLowerCase()==="pbkdf2"){let t=ke(n,"crypto.kdfparams.salt:data!"),r=ke(n,"crypto.kdfparams.prf:string!"),s=r.split("-").pop();d(s==="sha256"||s==="sha512","invalid kdf.pdf","kdf.pdf",r);let o=ke(n,"crypto.kdfparams.c:int!"),i=ke(n,"crypto.kdfparams.dklen:int!");return d(i===32,"invalid kdf.dklen","kdf.dklen",i),{name:"pbkdf2",salt:t,count:o,dkLen:i,algorithm:s}}}d(!1,"unsupported key-derivation function","kdf",e)}function Vo(n,e){let t=JSON.parse(n),r=Zn(e),s=qd(t);if(s.name==="pbkdf2"){let{salt:f,count:h,dkLen:p,algorithm:b}=s,m=Xe(r,f,h,p,b);return va(t,m)}g(s.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:s});let{salt:o,N:i,r:a,p:c,dkLen:l}=s,u=Lt(r,o,i,a,c,l);return va(t,u)}function Jd(n){return new Promise(e=>{setTimeout(()=>{e()},n)})}async function zo(n,e,t){let r=JSON.parse(n),s=Zn(e),o=qd(r);if(o.name==="pbkdf2"){t&&(t(0),await Jd(0));let{salt:h,count:p,dkLen:b,algorithm:m}=o,y=Xe(s,h,p,b,m);return t&&(t(1),await Jd(0)),va(r,y)}g(o.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:o});let{salt:i,N:a,r:c,p:l,dkLen:u}=o,f=await Dt(s,i,a,c,l,u,t);return va(r,f)}function $d(n){let e=n.salt!=null?E(n.salt,"options.salt"):$e(32),t=1<<17,r=8,s=1;return n.scrypt&&(n.scrypt.N&&(t=n.scrypt.N),n.scrypt.r&&(r=n.scrypt.r),n.scrypt.p&&(s=n.scrypt.p)),d(typeof t=="number"&&t>0&&Number.isSafeInteger(t)&&(BigInt(t)&BigInt(t-1))===BigInt(0),"invalid scrypt N parameter","options.N",t),d(typeof r=="number"&&r>0&&Number.isSafeInteger(r),"invalid scrypt r parameter","options.r",r),d(typeof s=="number"&&s>0&&Number.isSafeInteger(s),"invalid scrypt p parameter","options.p",s),{name:"scrypt",dkLen:32,salt:e,N:t,r,p:s}}function Yd(n,e,t,r){let s=E(t.privateKey,"privateKey"),o=r.iv!=null?E(r.iv,"options.iv"):$e(16);d(o.length===16,"invalid options.iv length","options.iv",r.iv);let i=r.uuid!=null?E(r.uuid,"options.uuid"):$e(16);d(i.length===16,"invalid options.uuid length","options.uuid",r.iv);let a=n.slice(0,16),c=n.slice(16,32),l=new nn(a,o),u=E(l.encrypt(s)),f=H(M([c,u])),h={address:t.address.substring(2).toLowerCase(),id:lo(i),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:A(o).substring(2)},ciphertext:A(u).substring(2),kdf:"scrypt",kdfparams:{salt:A(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:f.substring(2)}};if(t.mnemonic){let p=r.client!=null?r.client:`ethers/${us}`,b=t.mnemonic.path||jd,m=t.mnemonic.locale||"en",y=n.slice(32,64),w=E(t.mnemonic.entropy,"account.mnemonic.entropy"),P=$e(16),N=new nn(y,P),L=E(N.encrypt(w)),T=new Date,S="UTC--"+(T.getUTCFullYear()+"-"+zs(T.getUTCMonth()+1,2)+"-"+zs(T.getUTCDate(),2)+"T"+zs(T.getUTCHours(),2)+"-"+zs(T.getUTCMinutes(),2)+"-"+zs(T.getUTCSeconds(),2)+".0Z")+"--"+h.address;h["x-ethers"]={client:p,gethFilename:S,path:b,locale:m,mnemonicCounter:A(P).substring(2),mnemonicCiphertext:A(L).substring(2),version:"0.1"}}return JSON.stringify(h)}function Xn(n,e,t){t==null&&(t={});let r=Zn(e),s=$d(t),o=Lt(r,s.salt,s.N,s.r,s.p,64);return Yd(E(o),s,n,t)}async function es(n,e,t){t==null&&(t={});let r=Zn(e),s=$d(t),o=await Dt(r,s.salt,s.N,s.r,s.p,64,t.progressCallback);return Yd(E(o),s,n,t)}var Js="m/44'/60'/0'/0/0",l1=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),tr=2147483648,u1=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),f1="0123456789abcdef";function Ca(n,e){let t="";for(;n;)t=f1[n%16]+t,n=Math.trunc(n/16);for(;t.length<e*2;)t="0"+t;return"0x"+t}function Gl(n){let e=E(n),t=re(ve(ve(e)),0,4),r=M([e,t]);return xn(r)}var er={};function Zd(n,e,t,r){let s=new Uint8Array(37);n&tr?(g(r!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),s.set(E(r),1)):s.set(E(t));for(let i=24;i>=0;i-=8)s[33+(i>>3)]=n>>24-i&255;let o=E(Ut("sha512",e,s));return{IL:o.slice(0,32),IR:o.slice(32)}}function Xd(n,e){let t=e.split("/");d(t.length>0,"invalid path","path",e),t[0]==="m"&&(d(n.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${n.depth}`,"path",e),t.shift());let r=n;for(let s=0;s<t.length;s++){let o=t[s];if(o.match(/^[0-9]+'$/)){let i=parseInt(o.substring(0,o.length-1));d(i<tr,"invalid path index",`path[${s}]`,o),r=r.deriveChild(tr+i)}else if(o.match(/^[0-9]+$/)){let i=parseInt(o);d(i<tr,"invalid path index",`path[${s}]`,o),r=r.deriveChild(i)}else d(!1,"invalid path component",`path[${s}]`,o)}return r}var Pr=class n extends kr{publicKey;fingerprint;parentFingerprint;mnemonic;chainCode;path;index;depth;constructor(e,t,r,s,o,i,a,c,l){super(t,l),Fe(e,er,"HDNodeWallet"),k(this,{publicKey:t.compressedPublicKey});let u=re(Ot(ve(this.publicKey)),0,4);k(this,{parentFingerprint:r,fingerprint:u,chainCode:s,path:o,index:i,depth:a}),k(this,{mnemonic:c})}connect(e){return new n(er,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,e)}#e(){let e={address:this.address,privateKey:this.privateKey},t=this.mnemonic;return this.path&&t&&t.wordlist.locale==="en"&&t.password===""&&(e.mnemonic={path:this.path,locale:"en",entropy:t.entropy}),e}async encrypt(e,t){return await es(this.#e(),e,{progressCallback:t})}encryptSync(e){return Xn(this.#e(),e)}get extendedKey(){return g(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Gl(M(["0x0488ADE4",Ca(this.depth,1),this.parentFingerprint,Ca(this.index,4),this.chainCode,M(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new ts(er,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(e){let t=U(e,"index");d(t<=4294967295,"invalid index","index",t);let r=this.path;r&&(r+="/"+(t&~tr),t&tr&&(r+="'"));let{IR:s,IL:o}=Zd(t,this.chainCode,this.publicKey,this.privateKey),i=new He(Le((pt(o)+BigInt(this.privateKey))%u1,32));return new n(er,i,this.fingerprint,A(s),r,t,this.depth+1,this.mnemonic,this.provider)}derivePath(e){return Xd(this,e)}static#t(e,t){d(Pt(e),"invalid seed","seed","[REDACTED]");let r=E(e,"seed");d(r.length>=16&&r.length<=64,"invalid seed","seed","[REDACTED]");let s=E(Ut("sha512",l1,r)),o=new He(A(s.slice(0,32)));return new n(er,o,"0x00000000",A(s.slice(32)),"m",0,0,t,null)}static fromExtendedKey(e){let t=ee(oo(e));d(t.length===82||Gl(t.slice(0,78))===e,"invalid extended key","extendedKey","[ REDACTED ]");let r=t[4],s=A(t.slice(5,9)),o=parseInt(A(t.slice(9,13)).substring(2),16),i=A(t.slice(13,45)),a=t.slice(45,78);switch(A(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":{let c=A(a);return new ts(er,_t(c),c,s,i,null,o,r,null)}case"0x0488ade4":case"0x04358394 ":if(a[0]!==0)break;return new n(er,new He(a.slice(1)),s,i,null,o,r,null,null)}d(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(e,t,r){e==null&&(e=""),t==null&&(t=Js),r==null&&(r=it.wordlist());let s=Yt.fromEntropy($e(16),e,r);return n.#t(s.computeSeed(),s).derivePath(t)}static fromMnemonic(e,t){return t||(t=Js),n.#t(e.computeSeed(),e).derivePath(t)}static fromPhrase(e,t,r,s){t==null&&(t=""),r==null&&(r=Js),s==null&&(s=it.wordlist());let o=Yt.fromPhrase(e,t,s);return n.#t(o.computeSeed(),o).derivePath(r)}static fromSeed(e){return n.#t(e,null)}},ts=class n extends Gn{publicKey;fingerprint;parentFingerprint;chainCode;path;index;depth;constructor(e,t,r,s,o,i,a,c,l){super(t,l),Fe(e,er,"HDNodeVoidWallet"),k(this,{publicKey:r});let u=re(Ot(ve(r)),0,4);k(this,{publicKey:r,fingerprint:u,parentFingerprint:s,chainCode:o,path:i,index:a,depth:c})}connect(e){return new n(er,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,e)}get extendedKey(){return g(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Gl(M(["0x0488B21E",Ca(this.depth,1),this.parentFingerprint,Ca(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(e){let t=U(e,"index");d(t<=4294967295,"invalid index","index",t);let r=this.path;r&&(r+="/"+(t&~tr),t&tr&&(r+="'"));let{IR:s,IL:o}=Zd(t,this.chainCode,this.publicKey,null),i=He.addPoints(o,this.publicKey,!0),a=_t(i);return new n(er,a,i,this.fingerprint,A(s),r,t,this.depth+1,this.provider)}derivePath(e){return Xd(this,e)}};function Kl(n){let e=U(n,"index");return d(e>=0&&e<tr,"invalid account index","index",e),`m/44'/60'/${e}'/0/0`}function Wl(n){let e=U(n,"index");return d(e>=0&&e<tr,"invalid account index","index",e),`m/44'/60'/0'/0/${e}`}function js(n){try{if(JSON.parse(n).encseed)return!0}catch{}return!1}function qs(n,e){let t=JSON.parse(n),r=Zn(e),s=D(ke(t,"ethaddr:string!")),o=Hl(ke(t,"encseed:string!"));d(o&&o.length%16===0,"invalid encseed","json",n);let i=E(Xe(r,r,2e3,32,"sha256")).slice(0,16),a=o.slice(0,16),c=o.slice(16),l=new Ko(i,a),u=_l(E(l.decrypt(c))),f="";for(let h=0;h<u.length;h++)f+=String.fromCharCode(u[h]);return{address:s,privateKey:Ke(f)}}function eh(n){return new Promise(e=>{setTimeout(()=>{e()},n)})}var Qo=class n extends kr{constructor(e,t){typeof e=="string"&&!e.startsWith("0x")&&(e="0x"+e);let r=typeof e=="string"?new He(e):e;super(r,t)}connect(e){return new n(this.signingKey,e)}async encrypt(e,t){let r={address:this.address,privateKey:this.privateKey};return await es(r,e,{progressCallback:t})}encryptSync(e){let t={address:this.address,privateKey:this.privateKey};return Xn(t,e)}static#e(e){if(d(e,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in e&&e.mnemonic&&e.mnemonic.locale==="en"){let r=Yt.fromEntropy(e.mnemonic.entropy),s=Pr.fromMnemonic(r,e.mnemonic.path);if(s.address===e.address&&s.privateKey===e.privateKey)return s;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}let t=new n(e.privateKey);return d(t.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]"),t}static async fromEncryptedJson(e,t,r){let s=null;return Qs(e)?s=await zo(e,t,r):js(e)&&(r&&(r(0),await eh(0)),s=qs(e,t),r&&(r(1),await eh(0))),n.#e(s)}static fromEncryptedJsonSync(e,t){let r=null;return Qs(e)?r=Vo(e,t):js(e)?r=qs(e,t):d(!1,"invalid JSON wallet","json","[ REDACTED ]"),n.#e(r)}static createRandom(e){let t=Pr.createRandom();return e?t.connect(e):t}static fromPhrase(e,t){let r=Pr.fromPhrase(e);return t?r.connect(t):r}};var d1=")!@#$%^&*(ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_";function th(n,e){let t=(1<<n)-1,r=[],s=0,o=0,i=0;for(let a=0;a<e.length;a++)for(s=s<<6|d1.indexOf(e[a]),o+=6;o>=n;){let c=s>>o-n;s&=(1<<o-n)-1,o-=n,c===0?i+=t:(r.push(c+i),i=0)}return r}function rh(n,e){let t=ka(n).join(",");return e.split(/,/g).forEach(r=>{let s=r.match(/^([a-z]*)([0-9]+)([0-9])(.*)$/);d(s!==null,"internal error parsing accents","accents",e);let o=0,i=th(parseInt(s[3]),s[4]),a=parseInt(s[2]),c=new RegExp(`([${s[1]}])`,"g");t=t.replace(c,(l,u)=>(--i[o]===0&&(u=String.fromCharCode(u.charCodeAt(0),a),o++),u))}),t.split(",")}var Jo=class extends Nr{#e;constructor(e,t,r,s){super(e,t,s),this.#e=r}get _accent(){return this.#e}_decodeWords(){return rh(this._data,this._accent)}};var Vl={en:it.wordlist()};var np=kp(rp(),1);async function sp(n,e={}){let t={width:200,margin:2,color:{dark:"#000000",light:"#ffffff"},errorCorrectionLevel:"M"};try{console.log("wallet.js generateQRCode called with:",n);let r={...t,...e},s=await np.default.toDataURL(n,r);return console.log("wallet.js QR generated, length:",s?.length),s}catch(r){throw console.error("wallet.js QR generation error:",r),r}}var at={ramestta_mainnet:{chainId:1370,chainIdHex:"0x55a",name:"Ramestta Mainnet",symbol:"RAMA",decimals:18,rpcUrl:"https://blockchain.ramestta.com",rpcUrls:["https://blockchain.ramestta.com","https://blockchain2.ramestta.com","https://blockchain.rfrm.io"],explorerUrl:"https://ramascan.com",isTestnet:!1,isDefault:!0,category:"ramestta",icon:"icons/rama.png"},ramestta_testnet:{chainId:1369,chainIdHex:"0x559",name:"Ramestta Testnet",symbol:"RAMA",decimals:18,rpcUrl:"https://testnet.ramestta.com",rpcUrls:["https://testnet.ramestta.com","https://testnet.rfrm.io"],explorerUrl:"https://testnet.ramascan.com",isTestnet:!0,isDefault:!0,category:"ramestta",icon:"icons/rama.png"},ethereum_mainnet:{chainId:1,chainIdHex:"0x1",name:"Ethereum Mainnet",symbol:"ETH",decimals:18,rpcUrl:"https://eth.llamarpc.com",rpcUrls:["https://eth.llamarpc.com","https://ethereum.publicnode.com","https://rpc.payload.de","https://eth-mainnet.public.blastapi.io"],explorerUrl:"https://etherscan.io",isTestnet:!1,category:"ethereum",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/info/logo.png"},ethereum_classic:{chainId:61,chainIdHex:"0x3d",name:"Ethereum Classic",symbol:"ETC",decimals:18,rpcUrl:"https://www.ethercluster.com/etc",rpcUrls:["https://www.ethercluster.com/etc","https://etc.rivet.link"],explorerUrl:"https://blockscout.com/etc/mainnet",isTestnet:!1,category:"ethereum",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/classic/info/logo.png"},sepolia_testnet:{chainId:11155111,chainIdHex:"0xaa36a7",name:"Sepolia Testnet",symbol:"ETH",decimals:18,rpcUrl:"https://rpc.sepolia.org",rpcUrls:["https://rpc.sepolia.org","https://sepolia.drpc.org"],explorerUrl:"https://sepolia.etherscan.io",isTestnet:!0,category:"ethereum",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/info/logo.png"},holesky_testnet:{chainId:17e3,chainIdHex:"0x4268",name:"Holesky Testnet",symbol:"ETH",decimals:18,rpcUrl:"https://rpc.holesky.ethpandaops.io",rpcUrls:["https://rpc.holesky.ethpandaops.io","https://holesky.drpc.org"],explorerUrl:"https://holesky.etherscan.io",isTestnet:!0,category:"ethereum",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/info/logo.png"},polygon_mainnet:{chainId:137,chainIdHex:"0x89",name:"Polygon Mainnet",symbol:"MATIC",decimals:18,rpcUrl:"https://polygon.llamarpc.com",rpcUrls:["https://polygon.llamarpc.com","https://polygon-rpc.com","https://polygon.lava.build"],explorerUrl:"https://polygonscan.com",isTestnet:!1,category:"polygon",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/polygon/info/logo.png"},polygon_amoy:{chainId:80002,chainIdHex:"0x13882",name:"Polygon Amoy Testnet",symbol:"MATIC",decimals:18,rpcUrl:"https://rpc-amoy.polygon.technology",rpcUrls:["https://rpc-amoy.polygon.technology","https://polygon-amoy.drpc.org"],explorerUrl:"https://amoy.polygonscan.com",isTestnet:!0,category:"polygon",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/polygon/info/logo.png"},binance_mainnet:{chainId:56,chainIdHex:"0x38",name:"BNB Smart Chain",symbol:"BNB",decimals:18,rpcUrl:"https://bsc-dataseed.binance.org",rpcUrls:["https://bsc-dataseed.binance.org","https://binance.llamarpc.com","https://bsc-rpc.publicnode.com"],explorerUrl:"https://bscscan.com",isTestnet:!1,category:"binance",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/smartchain/info/logo.png"},binance_testnet:{chainId:97,chainIdHex:"0x61",name:"BNB Smart Chain Testnet",symbol:"tBNB",decimals:18,rpcUrl:"https://data-seed-prebsc-1-s1.binance.org:8545",rpcUrls:["https://data-seed-prebsc-1-s1.binance.org:8545","https://bsc-testnet.drpc.org"],explorerUrl:"https://testnet.bscscan.com",isTestnet:!0,category:"binance",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/smartchain/info/logo.png"},avalanche_mainnet:{chainId:43114,chainIdHex:"0xa86a",name:"Avalanche C-Chain",symbol:"AVAX",decimals:18,rpcUrl:"https://api.avax.network/ext/bc/C/rpc",rpcUrls:["https://api.avax.network/ext/bc/C/rpc","https://avax.meowrpc.com","https://avalanche.drpc.org"],explorerUrl:"https://snowtrace.io",isTestnet:!1,category:"avalanche",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/avalanchec/info/logo.png"},avalanche_fuji:{chainId:43113,chainIdHex:"0xa869",name:"Avalanche Fuji Testnet",symbol:"AVAX",decimals:18,rpcUrl:"https://api.avax-test.network/ext/bc/C/rpc",rpcUrls:["https://api.avax-test.network/ext/bc/C/rpc","https://avalanche-fuji.drpc.org"],explorerUrl:"https://testnet.snowtrace.io",isTestnet:!0,category:"avalanche",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/avalanchec/info/logo.png"},arbitrum_mainnet:{chainId:42161,chainIdHex:"0xa4b1",name:"Arbitrum One",symbol:"ETH",decimals:18,rpcUrl:"https://arb1.arbitrum.io/rpc",rpcUrls:["https://arb1.arbitrum.io/rpc","https://arbitrum.meowrpc.com","https://rpc.ankr.com/arbitrum"],explorerUrl:"https://arbiscan.io",isTestnet:!1,category:"arbitrum",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/arbitrum/info/logo.png"},arbitrum_sepolia:{chainId:421614,chainIdHex:"0x66eee",name:"Arbitrum Sepolia Testnet",symbol:"ETH",decimals:18,rpcUrl:"https://arbitrum-sepolia.drpc.org",rpcUrls:["https://arbitrum-sepolia.drpc.org","https://sepolia-rollup.arbitrum.io/rpc"],explorerUrl:"https://sepolia.arbiscan.io",isTestnet:!0,category:"arbitrum",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/arbitrum/info/logo.png"},optimism_mainnet:{chainId:10,chainIdHex:"0xa",name:"Optimism",symbol:"ETH",decimals:18,rpcUrl:"https://mainnet.optimism.io",rpcUrls:["https://mainnet.optimism.io","https://optimism.drpc.org"],explorerUrl:"https://optimistic.etherscan.io",isTestnet:!1,category:"optimism",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/optimism/info/logo.png"},base_mainnet:{chainId:8453,chainIdHex:"0x2105",name:"Base",symbol:"ETH",decimals:18,rpcUrl:"https://base-rpc.publicnode.com",rpcUrls:["https://base-rpc.publicnode.com","https://base.drpc.org"],explorerUrl:"https://basescan.org",isTestnet:!1,category:"base",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/base/info/logo.png"},base_sepolia:{chainId:84532,chainIdHex:"0x14a34",name:"Base Sepolia Testnet",symbol:"ETH",decimals:18,rpcUrl:"https://sepolia.base.org",rpcUrls:["https://sepolia.base.org","https://base-sepolia-rpc.publicnode.com"],explorerUrl:"https://sepolia.basescan.org",isTestnet:!0,category:"base",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/base/info/logo.png"},fantom_mainnet:{chainId:250,chainIdHex:"0xfa",name:"Fantom Opera",symbol:"FTM",decimals:18,rpcUrl:"https://rpcapi.fantom.network",rpcUrls:["https://rpcapi.fantom.network","https://rpc.fantom.network"],explorerUrl:"https://ftmscan.com",isTestnet:!1,category:"fantom",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/fantom/info/logo.png"},fantom_testnet:{chainId:4002,chainIdHex:"0xfa2",name:"Fantom Testnet",symbol:"FTM",decimals:18,rpcUrl:"https://rpc.testnet.fantom.network",rpcUrls:["https://rpc.testnet.fantom.network"],explorerUrl:"https://testnet.ftmscan.com",isTestnet:!0,category:"fantom",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/fantom/info/logo.png"},gnosis_mainnet:{chainId:100,chainIdHex:"0x64",name:"Gnosis Chain",symbol:"xDAI",decimals:18,rpcUrl:"https://rpc.gnosischain.com",rpcUrls:["https://rpc.gnosischain.com","0xrpc.io/gno"],explorerUrl:"https://gnosisscan.io",isTestnet:!1,category:"gnosis",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/xdai/info/logo.png"},cronos_mainnet:{chainId:25,chainIdHex:"0x19",name:"Cronos Mainnet",symbol:"CRO",decimals:18,rpcUrl:"https://evm.cronos.org",rpcUrls:["https://evm.cronos.org","https://cronos.drpc.org"],explorerUrl:"https://cronoscan.com",isTestnet:!1,category:"cronos",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/cronos/info/logo.png"},cronos_testnet:{chainId:338,chainIdHex:"0x152",name:"Cronos Testnet",symbol:"tCRO",decimals:18,rpcUrl:"https://evm-t3.cronos.org",rpcUrls:["https://evm-t3.cronos.org","https://cronos-testnet.drpc.org"],explorerUrl:"https://testnet.cronoscan.com",isTestnet:!0,category:"cronos",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/cronos/info/logo.png"},linea_mainnet:{chainId:59144,chainIdHex:"0xe708",name:"Linea Mainnet",symbol:"ETH",decimals:18,rpcUrl:"https://rpc.linea.build",rpcUrls:["https://rpc.linea.build","https://linea.drpc.org"],explorerUrl:"https://lineascan.build",isTestnet:!1,category:"linea",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/linea/info/logo.png"},linea_testnet:{chainId:59141,chainIdHex:"0xe705",name:"Linea Sepolia Testnet",symbol:"ETH",decimals:18,rpcUrl:"https://rpc.sepolia.linea.build",rpcUrls:["https://rpc.sepolia.linea.build"],explorerUrl:"https://sepolia.lineascan.build",isTestnet:!0,category:"linea",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/linea/info/logo.png"},mantle_mainnet:{chainId:5e3,chainIdHex:"0x1388",name:"Mantle",symbol:"MNT",decimals:18,rpcUrl:"https://rpc.mantle.xyz",rpcUrls:["https://rpc.mantle.xyz","https://mantle-mainnet.public.blastapi.io"],explorerUrl:"https://explorer.mantle.xyz",isTestnet:!1,category:"mantle",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/mantle/info/logo.png"},mantle_testnet:{chainId:5003,chainIdHex:"0x138b",name:"Mantle Sepolia Testnet",symbol:"MNT",decimals:18,rpcUrl:"https://rpc.sepolia.mantle.xyz",rpcUrls:["https://rpc.sepolia.mantle.xyz"],explorerUrl:"https://sepolia.mantlescan.xyz",isTestnet:!0,category:"mantle",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/mantle/info/logo.png"},klaytn_mainnet:{chainId:8217,chainIdHex:"0x2019",name:"Kaia Mainnet",symbol:"KAIA",decimals:18,rpcUrl:"https://klaytn.blockpi.network/v1/rpc/public",rpcUrls:["https://klaytn.blockpi.network/v1/rpc/public"],explorerUrl:"https://scope.klaytn.com",isTestnet:!1,category:"klaytn",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/klaytn/info/logo.png"},klaytn_baobab:{chainId:1001,chainIdHex:"0x3e9",name:"Kaia Kairos Testnet",symbol:"KAIA",decimals:18,rpcUrl:"https://klaytn-baobab.blockpi.network/v1/rpc/public",rpcUrls:["https://klaytn-baobab.blockpi.network/v1/rpc/public"],explorerUrl:"https://baobab.scope.klaytn.com",isTestnet:!0,category:"klaytn",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/klaytn/info/logo.png"},aurora_mainnet:{chainId:1313161554,chainIdHex:"0x4e454152",name:"Aurora Mainnet",symbol:"ETH",decimals:18,rpcUrl:"https://mainnet.aurora.dev",rpcUrls:["https://mainnet.aurora.dev","https://aurora.drpc.org"],explorerUrl:"https://aurorascan.dev",isTestnet:!1,category:"aurora",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/aurora/info/logo.png"},aurora_testnet:{chainId:1313161555,chainIdHex:"0x4e454153",name:"Aurora Testnet",symbol:"ETH",decimals:18,rpcUrl:"https://testnet.aurora.dev",rpcUrls:["https://testnet.aurora.dev"],explorerUrl:"https://testnet.aurorascan.dev",isTestnet:!0,category:"aurora",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/aurora/info/logo.png"},iotex_mainnet:{chainId:4689,chainIdHex:"0x1251",name:"IoTeX Mainnet",symbol:"IOTX",decimals:18,rpcUrl:"https://babel-api.mainnet.iotex.io",rpcUrls:["https://babel-api.mainnet.iotex.io"],explorerUrl:"https://iotexscan.io",isTestnet:!1,category:"iotex",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/iotex/info/logo.png"},iotex_testnet:{chainId:4690,chainIdHex:"0x1252",name:"IoTeX Testnet",symbol:"IOTX",decimals:18,rpcUrl:"https://babel-api.testnet.iotex.io",rpcUrls:["https://babel-api.testnet.iotex.io"],explorerUrl:"https://testnet.iotexscan.io",isTestnet:!0,category:"iotex",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/iotex/info/logo.png"},rootstock_mainnet:{chainId:30,chainIdHex:"0x1e",name:"Rootstock Mainnet",symbol:"RBTC",decimals:18,rpcUrl:"https://public-node.rsk.co",rpcUrls:["https://public-node.rsk.co"],explorerUrl:"https://explorer.rsk.co",isTestnet:!1,category:"rootstock",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/rootstock/info/logo.png"},rootstock_testnet:{chainId:31,chainIdHex:"0x1f",name:"Rootstock Testnet",symbol:"tRBTC",decimals:18,rpcUrl:"https://public-node.testnet.rsk.co",rpcUrls:["https://public-node.testnet.rsk.co"],explorerUrl:"https://explorer.testnet.rsk.co",isTestnet:!0,category:"rootstock",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/rootstock/info/logo.png"},okx_mainnet:{chainId:66,chainIdHex:"0x42",name:"OKXChain Mainnet",symbol:"OKT",decimals:18,rpcUrl:"https://exchainrpc.okex.org",rpcUrls:["https://exchainrpc.okex.org","https://oktc.drpc.org"],explorerUrl:"https://www.oklink.com/oktc",isTestnet:!1,category:"okx",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/okc/info/logo.png"},palm_mainnet:{chainId:11297108109,chainIdHex:"0x2a15c308d",name:"Palm Mainnet",symbol:"PALM",decimals:18,rpcUrl:"https://palm-mainnet.public.blastapi.io",rpcUrls:["https://palm-mainnet.public.blastapi.io"],explorerUrl:"https://explorer.palm.io",isTestnet:!1,category:"palm",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/palm/info/logo.png"},palm_testnet:{chainId:11297108099,chainIdHex:"0x2a15c3083",name:"Palm Testnet",symbol:"PALM",decimals:18,rpcUrl:"https://palm-testnet.public.blastapi.io",rpcUrls:["https://palm-testnet.public.blastapi.io"],explorerUrl:"https://explorer.palm-uat.xyz",isTestnet:!0,category:"palm",icon:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/palm/info/logo.png"},milkomeda_c1:{chainId:2001,chainIdHex:"0x7d1",name:"Milkomeda Cardano",symbol:"milkADA",decimals:18,rpcUrl:"https://rpc-mainnet-cardano-evm.c1.milkomeda.com",rpcUrls:["https://rpc-mainnet-cardano-evm.c1.milkomeda.com"],explorerUrl:"https://explorer-mainnet-cardano-evm.c1.milkomeda.com",isTestnet:!1,category:"milkomeda",icon:"https://raw.githubusercontent.com/milkomeda-com/assets/main/milkomeda-logo.png"},mint_mainnet:{chainId:185,chainIdHex:"0xb9",name:"Mint Mainnet",symbol:"ETH",decimals:18,rpcUrl:"https://global.rpc.mintchain.io",rpcUrls:["https://global.rpc.mintchain.io","https://asia.rpc.mintchain.io"],explorerUrl:"https://explorer.mintchain.io",isTestnet:!1,category:"mint",icon:"https://mintchain.io/favicon.png"},mint_sepolia:{chainId:1687,chainIdHex:"0x697",name:"Mint Sepolia Testnet",symbol:"ETH",decimals:18,rpcUrl:"https://sepolia-testnet-rpc.mintchain.io",rpcUrls:["https://sepolia-testnet-rpc.mintchain.io"],explorerUrl:"https://sepolia-testnet-explorer.mintchain.io",isTestnet:!0,category:"mint",icon:"https://mintchain.io/favicon.png"}},Ga=["ramestta_mainnet","ramestta_testnet"],ue={};Object.keys(at).forEach(n=>{Ga.includes(n)&&(ue[n]=at[n])});function pu(n){return at[n]?(ue[n]=at[n],!0):!1}function op(n){return n==="ramestta_mainnet"?!1:ue[n]&&!ue[n].isCustom?(delete ue[n],!0):!1}function xu(n){n.includes("ramestta_mainnet")||n.unshift("ramestta_mainnet");let e={};Object.keys(ue).forEach(t=>{t.startsWith("custom_")&&(e[t]=ue[t])}),ue={...e},n.forEach(t=>{at[t]&&(ue[t]=at[t])})}var ln="m/44'/60'/0'/0",ri=class{constructor(){this.currentWallet=null,this.currentNetwork=ue.ramestta_mainnet,this.provider=null,this.accounts=[]}async initProvider(){let e=this.currentNetwork.rpcUrl;return this.provider=new ne.JsonRpcProvider(e,{chainId:this.currentNetwork.chainId,name:this.currentNetwork.name}),this.provider}async createNewWallet(){let e=ne.Mnemonic.entropyToPhrase(ne.randomBytes(16)),r=ne.HDNodeWallet.fromPhrase(e,"",ln).deriveChild(0);return{mnemonic:e,address:r.address,privateKey:r.privateKey,publicKey:r.publicKey,derivationPath:`${ln}/0`}}async importFromMnemonic(e,t=0){if(!ne.Mnemonic.isValidMnemonic(e))throw new Error("Invalid mnemonic phrase");let s=ne.HDNodeWallet.fromPhrase(e.trim(),"",ln).deriveChild(t);return{address:s.address,privateKey:s.privateKey,publicKey:s.publicKey,derivationPath:`${ln}/${t}`,accountIndex:t}}async importFromPrivateKey(e){let t=e.trim();t.startsWith("0x")||(t="0x"+t);let r=new ne.Wallet(t);return{address:r.address,privateKey:r.privateKey,publicKey:r.signingKey.publicKey,type:"privateKey"}}async importFromKeystore(e,t){let r=await ne.Wallet.fromEncryptedJson(e,t);return{address:r.address,privateKey:r.privateKey,publicKey:r.signingKey.publicKey,type:"keystore"}}async deriveAccounts(e,t=1){let r=[],s=ne.HDNodeWallet.fromPhrase(e.trim(),"",ln);for(let o=0;o<t;o++){let i=s.deriveChild(o);r.push({address:i.address,privateKey:i.privateKey,publicKey:i.publicKey,derivationPath:`${ln}/${o}`,accountIndex:o,name:`Account ${o+1}`,type:"derived"})}return r}async deriveAccount(e,t){let s=ne.HDNodeWallet.fromPhrase(e.trim(),"",ln).deriveChild(t);return{address:s.address,privateKey:s.privateKey,publicKey:s.publicKey,derivationPath:`${ln}/${t}`,accountIndex:t,name:`Account ${t+1}`,type:"derived"}}async getBalance(e){this.provider||await this.initProvider();let t=await this.provider.getBalance(e);return{wei:t.toString(),ether:ne.formatEther(t),symbol:this.currentNetwork.symbol}}async getTokenBalance(e,t){this.provider||await this.initProvider();let r=["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)","function symbol() view returns (string)","function name() view returns (string)"],s=new ne.Contract(t,r,this.provider),[o,i,a,c]=await Promise.all([s.balanceOf(e),s.decimals(),s.symbol(),s.name()]);return{balance:o.toString(),formatted:ne.formatUnits(o,i),decimals:Number(i),symbol:a,name:c}}async getTokenInfo(e){this.provider||await this.initProvider();let t=["function decimals() view returns (uint8)","function symbol() view returns (string)","function name() view returns (string)","function totalSupply() view returns (uint256)"],r=new ne.Contract(e,t,this.provider),[s,o,i,a]=await Promise.all([r.decimals(),r.symbol(),r.name(),r.totalSupply().catch(()=>BigInt(0))]);return{address:e,decimals:Number(s),symbol:o,name:i,totalSupply:a.toString()}}async sendTransaction(e,t,r){this.provider||await this.initProvider();let s=parseFloat(r).toString();if(isNaN(parseFloat(s))||parseFloat(s)<=0)throw new Error("Invalid amount");return await(await new ne.Wallet(e,this.provider).sendTransaction({to:t,value:ne.parseEther(s)})).wait()}async sendToken(e,t,r,s){this.provider||await this.initProvider();let o=new ne.Wallet(e,this.provider),i=["function transfer(address to, uint256 amount) returns (bool)","function decimals() view returns (uint8)"],a=new ne.Contract(t,i,o),c=await a.decimals(),l=ne.parseUnits(s,c);return await(await a.transfer(r,l)).wait()}async estimateGas(e,t,r){this.provider||await this.initProvider();let s=await this.provider.estimateGas({from:e,to:t,value:ne.parseEther(r)}),o=await this.provider.getFeeData();return{gasLimit:s.toString(),gasPrice:o.gasPrice?.toString()||"0",maxFeePerGas:o.maxFeePerGas?.toString()||"0",maxPriorityFeePerGas:o.maxPriorityFeePerGas?.toString()||"0"}}async signMessage(e,t){return await new ne.Wallet(e).signMessage(t)}async signTypedData(e,t,r,s){return await new ne.Wallet(e).signTypedData(t,r,s)}switchNetwork(e){if(ue[e])this.currentNetwork=ue[e],this.provider=null;else throw new Error(`Unknown network: ${e}`)}addCustomNetwork(e){let t=`custom_${e.chainId}`;return ue[t]=e,t}async getTransactionHistory(e){if(console.log("getTransactionHistory called with address:",e),console.log("Current network:",this.currentNetwork?.name,"explorerUrl:",this.currentNetwork?.explorerUrl),!e)return console.log("No address provided, returning empty"),[];if(!this.currentNetwork?.explorerUrl)return console.log("No explorerUrl found, returning empty"),[];let[r,s,o]=await Promise.all([this.fetchNativeTransactions(e),this.fetchTokenTransfers(e),this.fetchNftTransfers(e)]),i=[...r,...s,...o];i.sort((l,u)=>(parseInt(u.timeStamp)||0)-(parseInt(l.timeStamp)||0));let a=new Set,c=i.filter(l=>{let u=l.txType==="native"?l.hash:`${l.hash}_${l.tokenSymbol||""}_${l.from}_${l.to}`;return a.has(u)?!1:(a.add(u),!0)});return console.log(`Fetched ${r.length} native, ${s.length} token, ${o.length} NFT transactions`),c}getApiBaseUrl(){let e=this.currentNetwork.explorerUrl;return e.includes("ramascan.com")?"https://latest-backendapi.ramascan.com/api/v1/":e.includes("etherscan.io")?"https://api.etherscan.io/api":e.includes("polygonscan.com")?"https://api.polygonscan.com/api":e.includes("bscscan.com")?"https://api.bscscan.com/api":e.includes("arbiscan.io")?"https://api.arbiscan.io/api":e.includes("optimistic.etherscan.io")?"https://api-optimistic.etherscan.io/api":e.includes("basescan.org")?"https://api.basescan.org/api":e.includes("snowtrace.io")||e.includes("snowscan.xyz")?"https://api.snowscan.xyz/api":e.includes("ftmscan.com")?"https://api.ftmscan.com/api":`${e.replace(/\/$/,"")}/api`}getBlockscoutV2BaseUrl(){let e=this.currentNetwork?.explorerUrl||"",t=this.currentNetwork?.chainId;if(e.includes("ramascan.com"))return e.includes("testnet")?"https://testnet-backendapi.ramascan.com":"https://latest-backendapi.ramascan.com";let r={1:"https://eth.blockscout.com",11155111:"https://eth-sepolia.blockscout.com",17e3:"https://eth-holesky.blockscout.com",61:"https://etc.blockscout.com",137:"https://polygon.blockscout.com",80002:"https://polygon-amoy.blockscout.com",42161:"https://arbitrum.blockscout.com",10:"https://optimism.blockscout.com",8453:"https://base.blockscout.com",84532:"https://base-sepolia.blockscout.com",324:"https://zksync.blockscout.com",100:"https://gnosis.blockscout.com",534352:"https://scroll.blockscout.com",59144:"https://linea.blockscout.com",5e3:"https://explorer.mantle.xyz",42220:"https://celo.blockscout.com"};if(t&&r[t])return r[t];if(e.includes("blockscout.com")){let s=e.match(/https?:\/\/[^\/]+/);return s?s[0]:null}return null}getRoutescanApiUrl(){let e=this.currentNetwork?.chainId,t={56:{network:"mainnet",chainId:56},97:{network:"testnet",chainId:97},43114:{network:"mainnet",chainId:43114},43113:{network:"testnet",chainId:43113},250:{network:"mainnet",chainId:250},4002:{network:"testnet",chainId:4002},25:{network:"mainnet",chainId:25},338:{network:"testnet",chainId:338},1313161554:{network:"mainnet",chainId:1313161554}};if(e&&t[e]){let r=t[e];return`https://api.routescan.io/v2/network/${r.network}/evm/${r.chainId}`}return null}usesBlockscoutV2(){return this.getBlockscoutV2BaseUrl()!==null}usesRoutescan(){return this.getRoutescanApiUrl()!==null}async fetchNativeTransactions(e){let t=this.currentNetwork.explorerUrl||"";if(console.log("fetchNativeTransactions - explorerUrl:",t,"address:",e),t.includes("ramascan.com")){let l=t.includes("testnet")?"https://testnet-backendapi.ramascan.com":"https://latest-backendapi.ramascan.com";try{let u=`${l}/api/v2/addresses/${e}/transactions`;console.log("Fetching native transactions from v2 API:",u);let f=await fetch(u,{headers:{Accept:"application/json","User-Agent":"RamaPay-Extension/1.0"}});if(console.log("V2 API response status:",f.status),f.ok){let h=await f.json();if(console.log("V2 API data items count:",h.items?.length||0),h.items&&Array.isArray(h.items)){let p=this.parseV2Transactions(h.items,e);return console.log("Parsed V2 transactions:",p.length),p}}else console.warn("V2 API returned non-ok status:",f.status)}catch(u){console.warn("V2 transactions fetch failed, trying v1:",u)}try{let u=`${l}/api/v1/?module=account&action=txlist&address=${e}&sort=desc&page=1&offset=50`;console.log("Trying v1 API:",u);let f=await fetch(u);if(f.ok){let h=await f.json();if(h.status==="1"&&Array.isArray(h.result))return this.parseV1Transactions(h.result)}}catch(u){console.warn("V1 transactions fetch also failed:",u)}return[]}let s=this.getBlockscoutV2BaseUrl();if(s&&this.usesBlockscoutV2())try{let c=`${s}/api/v2/addresses/${e}/transactions`;console.log("Fetching from Blockscout v2 API:",c);let l=await fetch(c,{headers:{Accept:"application/json"}});if(l.ok){let u=await l.json();if(u.items&&Array.isArray(u.items))return this.parseV2Transactions(u.items,e)}}catch(c){console.warn("Blockscout v2 fetch failed, trying alternatives:",c)}let o=this.getRoutescanApiUrl();if(o)try{let c=`${o}/address/${e}/transactions`;console.log("Fetching from Routescan API:",c);let l=await fetch(c,{headers:{Accept:"application/json"}});if(l.ok){let u=await l.json();if(u.items&&Array.isArray(u.items))return this.parseRoutescanTransactions(u.items,e)}}catch(c){console.warn("Routescan fetch failed:",c)}let a=`${this.getApiBaseUrl()}?module=account&action=txlist&address=${e}&sort=desc&page=1&offset=50`;try{console.log("Fetching native transactions from:",a);let c=await fetch(a);if(!c.ok)throw new Error(`HTTP ${c.status}`);let l=await c.json();return Array.isArray(l.result)&&l.result.length>0?(console.log(`Fetched ${l.result.length} transactions (status: ${l.status})`),this.parseV1Transactions(l.result)):(l.message&&console.log("API response:",l.message),[])}catch(c){return console.warn("Native transactions fetch failed:",c),[]}}parseRoutescanTransactions(e,t){return e.map(r=>{let s;if(r.timestamp)try{let o=new Date(r.timestamp);s=Math.floor(o.getTime()/1e3).toString()}catch{s=Math.floor(Date.now()/1e3).toString()}else s=Math.floor(Date.now()/1e3).toString();return{hash:r.id||r.hash||"",from:r.from||"",to:r.to||"",value:r.value||"0",timeStamp:s,blockNumber:String(r.blockNumber||""),gasPrice:r.gasPrice||"0",gasUsed:String(r.gasUsed||"0"),isError:!r.status,txreceipt_status:r.status?"1":"0",input:"0x",methodId:"",functionName:"",txType:"native",tokenSymbol:this.currentNetwork.symbol||"ETH"}})}parseV1Transactions(e){return e.map(t=>({hash:t.hash,from:t.from,to:t.to,value:t.value,timeStamp:t.timeStamp,blockNumber:t.blockNumber,gasPrice:t.gasPrice,gasUsed:t.gasUsed,isError:t.isError==="1",txreceipt_status:t.txreceipt_status,input:t.input,methodId:t.methodId,functionName:t.functionName,txType:"native",tokenSymbol:this.currentNetwork.symbol||"RAMA"}))}parseV2Transactions(e,t){return e.map(r=>{let s=r.from?.hash||r.from||"",o=r.to?.hash||r.to||"",i;if(r.timestamp)try{let f=r.timestamp.split(".")[0]+"Z",h=new Date(f);i=Math.floor(h.getTime()/1e3).toString()}catch{i=Math.floor(Date.now()/1e3).toString()}else i=Math.floor(Date.now()/1e3).toString();let c=(r.transaction_types||[]).includes("token_transfer"),l=r.method||"";r.decoded_input?.method_call&&(l=r.decoded_input.method_call.split("(")[0]);let u=r.status!=="ok"||r.result!=="success";return{hash:r.hash||"",from:s,to:o,value:r.value||"0",timeStamp:i,blockNumber:String(r.block_number||r.block||""),gasPrice:r.gas_price||"0",gasUsed:String(r.gas_used||"0"),isError:u,txreceipt_status:r.status==="ok"?"1":"0",input:r.raw_input||"0x",methodId:r.raw_input?.slice(0,10)||"",functionName:l,txType:"native",tokenSymbol:this.currentNetwork.symbol||"RAMA",fee:r.fee?.value||"0",nonce:r.nonce,contractName:r.to?.name||null,isContractCall:r.to?.is_contract||!1}})}async fetchTokenTransfers(e){let t=this.getApiBaseUrl(),r=this.currentNetwork.explorerUrl||"",s=this.getBlockscoutV2BaseUrl();if(s)try{let a=`${s}/api/v2/addresses/${e}/token-transfers?type=ERC-20`;console.log("Fetching token transfers from v2 API:",a);let c=await fetch(a);if(c.ok){let l=await c.json();if(console.log("Token transfers v2 API items:",l.items?.length||0),l.items&&Array.isArray(l.items))return this.parseV2TokenTransfers(l.items,e)}}catch(a){console.warn("V2 token transfers fetch failed, falling back:",a)}let o=this.getRoutescanApiUrl();if(o)try{let a=`${o}/address/${e}/erc20-transfers`;console.log("Fetching token transfers from Routescan:",a);let c=await fetch(a,{headers:{Accept:"application/json"}});if(c.ok){let l=await c.json();if(l.items&&Array.isArray(l.items))return this.parseRoutescanTokenTransfers(l.items,e)}}catch(a){console.warn("Routescan token transfers fetch failed:",a)}let i=`${t}?module=account&action=tokentx&address=${e}&sort=desc&page=1&offset=50`;try{console.log("Fetching token transfers from:",i);let a=await fetch(i);if(!a.ok)throw new Error(`HTTP ${a.status}`);let c=await a.json();return Array.isArray(c.result)&&c.result.length>0?(console.log(`Fetched ${c.result.length} token transfers (status: ${c.status})`),c.result.map(l=>({hash:l.hash,from:l.from,to:l.to,value:l.value,timeStamp:l.timeStamp,blockNumber:l.blockNumber,contractAddress:l.contractAddress,tokenName:l.tokenName,tokenSymbol:l.tokenSymbol,tokenDecimal:l.tokenDecimal,gasPrice:l.gasPrice,gasUsed:l.gasUsed,txType:"erc20"}))):[]}catch(a){return console.warn("Token transfers fetch failed:",a),[]}}parseV2TokenTransfers(e,t){return e.filter(r=>{if(r.type==="token_burning")return!1;let s=r.to?.hash||r.to;return!(s&&s.toLowerCase()==="0x0000000000000000000000000000000000000000")}).map(r=>{let s=r.from?.hash||r.from||"",o=r.to?.hash||r.to||"",i=r.token||{},a=i.address||"",c=i.name||"Unknown Token",l=i.symbol||"TOKEN",u=i.decimals||"18",h=(r.total||{}).value||r.value||"0",p;if(r.timestamp)try{let b=new Date(r.timestamp.split(".")[0]+"Z");p=Math.floor(b.getTime()/1e3).toString()}catch{p=Math.floor(Date.now()/1e3).toString()}else p=Math.floor(Date.now()/1e3).toString();return{hash:r.transaction_hash||r.tx_hash||"",from:s,to:o,value:h,timeStamp:p,blockNumber:String(r.block_number||r.block||""),contractAddress:a,tokenName:c,tokenSymbol:l,tokenDecimal:u,txType:"erc20"}})}parseRoutescanTokenTransfers(e,t){return e.filter(r=>(r.to||"").toLowerCase()!=="0x0000000000000000000000000000000000000000").map(r=>{let s;if(r.timestamp)try{let o=new Date(r.timestamp);s=Math.floor(o.getTime()/1e3).toString()}catch{s=Math.floor(Date.now()/1e3).toString()}else s=Math.floor(Date.now()/1e3).toString();return{hash:r.id||r.transactionHash||"",from:r.from||"",to:r.to||"",value:r.value||"0",timeStamp:s,blockNumber:String(r.blockNumber||""),contractAddress:r.tokenAddress||"",tokenName:r.tokenName||"Unknown Token",tokenSymbol:r.tokenSymbol||"TOKEN",tokenDecimal:r.tokenDecimals||"18",txType:"erc20"}})}async fetchNftTransfers(e){let t=this.getApiBaseUrl(),r=this.currentNetwork.explorerUrl||"",s=this.getBlockscoutV2BaseUrl();if(s)try{let o=`${s}/api/v2/addresses/${e}/token-transfers?type=ERC-721,ERC-1155`;console.log("Fetching NFT transfers from v2 API:",o);let i=await fetch(o,{headers:{Accept:"application/json","User-Agent":"RamaPay-Extension/1.0"}});if(i.ok){let a=await i.json();if(console.log("NFT transfers v2 API items:",a.items?.length||0),a.items&&Array.isArray(a.items)&&a.items.length>0)return this.parseV2NftTransfers(a.items,e)}}catch(o){console.warn("V2 NFT transfers fetch failed, trying v1:",o)}try{let o=`${t}?module=account&action=tokennfttx&address=${e}&sort=desc&page=1&offset=50`;console.log("Fetching NFT transfers from v1 API:",o);let i=await fetch(o);if(i.ok){let a=await i.json();if(Array.isArray(a.result)&&a.result.length>0)return console.log(`Fetched ${a.result.length} NFT transfers (status: ${a.status})`),a.result.map(c=>({hash:c.hash,from:c.from,to:c.to,tokenID:c.tokenID,timeStamp:c.timeStamp,blockNumber:c.blockNumber,contractAddress:c.contractAddress,tokenName:c.tokenName,tokenSymbol:c.tokenSymbol,txType:"nft"}))}}catch(o){console.warn("NFT transfers fetch failed:",o)}return[]}parseV2NftTransfers(e,t){return e.filter(r=>{if(r.type==="token_burning")return!1;let s=r.to?.hash||r.to;return!(s&&s.toLowerCase()==="0x0000000000000000000000000000000000000000")}).map(r=>{let s=r.from?.hash||r.from||"",o=r.to?.hash||r.to||"",i=r.token||{},a=i.address||"",c=i.name||"Unknown NFT",l=i.symbol||"NFT",f=(r.total||{}).token_id||r.token_id||"",h;if(r.timestamp)try{let p=r.timestamp.split(".")[0]+"Z",b=new Date(p);h=Math.floor(b.getTime()/1e3).toString()}catch{h=Math.floor(Date.now()/1e3).toString()}else h=Math.floor(Date.now()/1e3).toString();return{hash:r.transaction_hash||r.tx_hash||"",from:s,to:o,tokenID:f,timeStamp:h,blockNumber:String(r.block_number||r.block||""),contractAddress:a,tokenName:c,tokenSymbol:l,txType:"nft"}})}},ni=class{constructor(){this.storageKey="ramapay_wallet_data"}async encrypt(e,t){let r=new TextEncoder,s=JSON.stringify(e),o=await crypto.subtle.importKey("raw",r.encode(t),"PBKDF2",!1,["deriveBits","deriveKey"]),i=crypto.getRandomValues(new Uint8Array(16)),a=crypto.getRandomValues(new Uint8Array(12)),c=await crypto.subtle.deriveKey({name:"PBKDF2",salt:i,iterations:1e5,hash:"SHA-256"},o,{name:"AES-GCM",length:256},!1,["encrypt"]),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},c,r.encode(s)),u=new Uint8Array(i.length+a.length+l.byteLength);return u.set(i,0),u.set(a,i.length),u.set(new Uint8Array(l),i.length+a.length),btoa(String.fromCharCode(...u))}async decrypt(e,t){let r=new TextEncoder,s=new TextDecoder,o=Uint8Array.from(atob(e),h=>h.charCodeAt(0)),i=o.slice(0,16),a=o.slice(16,28),c=o.slice(28),l=await crypto.subtle.importKey("raw",r.encode(t),"PBKDF2",!1,["deriveBits","deriveKey"]),u=await crypto.subtle.deriveKey({name:"PBKDF2",salt:i,iterations:1e5,hash:"SHA-256"},l,{name:"AES-GCM",length:256},!1,["decrypt"]),f=await crypto.subtle.decrypt({name:"AES-GCM",iv:a},u,c);return JSON.parse(s.decode(f))}async saveWallet(e,t){let r=await this.encrypt(e,t);return new Promise((s,o)=>{chrome.storage.local.set({[this.storageKey]:r},()=>{chrome.runtime.lastError?o(chrome.runtime.lastError):s()})})}async loadWallet(e){return new Promise((t,r)=>{chrome.storage.local.get([this.storageKey],async s=>{if(chrome.runtime.lastError){r(chrome.runtime.lastError);return}let o=s[this.storageKey];if(!o){t(null);return}try{let i=await this.decrypt(o,e);t(i)}catch{r(new Error("Invalid password"))}})})}async hasWallet(){return new Promise(e=>{chrome.storage.local.get([this.storageKey],t=>{e(!!t[this.storageKey])})})}async clearWallet(){return new Promise((e,t)=>{chrome.storage.local.remove([this.storageKey],()=>{chrome.runtime.lastError?t(chrome.runtime.lastError):e()})})}async savePreferences(e){return new Promise((t,r)=>{chrome.storage.local.set({ramapay_preferences:e},()=>{chrome.runtime.lastError?r(chrome.runtime.lastError):t()})})}async loadPreferences(){return new Promise(e=>{chrome.storage.local.get(["ramapay_preferences"],t=>{e(t.ramapay_preferences||{network:"ramestta_mainnet",currency:"USD",theme:"dark"})})})}},hN=new ri,pN=new ni;var F=new ri,Z=new ni,Qe=!1,X=null,x=null,nr=new Set,ap={5:5,15:15,30:30,60:60,120:120,never:0},Ka=30,cp=Date.now(),rt=[...Ga],un=new Map;async function mu(n){try{await chrome.storage.session.set({ramapay_session_password:n}),console.log("Session password saved to storage.session")}catch(e){console.error("Failed to save session password:",e)}}async function iy(){try{return(await chrome.storage.session.get(["ramapay_session_password"])).ramapay_session_password||null}catch(n){return console.error("Failed to get session password:",n),null}}async function ay(){try{await chrome.storage.session.remove(["ramapay_session_password"]),console.log("Session password cleared from storage.session")}catch(n){console.error("Failed to clear session password:",n)}}async function j(){if(Qe&&x&&X)return!0;let n=await iy();if(!n)return!1;try{let e=await Z.loadWallet(n);return e?(Qe=!0,X=n,x=e,mp(),console.log("Session restored from storage.session"),!0):!1}catch(e){return console.error("Failed to restore session:",e),!1}}async function cy(){console.log("RamaPay Extension initialized");let n=await Z.loadPreferences();n.network&&ue[n.network]&&F.switchNetwork(n.network),n.autoLockMinutes!==void 0&&(Ka=n.autoLockMinutes);let e=await Z.hasWallet();console.log("Wallet exists:",e),e&&await j(),ly()}function ly(){chrome.alarms.clear("autoLockCheck")}chrome.alarms.onAlarm.addListener(n=>{});function Wa(){cp=Date.now()}cy();chrome.runtime.onMessage.addListener((n,e,t)=>(uy(n,e).then(t).catch(r=>t({success:!1,error:r.message})),!0));async function uy(n,e){let{action:t,data:r}=n;switch(Qe&&!["getWalletStatus","getAutoLockSettings"].includes(t)&&Wa(),t){case"createWallet":return await fy(r);case"importWallet":return await dy(r);case"unlockWallet":return await hy(r);case"lockWallet":return lp();case"getWalletStatus":return my();case"generateQRCode":return await gy(r);case"getAccounts":return await by();case"getNextAccountIndex":return yy();case"addAccount":return await wy(r);case"createHDWallet":return await Ay(r);case"getMasterWallets":return await Ey();case"addAccountToMaster":return await ky(r);case"bulkAddToMaster":return await Iy(r);case"renameMasterWallet":return await Ny(r);case"switchAccount":return await Py(r);case"renameAccount":return await Ty(r);case"removeAccount":return await vy(r);case"importPrivateKeyAccount":return await Cy(r);case"bulkAddAccounts":return await By(r);case"importSeedPhraseAccounts":return await Ry(r);case"addWatchWallet":return await Sy(r);case"recoverAccountByIndex":return await Uy(r);case"getBalance":return await up(r);case"getTokenBalance":return await Oy(r);case"sendTransaction":return await fp(r);case"sendToken":return await Dy(r);case"estimateGas":return await Ly(r);case"getTransactionHistory":return await My(r);case"signMessage":return await dp(r);case"signTypedData":return await hp(r);case"switchNetwork":return pp(r);case"getNetworks":return{success:!0,networks:ue};case"getCurrentNetwork":return{success:!0,network:F.currentNetwork};case"addCustomNetwork":return await Zy(r);case"removeCustomNetwork":return await Xy(r);case"getCustomNetworks":return await ew();case"getEnabledNetworks":return tw();case"enableBuiltinNetwork":return await rw(r);case"disableBuiltinNetwork":return await nw(r);case"getAllAvailableNetworks":return{success:!0,networks:at};case"changePassword":return await sw(r);case"verifyPassword":return await ow(r);case"exportPrivateKey":return await iw(r);case"exportRecoveryPhrase":return await aw(r);case"getConnectedSites":return cw();case"getAutoLockSettings":return py();case"setAutoLockTimeout":return await xy(r);case"connectSite":return await xp(r,e);case"disconnectSite":return Ky(r);case"isConnected":return{success:!0,connected:nr.has(r.origin)};case"addToken":return await Vy(r);case"removeToken":return await zy(r);case"getTokens":return await Qy(r);case"getTokenInfo":return await Jy(r);case"scanTokenAllNetworks":return await jy(r);case"autoFetchTokens":return await qy(r);case"getPendingDappRequest":return _y();case"approveDappConnection":return await Hy(r);case"rejectDappConnection":return Gy(r);case"getPrice":return await $y(r);case"getPrices":return await Yy(r);case"web3Request":return await Wy(r,e);default:return{success:!1,error:`Unknown action: ${t}`}}}async function fy({password:n}){try{let e=await F.createNewWallet(),t=to(),r={mnemonic:e.mnemonic,masterWallets:[{id:t,name:"Master Wallet 1",mnemonic:e.mnemonic,createdAt:Date.now(),type:"master"}],accounts:[{address:e.address,privateKey:e.privateKey,name:"Account 1",type:"derived",derivationPath:e.derivationPath,accountIndex:0,masterWalletId:t}],activeAccountIndex:0};return await Z.saveWallet(r,n),Qe=!0,X=n,x=r,await mu(n),{success:!0,mnemonic:e.mnemonic,address:e.address}}catch(e){return{success:!1,error:e.message}}}async function dy({password:n,mnemonic:e,privateKey:t,type:r}){try{let s,o;if(r==="mnemonic"&&e){s=await F.importFromMnemonic(e);let i=to();o={mnemonic:e.trim(),masterWallets:[{id:i,name:"Master Wallet 1",mnemonic:e.trim(),createdAt:Date.now(),type:"master"}],accounts:[{address:s.address,privateKey:s.privateKey,name:"Account 1",type:"derived",derivationPath:s.derivationPath,accountIndex:0,masterWalletId:i}],activeAccountIndex:0}}else if(r==="privateKey"&&t)s=await F.importFromPrivateKey(t),o={accounts:[{address:s.address,privateKey:s.privateKey,name:"Account 1",type:"imported"}],activeAccountIndex:0};else throw new Error("Invalid import type or missing data");return await Z.saveWallet(o,n),Qe=!0,X=n,x=o,await mu(n),{success:!0,address:s.address}}catch(s){return{success:!1,error:s.message}}}async function hy({password:n}){try{let e=await Z.loadWallet(n);if(!e)return{success:!1,error:"No wallet found"};Qe=!0,X=n,x=e,await mu(n),Wa(),mp();let t=await Z.loadPreferences();return t.autoLockMinutes!==void 0&&(Ka=t.autoLockMinutes),is()&&(await Z.saveWallet(x,n),console.log("Migrated wallet data: linked accounts to master wallets")),{success:!0,address:e.accounts[e.activeAccountIndex].address}}catch(e){return{success:!1,error:e.message}}}async function lp(){return Qe=!1,X=null,x=null,await ay(),{success:!0}}function py(){return{success:!0,autoLockMinutes:Ka,options:ap,lastActivityTime:cp}}async function xy({minutes:n}){if(!Object.values(ap).includes(n))return{success:!1,error:"Invalid auto-lock timeout value"};Ka=n;let t=await Z.loadPreferences();return t.autoLockMinutes=n,await Z.savePreferences(t),Wa(),{success:!0,autoLockMinutes:n}}async function my(){return Qe||await j(),Qe&&Wa(),{success:!0,hasWallet:x!==null||Qe,isUnlocked:Qe,hasMnemonic:Qe&&x?!!x.mnemonic:!1,address:Qe&&x?x.accounts[x.activeAccountIndex].address:null,network:F.currentNetwork}}async function gy({text:n}){try{console.log("Service worker generating QR for:",n);let e=await sp(n);return console.log("QR dataUrl generated:",e?"success":"null"),e?{success:!0,dataUrl:e}:{success:!1,error:"QR generation returned null"}}catch(e){return console.error("QR generation error:",e),{success:!1,error:e.message}}}async function by(){if(!x&&!await j())return{success:!1,error:"No wallet data",accounts:[],masterWallets:[]};is()&&X&&await Z.saveWallet(x,X);let e=(x.masterWallets||[]).map(r=>({id:r.id,name:r.name,type:"master"})),t=x.accounts.map((r,s)=>{let o=r.masterWalletId?e.find(i=>i.id===r.masterWalletId):null;return{address:r.address,name:r.name,type:r.type||"derived",isActive:s===x.activeAccountIndex,accountIndex:r.accountIndex,masterWalletId:r.masterWalletId||null,masterWalletName:o?.name||null,index:s}});return console.log("getAccounts - total accounts:",t.length),console.log("getAccounts - watch accounts:",t.filter(r=>r.type==="watch").length),console.log("getAccounts - master wallets:",e.length),{success:!0,accounts:t,masterWallets:e,hasMnemonic:!!x.mnemonic||x.masterWallets?.length>0}}async function yy(){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};let n=-1;x.accounts.forEach(t=>{t.type==="derived"&&t.accountIndex!==null&&t.accountIndex!==void 0&&(n=Math.max(n,t.accountIndex))});let e=n+1;return{success:!0,nextIndex:e,nextAccountNumber:e+1}}async function wy({name:n}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};if(!x.mnemonic)return{success:!1,error:"Cannot derive accounts from imported private key wallet"};try{let e=-1;x.accounts.forEach(o=>{o.type==="derived"&&o.accountIndex!==null&&o.accountIndex!==void 0&&(e=Math.max(e,o.accountIndex))});let t=e+1,r=await F.deriveAccount(x.mnemonic,t),s={address:r.address,privateKey:r.privateKey,name:n||`Account ${t+1}`,type:"derived",accountIndex:t};return x.accounts.push(s),await Z.saveWallet(x,X),{success:!0,address:s.address,accountIndex:t}}catch(e){return{success:!1,error:e.message}}}async function Ay({name:n}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};try{if(!x.masterWallets&&(x.masterWallets=[],x.mnemonic)){let c={id:to(),name:"Master Wallet 1",mnemonic:x.mnemonic,createdAt:Date.now(),type:"master"};x.masterWallets.push(c),x.accounts.forEach(l=>{l.type==="derived"&&!l.masterWalletId&&(l.masterWalletId=c.id)})}let e=await F.createNewWallet(),t=to(),r=x.masterWallets.length+1,s={id:t,name:n||`Master Wallet ${r}`,mnemonic:e.mnemonic,createdAt:Date.now(),type:"master"};x.masterWallets.push(s),x.mnemonic||(x.mnemonic=e.mnemonic);let o=await F.deriveAccount(e.mnemonic,0),i=x.accounts.some(c=>c.address.toLowerCase()===o.address.toLowerCase()),a=null;if(!i){let c={address:o.address,privateKey:o.privateKey,name:"Account 1",type:"derived",accountIndex:0,masterWalletId:t};x.accounts.push(c),a=x.accounts.length-1,x.activeAccountIndex=a}return await Z.saveWallet(x,X),{success:!0,masterWalletId:t,masterWalletName:s.name,mnemonic:e.mnemonic,hasMnemonic:!0,address:o.address,activeAccountIndex:a}}catch(e){return{success:!1,error:e.message}}}function to(){return"mw_"+Date.now().toString(36)+"_"+Math.random().toString(36).substr(2,9)}async function Ey(){return!x&&!await j()?{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."}:(is()&&X&&await Z.saveWallet(x,X),{success:!0,masterWallets:(x.masterWallets||[]).map(t=>{let r=x.accounts.filter(o=>o.masterWalletId===t.id),s=r.find(o=>o.accountIndex===0)||r[0];return{id:t.id,name:t.name,createdAt:t.createdAt,accountCount:r.length,firstAddress:s?.address||null}})})}function is(){if(!x)return!1;let n=!1;if(x.masterWallets||(x.masterWallets=[],n=!0),x.mnemonic&&x.masterWallets.length===0){let e=to();x.masterWallets.push({id:e,name:"Master Wallet 1",mnemonic:x.mnemonic,createdAt:Date.now(),type:"master"}),n=!0,x.accounts.forEach(t=>{t.type==="imported"||t.type==="imported-seed"||t.type==="watch"||t.masterWalletId||(t.masterWalletId=e,t.type="derived",(t.accountIndex===void 0||t.accountIndex===null)&&(t.accountIndex=0))})}if(x.masterWallets.length>0){let e=x.masterWallets[0].id;x.accounts.forEach(t=>{t.type==="imported"||t.type==="imported-seed"||t.type==="watch"||t.masterWalletId||(t.masterWalletId=e,t.type="derived",n=!0,(t.accountIndex===void 0||t.accountIndex===null)&&(t.accountIndex=0))})}return n}async function ky({masterWalletId:n,name:e}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};is();let t=x.masterWallets.find(r=>r.id===n);if(!t)return{success:!1,error:"Master wallet not found"};try{let r=-1;x.accounts.forEach(l=>{l.masterWalletId===n&&l.accountIndex!==null&&l.accountIndex!==void 0&&(r=Math.max(r,l.accountIndex))});let s=r+1,o=await F.deriveAccount(t.mnemonic,s);if(x.accounts.some(l=>l.address.toLowerCase()===o.address.toLowerCase()))return{success:!1,error:"Account already exists"};let a={address:o.address,privateKey:o.privateKey,name:e||`Account ${s+1}`,type:"derived",accountIndex:s,masterWalletId:n};x.accounts.push(a);let c=x.accounts.length-1;return x.activeAccountIndex=c,await Z.saveWallet(x,X),{success:!0,address:a.address,name:a.name,accountIndex:s,activeAccountIndex:c}}catch(r){return{success:!1,error:r.message}}}async function Ny({masterWalletId:n,newName:e}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};if(is(),!e||!e.trim())return{success:!1,error:"New name is required"};let t=x.masterWallets.find(r=>r.id===n);if(!t)return{success:!1,error:"Master wallet not found"};try{let r=t.name;return t.name=e.trim(),await Z.saveWallet(x,X),console.log("renameMasterWallet - renamed from:",r,"to:",t.name),{success:!0,masterWalletId:n,oldName:r,newName:t.name}}catch(r){return{success:!1,error:r.message}}}async function Iy({masterWalletId:n,count:e}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};is();let t=x.masterWallets.find(r=>r.id===n);if(!t)return{success:!1,error:"Master wallet not found"};try{let r=[],s=null,o=-1;x.accounts.forEach(i=>{i.masterWalletId===n&&i.accountIndex!==null&&(o=Math.max(o,i.accountIndex))});for(let i=0;i<e;i++){let a=o+1+i,c=await F.deriveAccount(t.mnemonic,a);if(!x.accounts.some(u=>u.address.toLowerCase()===c.address.toLowerCase())){let u={address:c.address,privateKey:c.privateKey,name:`Account ${a+1}`,type:"derived",accountIndex:a,masterWalletId:n};x.accounts.push(u),s===null&&(s=x.accounts.length-1),r.push(u)}}return s!==null&&(x.activeAccountIndex=s),console.log("bulkAddToMaster - added accounts:",r.length),console.log("bulkAddToMaster - total accounts now:",x.accounts.length),console.log("bulkAddToMaster - switched to account index:",s),await Z.saveWallet(x,X),{success:!0,addedCount:r.length,accounts:r.map(i=>({address:i.address,name:i.name})),activeAccountIndex:s}}catch(r){return{success:!1,error:r.message}}}async function Py({accountIndex:n}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};if(n<0||n>=x.accounts.length)return{success:!1,error:"Invalid account index"};x.activeAccountIndex=n,await Z.saveWallet(x,X);let e=x.accounts[n];return{success:!0,address:e.address,name:e.name,accountIndex:n}}async function Ty({accountIndex:n,newName:e}){return!x&&!await j()?{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."}:n<0||n>=x.accounts.length?{success:!1,error:"Invalid account index"}:(x.accounts[n].name=e,await Z.saveWallet(x,X),{success:!0})}async function vy({accountIndex:n}){return!x&&!await j()?{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."}:x.accounts.length<=1?{success:!1,error:"Cannot remove the last account"}:n<0||n>=x.accounts.length?{success:!1,error:"Invalid account index"}:n===0&&x.mnemonic?{success:!1,error:"Cannot remove the primary HD account"}:(x.accounts.splice(n,1),x.activeAccountIndex>=x.accounts.length&&(x.activeAccountIndex=x.accounts.length-1),await Z.saveWallet(x,X),{success:!0})}async function Cy({privateKey:n,name:e}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};try{let t=await F.importFromPrivateKey(n);if(x.accounts.some(i=>i.address.toLowerCase()===t.address.toLowerCase()))return{success:!1,error:"Account already exists"};let s={address:t.address,privateKey:t.privateKey,name:e||`Imported ${x.accounts.length+1}`,type:"imported",accountIndex:null};x.accounts.push(s);let o=x.accounts.length-1;return x.activeAccountIndex=o,await Z.saveWallet(x,X),{success:!0,address:s.address,accountIndex:o}}catch(t){return{success:!1,error:t.message}}}async function By({count:n,startIndex:e}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};if(!x.mnemonic)return{success:!1,error:"No seed phrase available - only HD wallets can derive accounts"};try{let t=[],r=-1;x.accounts.forEach(o=>{o.type==="derived"&&o.accountIndex!==null&&o.accountIndex!==void 0&&(r=Math.max(r,o.accountIndex))});let s=e!==void 0?e:r+1;for(let o=0;o<n;o++){let i=s+o,a=await F.deriveAccount(x.mnemonic,i);if(!x.accounts.some(l=>l.address.toLowerCase()===a.address.toLowerCase())){let l={address:a.address,privateKey:a.privateKey,name:`Account ${i+1}`,type:"derived",accountIndex:i};x.accounts.push(l),t.push({address:l.address,name:l.name,accountIndex:i})}}return await Z.saveWallet(x,X),{success:!0,addedCount:t.length,accounts:t}}catch(t){return{success:!1,error:t.message}}}async function Ry({seedPhrase:n,mnemonic:e,count:t=1,name:r}){if(console.log("importSeedPhraseAccounts - called with count:",t,"name:",r),!x){if(console.log("importSeedPhraseAccounts - currentWalletData is null, restoring session..."),!await j())return console.log("importSeedPhraseAccounts - failed to restore session"),{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};console.log("importSeedPhraseAccounts - session restored successfully")}let s=(n||e||"").trim();console.log("importSeedPhraseAccounts - phrase word count:",s.split(/\s+/).length);try{if(!ne.Mnemonic.isValidMnemonic(s))return{success:!1,error:"Invalid seed phrase"};x.masterWallets||(x.masterWallets=[]);let i=to(),a=x.masterWallets.length+1,c=r||`Master Wallet ${a}`,l={id:i,name:c,mnemonic:s,createdAt:Date.now(),type:"master"};x.masterWallets.push(l);let u=[],f=null;for(let h=0;h<t;h++){let p=await F.deriveAccount(s,h);if(!x.accounts.some(m=>m.address.toLowerCase()===p.address.toLowerCase())){let m=`Account ${h+1}`,y={address:p.address,privateKey:p.privateKey,name:m,type:"derived",accountIndex:h,masterWalletId:i};x.accounts.push(y),f===null&&(f=x.accounts.length-1),u.push({address:y.address,name:y.name,accountIndex:h})}}return f!==null&&(x.activeAccountIndex=f),console.log("importSeedPhraseAccounts - created master wallet:",c),console.log("importSeedPhraseAccounts - added accounts:",u.length),console.log("importSeedPhraseAccounts - switched to account index:",f),await Z.saveWallet(x,X),{success:!0,addedCount:u.length,accounts:u,masterWalletId:i,masterWalletName:c,activeAccountIndex:f}}catch(o){return{success:!1,error:o.message}}}async function Sy({address:n,name:e}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};try{if(!ne.isAddress(n))return{success:!1,error:"Invalid Ethereum address"};if(x.accounts.some(o=>o.address.toLowerCase()===n.toLowerCase()))return{success:!1,error:"This address is already in your wallet"};let r={address:ne.getAddress(n),privateKey:null,name:e||"Watch Wallet",type:"watch",accountIndex:null,isWatchOnly:!0};x.accounts.push(r);let s=x.accounts.length-1;return x.activeAccountIndex=s,console.log("addWatchWallet - added account:",r.name,r.type,r.address),console.log("addWatchWallet - switched to account index:",s),console.log("addWatchWallet - total accounts now:",x.accounts.length),await Z.saveWallet(x,X),{success:!0,address:r.address,name:r.name,activeAccountIndex:s}}catch(t){return{success:!1,error:t.message}}}async function Uy({masterWalletId:n,index:e}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};is();let t=x.masterWallets?.find(r=>r.id===n);if(!t)return{success:!1,error:"Master wallet not found"};try{let r=await F.deriveAccount(t.mnemonic,e);if(x.accounts.some(i=>i.address.toLowerCase()===r.address.toLowerCase()))return{success:!1,error:"This account already exists in your wallet"};let o={address:r.address,privateKey:r.privateKey,name:`Account ${e+1}`,type:"derived",accountIndex:e,masterWalletId:n};return x.accounts.push(o),await Z.saveWallet(x,X),{success:!0,address:o.address,name:o.name,accountIndex:e}}catch(r){return{success:!1,error:r.message}}}async function up({address:n}){try{let e=n||x?.accounts[x.activeAccountIndex]?.address;return e?{success:!0,balance:await F.getBalance(e)}:{success:!1,error:"No address provided"}}catch(e){return{success:!1,error:e.message}}}async function Oy({address:n,tokenAddress:e}){try{return{success:!0,balance:await F.getTokenBalance(n,e)}}catch(t){return{success:!1,error:t.message}}}async function fp({to:n,amount:e}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};try{let t=x.accounts[x.activeAccountIndex],r=await F.sendTransaction(t.privateKey,n,e);return{success:!0,txHash:r.hash,receipt:r}}catch(t){return{success:!1,error:t.message}}}async function Dy({tokenAddress:n,to:e,amount:t}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};try{let r=x.accounts[x.activeAccountIndex],s=await F.sendToken(r.privateKey,n,e,t);return{success:!0,txHash:s.hash,receipt:s}}catch(r){return{success:!1,error:r.message}}}async function Ly({to:n,amount:e}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};try{let t=x.accounts[x.activeAccountIndex];return{success:!0,gasInfo:await F.estimateGas(t.address,n,e)}}catch(t){return{success:!1,error:t.message}}}async function My({address:n}){try{let e=n||x?.accounts[x.activeAccountIndex]?.address;console.log("getTransactionHistory called for address:",e),console.log("Current network:",F.currentNetwork?.name,"chainId:",F.currentNetwork?.chainId);let t=await F.getTransactionHistory(e);return console.log("Transaction history fetched, count:",t?.length||0),{success:!0,history:t}}catch(e){return console.error("getTransactionHistory error:",e),{success:!1,error:e.message}}}async function dp({message:n}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};try{let e=x.accounts[x.activeAccountIndex];return{success:!0,signature:await F.signMessage(e.privateKey,n)}}catch(e){return{success:!1,error:e.message}}}async function hp({domain:n,types:e,value:t}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};try{let r=x.accounts[x.activeAccountIndex];return{success:!0,signature:await F.signTypedData(r.privateKey,n,e,t)}}catch(r){return{success:!1,error:r.message}}}function pp({networkKey:n,customRpcUrl:e}){try{let t=null;if(n.startsWith("0x")){let r=parseInt(n,16);for(let[s,o]of Object.entries(ue))if(o.chainId===r||o.chainIdHex===n){t={...o};break}if(!t){for(let[s,o]of Object.entries(at))if(o.chainId===r||o.chainIdHex===n){t={...o};break}}t&&e&&(t.rpcUrl=e),t&&(F.currentNetwork=t,F.provider=null)}else ue[n]?(F.switchNetwork(n),t=F.currentNetwork):at[n]&&(pu(n),F.currentNetwork=at[n],F.provider=null,t=F.currentNetwork);return t?(Z.loadPreferences().then(r=>{r.network=n,e?r.customRpcUrl=e:delete r.customRpcUrl,Z.savePreferences(r)}),{success:!0,network:F.currentNetwork}):{success:!1,error:"Network not found"}}catch(t){return{success:!1,error:t.message}}}async function Fy(n,e){return new Promise(t=>{let r=Date.now().toString();un.set(r,{origin:n,tabId:e.tab?.id,resolve:t,timestamp:Date.now()}),chrome.action.openPopup().catch(()=>{chrome.windows.create({url:chrome.runtime.getURL(`popup/popup.html?dappRequest=${r}&origin=${encodeURIComponent(n)}`),type:"popup",width:375,height:600,focused:!0})}),setTimeout(()=>{un.has(r)&&(un.delete(r),t({success:!1,error:"User rejected the request"}))},12e4)})}function _y(){let n=Array.from(un.entries());if(n.length===0)return{success:!0,request:null};let[e,t]=n[n.length-1];return{success:!0,request:{id:e,origin:t.origin,timestamp:t.timestamp}}}async function Hy({requestId:n}){let e=un.get(n);if(!e)return{success:!1,error:"Request not found or expired"};if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};nr.add(e.origin);let t=x.accounts[x.activeAccountIndex],r={success:!0,result:[t.address],accounts:[t.address],chainId:F.currentNetwork.chainIdHex};return e.resolve(r),un.delete(n),e.tabId&&chrome.tabs.sendMessage(e.tabId,{type:"RAMAPAY_STATE_CHANGE",data:{accounts:[t.address],chainId:F.currentNetwork.chainIdHex,connected:!0}}).catch(()=>{}),r}function Gy({requestId:n}){let e=un.get(n);return e?(e.resolve({success:!1,error:"User rejected the request"}),un.delete(n),{success:!0}):{success:!1,error:"Request not found or expired"}}async function xp({origin:n},e){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};let t=n||new URL(e.tab?.url||"").origin;nr.add(t);let r=x.accounts[x.activeAccountIndex];return{success:!0,result:[r.address],accounts:[r.address],chainId:F.currentNetwork.chainIdHex}}function Ky({origin:n}){return nr.delete(n),{success:!0}}async function Wy({method:n,params:e},t){let r=t.tab?.url?new URL(t.tab.url).origin:"";switch(n){case"eth_requestAccounts":return!Qe||!nr.has(r)?await Fy(r,t):await xp({origin:r},t);case"eth_accounts":return!Qe||!nr.has(r)?{success:!0,result:[]}:{success:!0,result:[x.accounts[x.activeAccountIndex].address]};case"eth_chainId":return{success:!0,result:F.currentNetwork.chainIdHex};case"net_version":return{success:!0,result:String(F.currentNetwork.chainId)};case"eth_getBalance":let s=await up({address:e[0]});return s.success?{success:!0,result:"0x"+BigInt(s.balance.wei).toString(16)}:s;case"personal_sign":return nr.has(r)?await dp({message:e[0]}):{success:!1,error:"Site not connected"};case"eth_signTypedData_v4":if(!nr.has(r))return{success:!1,error:"Site not connected"};let o=JSON.parse(e[1]);return await hp(o);case"eth_sendTransaction":if(!nr.has(r))return{success:!1,error:"Site not connected"};let i=e[0];return await fp({to:i.to,amount:i.value?(BigInt(i.value)/BigInt(10**18)).toString():"0"});case"wallet_switchEthereumChain":let a=parseInt(e[0].chainId,16),c=Object.keys(ue).find(l=>ue[l].chainId===a);return c?pp({networkKey:c}):{success:!1,error:"Unknown chain"};default:return{success:!1,error:`Method not supported: ${n}`}}}async function Vy({tokenAddress:n,chainId:e}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};try{let t=await F.getTokenInfo(n),r={address:n.toLowerCase(),chainId:e||F.currentNetwork.chainId,symbol:t.symbol,name:t.name,decimals:t.decimals,addedAt:Date.now()};return x.customTokens||(x.customTokens=[]),x.customTokens.some(o=>o.address===r.address&&o.chainId===r.chainId)?{success:!1,error:"Token already added"}:(x.customTokens.push(r),await Z.saveWallet(x,X),{success:!0,token:r})}catch(t){return{success:!1,error:t.message}}}async function zy({tokenAddress:n,chainId:e}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};try{if(!x.customTokens)return{success:!1,error:"No custom tokens found"};let t=e||F.currentNetwork.chainId;return x.customTokens=x.customTokens.filter(r=>!(r.address.toLowerCase()===n.toLowerCase()&&r.chainId===t)),await Z.saveWallet(x,X),{success:!0}}catch(t){return{success:!1,error:t.message}}}async function Qy({chainId:n}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked",tokens:[]};let e=n||F.currentNetwork.chainId,t=(x.customTokens||[]).filter(s=>s.chainId===e);return{success:!0,tokens:await Promise.all(t.map(async s=>{try{let o=await F.getTokenBalance(x.accounts[x.activeAccountIndex].address,s.address);return{...s,balance:o.formatted}}catch{return{...s,balance:"0"}}}))}}async function Jy({tokenAddress:n}){try{return{success:!0,token:await F.getTokenInfo(n)}}catch(e){return{success:!1,error:e.message}}}async function jy({tokenAddress:n}){if(!n||!n.startsWith("0x")||n.length!==42)return{success:!1,error:"Invalid token address"};let e=[],t=[],r=Object.entries(at),s=r.map(async([i,a])=>{try{let c=new ne.JsonRpcProvider(a.rpcUrl),l=new Promise((y,w)=>setTimeout(()=>w(new Error("Timeout")),1e4)),u=["function decimals() view returns (uint8)","function symbol() view returns (string)","function name() view returns (string)","function totalSupply() view returns (uint256)"],f=new ne.Contract(n,u,c),h=await Promise.race([Promise.all([f.decimals(),f.symbol(),f.name()]),l]),[p,b,m]=h;return{found:!0,networkKey:i,network:a.name,chainId:a.chainId,chainIdHex:a.chainIdHex,symbol:a.symbol,token:{address:n,name:m||"Unknown",symbol:b||"TOKEN",decimals:Number(p)||18,network:a.name,networkKey:i,chainId:a.chainId,chainIdHex:a.chainIdHex,networkSymbol:a.symbol}}}catch(c){return{found:!1,networkKey:i,error:c.message}}});return(await Promise.allSettled(s)).forEach(i=>{i.status==="fulfilled"&&i.value.found&&e.push(i.value)}),e.length===0?{success:!1,error:"Token not found on any network",scannedNetworks:r.length}:(e.sort((i,a)=>i.networkKey.startsWith("ramestta")&&!a.networkKey.startsWith("ramestta")?-1:!i.networkKey.startsWith("ramestta")&&a.networkKey.startsWith("ramestta")?1:i.network.localeCompare(a.network)),{success:!0,tokens:e.map(i=>i.token),scannedNetworks:r.length,foundCount:e.length})}async function qy({address:n}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked"};let e=n||x.accounts[x.activeAccountIndex].address,t=F.currentNetwork;if(!t)return{success:!1,error:"No network selected"};let r={1370:[{address:"0x1234567890123456789012345678901234567890",symbol:"WRAMA"}],1:[{address:"0xdAC17F958D2ee523a2206206994597C13D831ec7",symbol:"USDT"},{address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",symbol:"USDC"},{address:"0x6B175474E89094C44Da98b954EescdeCB5BB8fD6",symbol:"DAI"},{address:"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599",symbol:"WBTC"},{address:"0x514910771AF9Ca656af840dff83E8264EcF986CA",symbol:"LINK"},{address:"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984",symbol:"UNI"},{address:"0x7Fc66500c84A76Ad7e9c93437bFc5Ac33E2DDaE9",symbol:"AAVE"}],137:[{address:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",symbol:"USDT"},{address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",symbol:"USDC"},{address:"0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063",symbol:"DAI"},{address:"0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6",symbol:"WBTC"},{address:"0x53E0bca35eC356BD5ddDFebbD1Fc0fD03FaBad39",symbol:"LINK"},{address:"0xb33EaAd8d922B1083446DC23f610c2567fB5180f",symbol:"UNI"},{address:"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270",symbol:"WMATIC"}],56:[{address:"0x55d398326f99059fF775485246999027B3197955",symbol:"USDT"},{address:"0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d",symbol:"USDC"},{address:"0x1AF3F329e8BE154074D8769D1FFa4eE058B1DBc3",symbol:"DAI"},{address:"0x7130d2A12B9BCbFAe4f2634d864A1Ee1Ce3Ead9c",symbol:"BTCB"},{address:"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",symbol:"WBNB"},{address:"0x0E09FaBB73Bd3Ade0a17ECC321fD13a19e81cE82",symbol:"CAKE"}],42161:[{address:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",symbol:"USDT"},{address:"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8",symbol:"USDC"},{address:"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1",symbol:"DAI"},{address:"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f",symbol:"WBTC"}],10:[{address:"0x94b008aA00579c1307B0EF2c499aD98a8ce58e58",symbol:"USDT"},{address:"0x7F5c764cBc14f9669B88837ca1490cCa17c31607",symbol:"USDC"},{address:"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1",symbol:"DAI"}]},s=t.chainId.toString(),o=r[s]||[];if(o.length===0)return{success:!0,tokensFound:0,message:"No common tokens configured for this network"};let i=[],a=["function decimals() view returns (uint8)","function symbol() view returns (string)","function name() view returns (string)","function balanceOf(address) view returns (uint256)"],c=new ne.JsonRpcProvider(t.rpcUrl);return await Promise.all(o.map(async l=>{try{let u=new ne.Contract(l.address,a,c),[f,h,p,b]=await Promise.all([u.balanceOf(e),u.symbol(),u.name(),u.decimals()]);if(f>0n&&!(x.customTokens||[]).some(y=>y.address.toLowerCase()===l.address.toLowerCase()&&y.chainId===t.chainId)){let y={address:l.address,symbol:h||l.symbol,name:p||h||"Unknown",decimals:Number(b)||18,chainId:t.chainId,addedAt:Date.now()};x.customTokens||(x.customTokens=[]),x.customTokens.push(y),i.push(y)}}catch(u){console.log(`Token scan error for ${l.symbol}:`,u.message)}})),i.length>0&&await Z.saveWallet(x,X),{success:!0,tokensFound:i.length,tokens:i.map(l=>l.symbol)}}var rr={data:{},lastUpdated:0,cacheDuration:6e4},ip={RAMA:"ramestta",ETH:"ethereum",BNB:"binancecoin",MATIC:"matic-network",POL:"matic-network",AVAX:"avalanche-2",FTM:"fantom",XDAI:"xdai",ETC:"ethereum-classic",KLAY:"klay-token",IOTX:"iotex",CRO:"crypto-com-chain",OKB:"okb",RBTC:"rootstock",MNT:"mantle",ADA:"cardano",ARB:"ethereum",OP:"ethereum",LINEA:"ethereum",BASE:"base",USDT:"tether",USDC:"usd-coin",DAI:"dai",BUSD:"binance-usd",TUSD:"true-usd",USDP:"paxos-standard",FRAX:"frax",LUSD:"liquity-usd",USDD:"usdd",BTC:"bitcoin",WBTC:"wrapped-bitcoin",WETH:"weth",stETH:"staked-ether",rETH:"rocket-pool-eth",cbETH:"coinbase-wrapped-staked-eth",UNI:"uniswap",AAVE:"aave",LINK:"chainlink",CRV:"curve-dao-token",MKR:"maker",SNX:"synthetix-network-token",COMP:"compound-governance-token",SUSHI:"sushi",YFI:"yearn-finance","1INCH":"1inch",BAL:"balancer",LDO:"lido-dao",RPL:"rocket-pool",GMX:"gmx",SHIB:"shiba-inu",DOGE:"dogecoin",APE:"apecoin",SAND:"the-sandbox",MANA:"decentraland",AXS:"axie-infinity",GALA:"gala",ENS:"ethereum-name-service",LRC:"loopring",IMX:"immutable-x",PEPE:"pepe",FLOKI:"floki",WBNB:"wbnb",WMATIC:"wmatic",WAVAX:"wrapped-avax",WFTM:"wrapped-fantom",AURORA:"aurora",NEAR:"near"};async function $y({symbol:n,currency:e="usd"}){try{return{success:!0,price:(await gu([n],e))[n.toUpperCase()]||0,symbol:n.toUpperCase(),currency:e.toUpperCase()}}catch(t){return{success:!1,error:t.message,price:0}}}async function Yy({symbols:n,currency:e="usd",chainId:t}){try{let r=t||F.currentNetwork?.chainId||1370,s=n?[...n]:[],o=F.currentNetwork?.symbol||"RAMA";return s.includes(o)||s.unshift(o),["ETH","BTC","USDT","USDC"].forEach(c=>{s.includes(c)||s.push(c)}),x?.customTokens&&x.customTokens.forEach(c=>{s.includes(c.symbol)||s.push(c.symbol)}),{success:!0,prices:await gu(s,e,r),currency:e.toUpperCase(),lastUpdated:rr.lastUpdated,nativeSymbol:o}}catch(r){return{success:!1,error:r.message,prices:{}}}}async function gu(n,e="usd",t=null){let r=Date.now();if(r-rr.lastUpdated<rr.cacheDuration){let i={},a=!0;for(let c of n){let l=`${c.toUpperCase()}_${e}`;rr.data[l]!==void 0?i[c.toUpperCase()]=rr.data[l]:a=!1}if(a)return i}let s=n.map(i=>ip[i.toUpperCase()]).filter(Boolean),o=[...new Set(s)].join(",");if(!o){let i={};return n.forEach(a=>i[a.toUpperCase()]=0),i}try{let i=await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${o}&vs_currencies=${e}&include_24hr_change=true`,{signal:AbortSignal.timeout(1e4)});if(!i.ok){console.warn("Price API returned non-ok status:",i.status);let l={};return n.forEach(u=>{let f=`${u.toUpperCase()}_${e}`;l[u.toUpperCase()]=rr.data[f]||0}),l}let a=await i.json(),c={};rr.lastUpdated=r;for(let l of n){let u=ip[l.toUpperCase()];if(u&&a[u]){let f=a[u][e]||0,h=a[u][`${e}_24h_change`]||0;c[l.toUpperCase()]=f,rr.data[`${l.toUpperCase()}_${e}`]=f,rr.data[`${l.toUpperCase()}_${e}_change`]=h}else c[l.toUpperCase()]=0}return c}catch(i){console.error("Price fetch error:",i);let a={};return n.forEach(c=>{let l=`${c.toUpperCase()}_${e}`;a[c.toUpperCase()]=rr.data[l]||0}),a}}async function Zy({name:n,rpcUrl:e,chainId:t,symbol:r,explorerUrl:s}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};try{if(!n||!e||!t||!r)return{success:!1,error:"Missing required network fields"};let o=parseInt(t);if(isNaN(o))return{success:!1,error:"Chain ID must be a number"};if(Object.keys(ue).find(l=>ue[l].chainId===o))return{success:!1,error:"Network with this Chain ID already exists"};try{let u=await(await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"eth_chainId",params:[],id:1})})).json();if(u.error)return{success:!1,error:"Invalid RPC URL: "+u.error.message}}catch{return{success:!1,error:"Cannot connect to RPC URL"}}let a={chainId:o,chainIdHex:"0x"+o.toString(16),name:n,symbol:r.toUpperCase(),decimals:18,rpcUrl:e,rpcUrls:[e],explorerUrl:s||"",isTestnet:!1,isCustom:!0},c=`custom_${o}`;return ue[c]=a,x.customNetworks||(x.customNetworks={}),x.customNetworks[c]=a,await Z.saveWallet(x,X),{success:!0,network:a,networkKey:c}}catch(o){return{success:!1,error:o.message}}}async function Xy({networkKey:n,chainId:e}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};try{let t=n;if(!t&&e){let s=typeof e=="string"&&e.startsWith("0x")?parseInt(e,16):e;for(let[o,i]of Object.entries(ue))if(i.isCustom&&(i.chainId===s||i.chainIdHex===e)){t=o;break}}if(!t)return{success:!1,error:"Network not found"};if(!t.startsWith("custom_")&&!ue[t]?.isCustom)return{success:!1,error:"Cannot remove built-in networks"};if(!ue[t])return{success:!1,error:"Network not found"};let r=ue[t];return delete ue[t],x.customNetworks&&(delete x.customNetworks[t],await Z.saveWallet(x,X)),F.currentNetwork.chainId===r.chainId&&F.switchNetwork("ramestta_mainnet"),{success:!0}}catch(t){return{success:!1,error:t.message}}}async function ew(){let n=[];return Object.entries(ue).forEach(([e,t])=>{t.isCustom&&n.push({key:e,...t})}),{success:!0,networks:n}}function mp(){x?.customNetworks&&Object.keys(x.customNetworks).forEach(n=>{ue[n]=x.customNetworks[n]}),x?.enabledNetworks?(rt=x.enabledNetworks,xu(rt)):(rt=[...Ga],xu(rt))}function tw(){return{success:!0,enabledNetworks:rt}}async function rw({networkKey:n}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked"};try{return at[n]?rt.includes(n)?{success:!0,enabledNetworks:rt}:(rt.push(n),pu(n),x.enabledNetworks=rt,await Z.saveWallet(x,X),{success:!0,enabledNetworks:rt}):{success:!1,error:"Network not found"}}catch(e){return{success:!1,error:e.message}}}async function nw({networkKey:n}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked"};try{if(n==="ramestta_mainnet")return{success:!1,error:"Cannot disable primary network"};let e=rt.indexOf(n);return e===-1?{success:!0,enabledNetworks:rt}:(rt.splice(e,1),op(n),F.currentNetwork.chainId===at[n]?.chainId&&F.switchNetwork("ramestta_mainnet"),x.enabledNetworks=rt,await Z.saveWallet(x,X),{success:!0,enabledNetworks:rt})}catch(e){return{success:!1,error:e.message}}}async function sw({currentPassword:n,newPassword:e}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked"};try{return n!==X?{success:!1,error:"Current password is incorrect"}:!e||e.length<8?{success:!1,error:"New password must be at least 8 characters"}:(await Z.saveWallet(x,e),X=e,{success:!0})}catch(t){return{success:!1,error:t.message}}}async function ow({password:n}){return(!Qe||!x)&&!await j()?{success:!1,error:"Wallet not unlocked"}:{success:!0,verified:n===X}}async function iw({password:n,accountIndex:e}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};try{if(n!==X)return{success:!1,error:"Incorrect password"};let t=e??x.activeAccountIndex,r=x.accounts[t];return r?{success:!0,privateKey:r.privateKey,address:r.address}:{success:!1,error:"Account not found"}}catch(t){return{success:!1,error:t.message}}}async function aw({password:n}){if(!x&&!await j())return{success:!1,error:"Wallet not unlocked. Please unlock your wallet first."};try{return n!==X?{success:!1,error:"Incorrect password"}:x.mnemonic?{success:!0,mnemonic:x.mnemonic}:{success:!1,error:"This wallet was imported via private key and has no recovery phrase"}}catch(e){return{success:!1,error:e.message}}}function cw(){return{success:!0,sites:Array.from(nr)}}chrome.action.onClicked.addListener(n=>{});chrome.runtime.onSuspend.addListener(()=>{lp()});setInterval(async()=>{if(Qe)try{await gu(["RAMA","ETH"],"usd")}catch(n){console.log("Background price update failed:",n)}},3e5);
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

aes-js/lib.esm/aes.js:
  (*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. *)
*/
